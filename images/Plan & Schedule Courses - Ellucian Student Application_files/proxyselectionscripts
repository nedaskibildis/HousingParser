var Ellucian=Ellucian||{},BaseViewModel;Ellucian.ScreenSizes=Ellucian.ScreenSizes||{};Ellucian.ScreenSizes=Object.freeze({xxsmall:320,xsmall:420,small:768,medium:992,tablets:1025,large:1200,xlarge:1440,xxlarge:2e3});BaseViewModel=function(n){var t=this,i;this.mobileScreenWidth=n||480;this.isMobile=ko.observable(!1);i=ko.observable(0);this.screenIsSmallerThan=function(n){var t=!1,r,u;for(r in Ellucian.ScreenSizes)if(n===r){t=!0;break}if(!t)throw"Please provide a valid screen query size from Ellucian.ScreenSizes";return(u=Ellucian.ScreenSizes[n],i()<Ellucian.ScreenSizes[n])?!0:!1};this.checkForMobile=function(n,r){var f=n,e="inner",u;"innerWidth"in n||(e="client",f=r.documentElement||r.body);u=f[e+"Width"];u<t.mobileScreenWidth?t.isMobile(!0):t.isMobile(!1);i(u)};this.isMobile.subscribe(function(n){n===!0?t.changeToMobile():t.changeToDesktop()});this.changeToMobile=function(){};this.changeToDesktop=function(){};t.loadingMessage=ko.observable(personProxyLoadingThrobberMessage);t.proxySelectionDialogIsLoading=ko.observable(!1);t.proxySelectionDialogIsDisplayed=ko.observable(!1);this.ProxySubjects=ko.observableArray();t.selectedProxySubject=ko.observable(null);t.changeProxySubject=function(){hideProxyDialog=!1;t.getProxySubjects()};t.updateProxyBanner=ko.observable(!1).subscribeTo("UPDATE.PROXY.BANNER");t.updateViewModelWithProxySubjectData=function(){t.proxySelectionDialogIsLoading(!1);t.proxySelectionDialogIsDisplayed(!hideProxyDialog&&t.ProxySubjects().length>1);showOrHideElement(t.ProxySubjects(),$("#changeProxyUser-link"));showOrHideElement(t.ProxySubjects(),$("#changeProxyUser-opsLink"));t.proxySelectionDialogIsDisplayed()?setFocus("input.buttonless"):setFocus("#topOfForm")};this.getProxySubjects=function(){var n=Ellucian.Storage.session.getItem("Ellucian.proxySubjects");n?(ko.mapping.fromJS(n,{},t.ProxySubjects),t.updateViewModelWithProxySubjectData()):$.ajax({url:getProxySubjectsActionUrl,type:"GET",contentType:jsonContentType,dataType:"json",beforeSend:function(){t.proxySelectionDialogIsLoading(!0)},success:function(n){account.handleInvalidSessionResponse(n)||(Ellucian.Storage.session.setItem("Ellucian.proxySubjects",n.ProxySubjects),ko.mapping.fromJS(n,{},t))},error:function(n){n.status!=0&&$("#notificationHost").notificationCenter("addNotification",{message:proxySelectionUnableToLoadSubjectsMessage,type:"error"})},complete:function(){t.updateViewModelWithProxySubjectData()}})};t.cancelProxySelectionDialog=function(){t.proxySelectionDialogIsDisplayed(!1);t.selectedProxySubject(null)};t.changingUserMessage=ko.observable(personProxyChangingThrobberMessage);t.changingProxyUsers=ko.observable(!1);t.saveProxySelectionDialog=function(){var i={subjectJson:ko.toJSON(t.selectedProxySubject())},n=homeUrl;t.selectedProxySubject().Id()==currentUserId&&(n+="?hideProxyDialog=true");$.ajax({url:setProxySubjectActionUrl,type:"PUT",contentType:jsonContentType,data:JSON.stringify(i),dataType:"json",beforeSend:function(){t.changingProxyUsers(!0)},success:function(){},error:function(){console.log("Error setting proxy subject.")},complete:function(){window.location.href=n}})};t.saveProxySelectionEnabled=ko.computed(function(){return t.selectedProxySubject()});t.selectedProxySubject.subscribe(function(){t.selectedProxySubject()&&makeAnnouncement(proxySelectionUserSelectedMessage.format(t.selectedProxySubject().FullName()))});t.verifyingPasswordMessage=ko.observable(verifyingPasswordMessage);t.verifyingPasswordAltText=ko.observable(verifyingPasswordAltText);t.verifyingPassword=ko.observable(!1);t.userPassword=ko.observable();t.verifyPasswordMessage=ko.observable();t.verifyPasswordDialogIsDisplayed=ko.observable(!1);t.showVerifyPasswordDialog=function(){t.verifyPasswordDialogIsDisplayed(!0)};t.cancelVerifyPasswordDialog=function(){t.verifyPasswordDialogIsDisplayed(!1);t.verifyPasswordMessage(null);t.userPassword(null)};t.verifyPasswordButtonEnabled=ko.computed(function(){return t.userPassword()&&t.userPassword()!==""});t.submitVerifyPasswordDialog=function(){var n={passwordJson:ko.toJSON(t.userPassword())};$.ajax({url:reauthenticateUrl,type:"POST",contentType:jsonContentType,data:JSON.stringify(n),dataType:"json",beforeSend:function(){t.verifyPasswordDialogIsDisplayed(!1);t.verifyingPassword(!0)},success:function(n){account.handleInvalidSessionResponse(n)||(t.verifyingPassword(!1),t.verifyingPasswordSuccessFunction(),t.verifyPasswordMessage(null),t.userPassword(null))},error:function(n){n.status!=0&&t.verifyPasswordMessage(JSON.parse(n.responseText));t.verifyingPassword(!1);t.verifyPasswordDialogIsDisplayed(!0)},complete:function(){}})};t.verifyingPasswordSuccessFunction=function(){};t.saveProxySelectionButton={id:"save-proxy-selection-dialog-button",isPrimary:!0,title:Ellucian.Proxy.ButtonLabels.saveProxySelectionDialogButtonLabel,callback:t.saveProxySelectionDialog,enabled:t.saveProxySelectionEnabled};t.cancelProxySelectionButton={id:"cancel-proxy-selection-dialog-button",isPrimary:!1,title:Ellucian.Proxy.ButtonLabels.cancelProxySelectionDialogButtonLabel,callback:t.cancelProxySelectionDialog};t.verifyPasswordDialogButton={id:"verify-password-dialog-button",isPrimary:!0,title:Ellucian.SharedComponents.ButtonLabels.buttonTextVerifyPassword,callback:t.submitVerifyPasswordDialog,enabled:t.verifyPasswordButtonEnabled};t.cancelPasswordDialogButton={id:"cancel-dialog-button",title:Ellucian.SharedComponents.ButtonLabels.buttonTextCancel,callback:t.cancelVerifyPasswordDialog};$(document).ready(function(){var n=0;$(window).on("resize",function(){clearTimeout(n);n=setTimeout(function(){t.checkForMobile(window,document)},100)})})};$(document).ready(function(){var n=new BaseViewModel(768),t;ko.applyBindings(n,document.getElementById("proxy-selection"));ko.applyBindings(n,document.getElementById("userOptions"));t=document.getElementById("logOffOptions");t!==null&&ko.applyBindings(n,t);!$("#proxy-banner").length&&$("#home").length&&n.getProxySubjects()})