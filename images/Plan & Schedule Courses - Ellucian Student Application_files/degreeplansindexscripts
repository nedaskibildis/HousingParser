function planArchiveViewModel(n){var t=this;this.isLoading=ko.observable(!1);this.isLoaded=ko.observable(!1);this.archives=ko.observableArray();this.hasArchives=ko.computed(function(){return t.archives().length>0});this.ReportLinkHandler=function(n){window.location=getPlanArchiveReportUrl+"?archiveId="+n.Id};this.offScreenText=function(n){return n&&n.CreatedDate&&n.CreatedBy&&stringArchivePlanOffScreenFor&&stringArchivePlanOffScreenBy?stringArchivePlanOffScreenFor+n.CreatedDate+stringArchivePlanOffScreenBy+n.CreatedBy:null};this.noArchivedPlansMessage=n===!0?Ellucian.DegreePlans.Resources.NoArchivedPlansStudentMessage:Ellucian.Advisors.Resources.NoArchivesMessage}function loadSamplePlanViewModel(){var n=this;this.StudentPrograms=ko.observableArray();this.AllPrograms=ko.observableArray();this.SelectedProgramCode=ko.observable();this.SelectedProgram=ko.observable(null);this.SelectedProgram.subscribe(function(t){t?n.SelectedProgramCode(t.Code()):n.SelectedProgramCode("")});this.SelectedProgramTitle=ko.computed(function(){var i=n.SelectedProgramCode(),t=ko.utils.arrayFirstDeprecated(n.AllPrograms(),function(n){return n.Code()===i});return t!==null?t.Title():""});this.selectedTrackCode=ko.observable(null);this.selectedTrack=ko.observable();this.selectedTrack.subscribe(function(t){if(t)if(n.selectedTrackCode(t.Code()),t.DegreePlan()!=null)n.DegreePlan(t.DegreePlan()),n.enableLoadPlanButton(!0);else{n.previewIsLoading(!0);var i=t.getSamplePlan().then(function(i){ko.mapping.fromJS(i,{},t);n.DegreePlan(t.DegreePlan());n.enableLoadPlanButton(!0);n.previewIsLoading(!1);n.previewIsVisible(!0)}).catch(function(t){$("#notificationHost").notificationCenter("addNotification",{message:t,type:"error"});n.CancelLoadPlan()})}else n.selectedTrackCode(""),n.DegreePlan(null),n.enableLoadPlanButton(!1)});this.dialogIsOpen=ko.observable(!1);this.previewIsVisible=ko.observable(!1);this.previewIsLoading=ko.observable(!1);this.enableLoadPlanButton=ko.observable(!1);this.Terms=ko.observable();this.planningTerms=ko.observableArray().subscribeTo("planningTerms",!0);this.selectedTerm=ko.observable();this.DegreePlan=ko.observable();this.DegreePlanId=ko.observable();this.StudentId=ko.observable();this.DefaultCurriculumTrack=ko.observable();this.CurriculumTracks=ko.observable(null);this.showPreviewButton=ko.pureComputed(function(){return!n.previewIsLoading()&&!n.previewIsVisible()});this.enablePreviewButton=ko.pureComputed(function(){return!isNullOrEmpty(n.SelectedProgramCode())});this.samplePlanLoaded=ko.observable(!1).publishOn("samplePlanLoaded");this.CanAdvisorModifyPlan=ko.observable(!0);this.toggleDialog=function(){n.dialogIsOpen()===!1?($("#sample-plans-filter").val(""),$("li.sample-plan").hide(),$("#sample-plan-filternoresults").hide(),n.dialogIsOpen(!0)):n.dialogIsOpen(!1)};this.LoadPlan=function(){typeof n.DegreePlan()!="undefined"&&n.DegreePlan().length!==0&&(n.samplePlanLoaded(!0),ko.utils.postJson(loadSamplePlanUrl,{degreePlanJson:ko.toJS(n.DegreePlan),__RequestVerificationToken:$('input[name="__RequestVerificationToken"]').val()}))};this.PreviewPlan=function(){if(n.enableLoadPlanButton(!1),typeof n.SelectedProgramCode()!="undefined"&&n.SelectedProgramCode().length!==0){n.previewIsLoading(!0);var t=getCurriculumTracksUrl+"?studentId="+n.StudentId()+"&programCode="+encodeURIComponent(n.SelectedProgramCode());$.ajax({url:t,type:"GET",contentType:jsonContentType,dataType:"json",success:function(t){if(!account.handleInvalidSessionResponse(t)){var i=ko.mapping.fromJS(t,curriculumTracksMapping,n);i.CurriculumTracks().length<=1?n.SinglePlanPreview():(n.previewIsLoading(!1),n.previewIsVisible(!0))}},error:function(t){t.status===500?$("#notificationHost").notificationCenter("addNotification",{message:Ellucian.Programs.Resources.LoadPreviewErrorMessage+n.SelectedProgramTitle(),type:"error"}):$("#notificationHost").notificationCenter("addNotification",{message:Ellucian.Programs.Resources.NoSamplePlanMessage.format(n.SelectedProgramTitle(),n.selectedTerm()?n.selectedTerm():""),type:"error"});n.CancelLoadPlan()}})}};this.SinglePlanPreview=function(){var i,t;if((typeof n.CurriculumTracks()=="undefined"||n.CurriculumTracks().length===0)&&(typeof n.DefaultCurriculumTrack()=="undefined"||n.DefaultCurriculumTrack().length===0)){$("#notificationHost").notificationCenter("addNotification",{message:Ellucian.Programs.Resources.NoSamplePlanMessage.format(n.SelectedProgramTitle(),n.selectedTerm()?n.selectedTerm():""),type:"error"});n.CancelLoadPlan();return}i="";i=typeof n.CurriculumTracks()!="undefined"&&n.CurriculumTracks().length===1?n.CurriculumTracks()[0].Code():n.DefaultCurriculumTrack();t=previewSamplePlanUrl+"?degreePlanId="+n.DegreePlanId()+"&curriculumTrackCode="+encodeURIComponent(i)+"&programCode="+encodeURIComponent(n.SelectedProgramCode());n.selectedTerm()&&(t=t+"&termCode="+encodeURIComponent(n.selectedTerm()));$.ajax({url:t,type:"GET",contentType:jsonContentType,dataType:"json",success:function(t){account.handleInvalidSessionResponse(t)||(ko.mapping.fromJS(t,{},n),n.previewIsLoading(!1),n.previewIsVisible(!0),n.enableLoadPlanButton(!0))},error:function(t){t.status===500?$("#notificationHost").notificationCenter("addNotification",{message:Ellucian.Programs.Resources.LoadPreviewErrorMessage+n.SelectedProgramTitle(),type:"error"}):$("#notificationHost").notificationCenter("addNotification",{message:Ellucian.Programs.Resources.NoSamplePlanMessage.format(n.SelectedProgramTitle(),n.selectedTerm()?n.selectedTerm():""),type:"error"});n.CancelLoadPlan()}})};this.PreviewPlanBack=function(){n.SelectedProgramCode("");n.SelectedProgram(null);n.previewIsLoading(!1);n.previewIsVisible(!1)};this.CancelLoadPlan=function(){n.SelectedProgramCode("");n.SelectedProgram(null);n.previewIsLoading(!1);n.previewIsVisible(!1);n.toggleDialog()};this.delayedFilter=null;this.filterDelayMs=300;this.setupSamplePlansFilter=function(){$(document).on("keyup search","#sample-plans-filter",function(){window.clearTimeout(n.delayedFilter);n.delayedFilter=window.setTimeout(function(){var t=$("#sample-plans-filter").val();$("li.sample-plan").hide();t.length>1&&($("li.sample-plan").filter(":containsany("+t+")").show(),$("li.sample-plan").filter(":visible").length===0?$("#sample-plan-filternoresults").show():$("#sample-plan-filternoresults").hide());$("#sample-plans-filter").trigger("focus");window.clearTimeout(n.delayedFilter)},n.filterDelayMs)})};this.isProxyUser=ko.observable().subscribeTo("isProxyUser",!0);this.samplePlanCancelButton={id:"sampleplancancelbutton",title:Ellucian.Programs.Resources.UiCancelButtonText,aria:Ellucian.Programs.Resources.UiCancelSamplePlanButtonAriaLabel,isPrimary:!1,callback:n.CancelLoadPlan};this.samplePlanPreviewButton={id:"sampleplanpreviewbutton",title:Ellucian.Programs.Resources.UiPreviewSamplePlanButtonText,aria:Ellucian.Programs.Resources.UiPreviewSamplePlanButtonAriaLabel,isPrimary:!0,visible:n.showPreviewButton,enabled:n.enablePreviewButton,callback:n.PreviewPlan};this.samplePlanBackButton={id:"sampleplanbackbutton",title:Ellucian.Programs.Resources.UiPreviewSamplePlanBackButtonText,aria:Ellucian.Programs.Resources.UiPreviewSamplePlanBackButtonAriaLabel,isPrimary:!1,visible:n.previewIsVisible,callback:n.PreviewPlanBack};this.samplePlanLoadButton={id:"sampleplanloadbutton",title:Ellucian.Programs.Resources.UiLoadSamplePlanButtonText,aria:Ellucian.Programs.Resources.UiLoadSamplePlanButtonAriaLabel,isPrimary:!0,visible:n.previewIsVisible,enabled:n.enableLoadPlanButton,callback:n.LoadPlan}}function track(n,t){ko.mapping.fromJS(n,{},this);var i=this;this.collapsibleOpen=ko.observable(!1);this.selectedTerm=ko.observable(t.selectedTerm());this.studentId=ko.observable(t.StudentId());this.degreePlanId=ko.observable(t.DegreePlanId());this.selectedProgramCode=ko.observable(t.SelectedProgramCode());this.Terms=ko.observable(null);this.DegreePlan=ko.observable(null);this.parentViewModel=ko.observable(t);this.collapsibleOpen.subscribe(function(n){n&&i.bindSamplePlan()});this.bindSamplePlan=function(){if(i.DegreePlan()==null){i.parentViewModel().previewIsLoading(!0);var n=previewSamplePlanUrl+"?degreePlanId="+i.degreePlanId()+"&curriculumTrackCode="+encodeURIComponent(i.Code())+"&programCode="+encodeURIComponent(i.selectedProgramCode());i.selectedTerm()&&(n=n+"&termCode="+encodeURIComponent(i.selectedTerm()));$.ajax({url:n,type:"GET",contentType:jsonContentType,dataType:"json",success:function(n){account.handleInvalidSessionResponse(n)||(ko.mapping.fromJS(n,{},i),i.parentViewModel().previewIsLoading(!1),i.parentViewModel().previewIsVisible(!0))},error:function(){$("#notificationHost").notificationCenter("addNotification",{message:Ellucian.Programs.Resources.LoadCurriculumTrackPreviewErrorMessage+i.Description(),type:"error"});i.parentViewModel().CancelLoadPlan()}})}};this.getSamplePlan=function(){var n=previewSamplePlanUrl+"?degreePlanId="+i.degreePlanId()+"&curriculumTrackCode="+encodeURIComponent(i.Code())+"&programCode="+encodeURIComponent(i.selectedProgramCode());return i.selectedTerm()&&(n=n+"&termCode="+encodeURIComponent(i.selectedTerm())),new Promise(function(t,i){$.ajax({url:n,type:"GET",contentType:jsonContentType,dataType:"json"}).done(function(n){account.handleInvalidSessionResponse(n)||t(n);i(Ellucian.Student.planRepositoryMessages.GetSamplePlanFailed)}).fail(function(){i(Ellucian.Student.planRepositoryMessages.GetSamplePlanFailed)})})}}function UpdatePetitionsWaivers(n){return new function(){ko.mapping.fromJS(n.data,{},this);this.Period=ko.computed(function(){var n=isNullOrEmpty(this.StartDate())?" ":this.StartDate(),t=isNullOrEmpty(this.EndDate())?"Unlimited":this.EndDate();return isNullOrEmpty(this.Term())?n+" - "+t:this.Term()},this)}}function DegreePlan(n){ko.mapping.fromJS(n,planMapping,this);var t=this;this.isProxyUser=ko.observable().subscribeTo("isProxyUser",!0)}function Term(n){ko.mapping.fromJS(n,planMapping,this);var t=this;this.availableSectionsRetrieved=ko.observable(!1);this.coursesSelected=ko.computed(function(){if(typeof t.PlannedCourses=="undefined")return!1;for(var n=0;n<t.PlannedCourses().length;n++)if(t.PlannedCourses()[n].selected()===!0)return!0;return!1});this.isProtectInactive=ko.computed(function(){if(typeof t.PlannedCourses=="undefined")return!0;for(var n=0;n<t.PlannedCourses().length;n++)if(t.PlannedCourses()[n].selected()===!0&&t.PlannedCourses()[n].IsProtected()===!1)return!1;return!0});this.isUnprotectInactive=ko.computed(function(){if(typeof t.PlannedCourses=="undefined")return!0;for(var n=0;n<t.PlannedCourses().length;n++)if(t.PlannedCourses()[n].selected()===!0&&t.PlannedCourses()[n].IsProtected()===!0)return!1;return!0});this.isDenyInactive=ko.computed(function(){if(typeof t.PlannedCourses=="undefined")return!0;for(var n=0;n<t.PlannedCourses().length;n++)if(t.PlannedCourses()[n].selected()===!0&&(t.PlannedCourses()[n].ApprovalStatus()===null||t.PlannedCourses()[n].ApprovalStatus()==="Approved"||t.PlannedCourses()[n].ApprovalStatus()===""))return!1;return!0});this.isApproveInactive=ko.computed(function(){if(typeof t.PlannedCourses=="undefined")return!0;for(var n=0;n<t.PlannedCourses().length;n++)if(t.PlannedCourses()[n].selected()===!0&&(t.PlannedCourses()[n].ApprovalStatus()===null||t.PlannedCourses()[n].ApprovalStatus()===""||t.PlannedCourses()[n].ApprovalStatus()==="Denied"))return!1;return!0});this.showingFilters=ko.observable(!1);this.filterHeaderClickHandler=function(n,t){$("#filters-menu li a.filter-header-link").each(function(){$(this).is(t.currentTarget)||($("ul",$(this).parent()).stop().slideUp(100),$(this).data("collapsed","true"),$(this).removeClass("filter-header-link-expanded").addClass("filter-header-link-collapsed"))});var i=$(t.currentTarget).next("ul.filters-menu-filter");typeof $(t.currentTarget).data("collapsed")=="undefined"||$(t.currentTarget).data("collapsed")==="true"?($(t.currentTarget).data("collapsed","false"),i.stop().slideDown(100,function(){i.css("overflow","auto")}),$(t.currentTarget).removeClass("filter-header-link-collapsed").addClass("filter-header-link-expanded")):($(t.currentTarget).data("collapsed","true"),i.stop().slideUp(100),$(t.currentTarget).removeClass("filter-header-link-expanded").addClass("filter-header-link-collapsed"))};this.availabilityFilters=ko.observableArray();this.locationFilters=ko.observableArray();this.dayOfWeekFilters=ko.observableArray();this.timeOfDayFilters=ko.observableArray();this.facultyFilters=ko.observableArray();this.topicFilters=ko.observableArray();this.atLeastOneFilterSelected=function(){return t.availabilityFilters().length>0||t.locationFilters().length>0||t.dayOfWeekFilters().length>0||t.timeOfDayFilters().length>0||t.facultyFilters().length>0||t.topicFilters().length>0};this.filtersDisplay=function(n){for(var i,f,u=0,t="",r=0;r<n.length;r++)n[r].Selected()===!0&&u++;switch(u){case 0:t=typeof stringFilterNoValueSelected!="undefined"?stringFilterNoValueSelected:"All";break;case 1:case 2:for(i=0;i<n.length;i++)t=n[i].Selected()===!0?t+n[i].Description()+"\n":t;break;default:f=n.length-1;t=n[0].Description()+"\n"+Ellucian.Student.PlanViewModelMessages.moreFilters.format(f)}return t};this.availabilityFiltersDisplay=ko.computed(function(){return t.filtersDisplay(t.availabilityFilters())}).extend({throttle:10});this.locationFiltersDisplay=ko.computed(function(){return t.filtersDisplay(t.locationFilters())}).extend({throttle:10});this.dayOfWeekFiltersDisplay=ko.computed(function(){return t.filtersDisplay(t.dayOfWeekFilters())}).extend({throttle:10});this.timeOfDayFiltersDisplay=ko.computed(function(){return t.filtersDisplay(t.timeOfDayFilters())}).extend({throttle:10});this.facultyFiltersDisplay=ko.computed(function(){return t.filtersDisplay(t.facultyFilters())}).extend({throttle:10});this.topicFiltersDisplay=ko.computed(function(){return t.filtersDisplay(t.topicFilters())}).extend({throttle:10});this.GetCourseBubbleClass=function(){return t.IsTermCompleted()&&t.IsAcademicHistoryAvailable()?"dp-coursebubble dp-coursebubble-complete":"dp-coursebubble dp-coursebubble-planned"};this.printSchedule=function(){var n=printScheduleUrl+"?termId="+t.Code(),i=window.open(n);return window.focus&&i.focus(),!1};this.printScheduleForAdvisor=function(){var n=printScheduleUrl+"?termId="+t.Code()+"&studentId="+advisingViewModelJson.Advisee.Id+"&isAdvisor=true",i=window.open(n);return window.focus&&i.focus(),!1};this.saveIcal=function(){var n=saveAsIcalUrl+"?termId="+t.Code();window.location=n};this.unscheduledSections=ko.computed(function(){var r=[],n,i,u;if(typeof t.PlannedSectionsWithNoMeetingTimes=="undefined")return r;for(n=0;n<t.PlannedSectionsWithNoMeetingTimes().length;n++)(i=t.PlannedSectionsWithNoMeetingTimes()[n],ko.utils.unwrapObservable(i.IsDropped)!==!0)&&(u=ko.utils.unwrapObservable(i.AcademicHistory),ko.utils.unwrapObservable(u.Section)===null&&r.push(i));return r}).extend({throttle:50});this.unscheduledRegisteredSections=ko.computed(function(){var r=[],n,i,u;if(typeof t.PlannedSectionsWithNoMeetingTimes=="undefined")return r;for(n=0;n<t.PlannedSectionsWithNoMeetingTimes().length;n++)(i=t.PlannedSectionsWithNoMeetingTimes()[n],ko.utils.unwrapObservable(i.IsDropped)!==!0)&&(u=ko.utils.unwrapObservable(i.AcademicHistory),ko.utils.unwrapObservable(u.Section)!==null&&r.push(i));return r}).extend({throttle:50})}function Course(n){ko.mapping.fromJS(n,planMapping,this);var t=this;this.selected=ko.observable(!1);this.AvailableSections=ko.observableArray();this.DisplayingDetails=ko.observable(!0);this.DisplayingAvailableSections=ko.observable(!1);this.AvailableSectionsPage=ko.observable(0);this.AvailableSectionsPageDisplay=ko.computed(function(){return t.AvailableSectionsPage()+1});this.availableSectionsPerPage=6;this.availableSectionsPageCount=ko.computed(function(){var n=t.AvailableSections().length/t.availableSectionsPerPage;return n>1?Math.ceil(n):1});this.PagedAvailableSections=function(){var u,f;if(typeof t.AvailableSections()=="undefined"||t.AvailableSections()===null||t.AvailableSections().length===0)return[];var n=t.AvailableSectionsPage()*t.availableSectionsPerPage,i=n+t.availableSectionsPerPage-1,r=t.AvailableSections().length;for(n>r-1&&(n=0,i=i>r?r-1:this.availableSectionsPerPage-1),i>r-1&&(i=r-1),u=0,f=0;f<n;)f+=t.availableSectionsPerPage,u++;return t.AvailableSectionsPage(u),t.AvailableSections.slice(n,i+1)};this.AvailableSectionsFirstPage=function(){this.AvailableSectionsPage(0)};this.AvailableSectionsPreviousPage=function(){t.AvailableSectionsPage()>0&&t.AvailableSectionsPage(t.AvailableSectionsPage()-1)};this.AvailableSectionsNextPage=function(){var n=t.AvailableSectionsPage()+1;t.AvailableSectionsPage()<t.availableSectionsPageCount()-1&&t.AvailableSectionsPage(n)};this.AvailableSectionsLastPage=function(){t.AvailableSectionsPage()<t.availableSectionsPageCount()-1&&t.AvailableSectionsPage(t.availableSectionsPageCount()-1)};this.AvailableSectionsJumpPage=function(n){n>=1&&n<=t.availableSectionsPageCount()&&t.AvailableSectionsPage(n-1)};this.HandlePageInput=function(n,i){i&&typeof i.srcElement!="undefined"&&i.srcElement?t.AvailableSectionsJumpPage(i.srcElement.value):i&&typeof i.currentTarget!="undefined"&&i.currentTarget&&t.AvailableSectionsJumpPage(i.currentTarget.value)};this.AvailableSectionsCanPageFirst=function(){return t.AvailableSectionsPage()===0?!1:!0};this.AvailableSectionsCanPagePrevious=function(){return t.AvailableSectionsPage()===0?!1:!0};this.AvailableSectionsCanPageNext=function(){return t.AvailableSectionsPage()<t.availableSectionsPageCount()-1};this.AvailableSectionsCanPageLast=function(){return t.AvailableSectionsPage()<t.availableSectionsPageCount()-1};this.GetGradingTypeText=function(){var n=Ellucian.Course.SectionDetails.stringGradedGrading,i;try{return i=t.GetGradingType().toString(),i===Ellucian.Course.SectionDetails.stringAuditGradingCode&&(n=Ellucian.Course.SectionDetails.stringAuditGrading),i===Ellucian.Course.SectionDetails.stringPassFailGradingCode&&(n=Ellucian.Course.SectionDetails.stringPassFailGrading),n}catch(r){return n}};this.GetCoreqPrereqWarningText=function(n){var i="",f,e,o,r,s,u;n||(n="\n");try{if(typeof t.Warnings=="function"&&t.Warnings().length>0)for(f=0;f<t.Warnings().length;f++)try{i.length>0&&(i+=n);i+=t.Warnings()[f]}catch(h){}}catch(c){}try{if(ko.utils.unwrapObservable(t.Requisite)!==null&&(e=ko.utils.unwrapObservable(t.Requisite),e.DisplayText()!==null&&e.DisplayText()!==""))try{i.length>0&&(i+=n);i+=e.DisplayText()}catch(h){}}catch(c){}try{if(t.CorequisiteCourses().length>0)for(o=0;o<t.CorequisiteCourses().length;o++)if(r=t.CorequisiteCourses()[o],r!==null)if(r.IsRequired){if(r.DisplayMessage()!==null&&r.DisplayMessage()!=="")try{i.length>0&&(i+=n);i+=r.DisplayMessage()}catch(h){}}else if(r.DisplayMessage()!==null&&r.DisplayMessage()!=="")try{i.length>0&&(i+=n);i+=r.DisplayMessage()}catch(h){}}catch(c){}try{if(t.Section!==null&&t.Section.CorequisiteSections().length>0)for(s=0;s<t.Section.CorequisiteSections().length;s++)if(u=t.Section.CorequisiteSections()[s],u!==null)if(u.IsRequired){if(u.DisplayMessage()!==null&&u.DisplayMessage()!=="")try{i.length>0&&(i+=n);i+=u.DisplayMessage()}catch(h){}}else if(u.DisplayMessage()!==null&&u.DisplayMessage()!=="")try{i.length>0&&(i+=n);i+=u.DisplayMessage()}catch(h){}}catch(c){}return i};this.ShowMeetingInfo=ko.observable(!1);this.ToggleMeetingInfo=function(){t.ShowMeetingInfo()===!0?t.ShowMeetingInfo(!1):t.ShowMeetingInfo(!0)};this.MeetingInfoStyle=ko.computed(function(){return t.ShowMeetingInfo()===!0?"esg-icon--up":"esg-icon--down"});this.courseListItemStyle=ko.computed(function(){return t.AcademicHistory.HasSection()?"schedule-listitem-registeredsection":"schedule-listitem-plannedsection"});this.courseBannerStyle=ko.computed(function(){return t.IsInProgress()||t.IsPreregistered()?"schedule-listitem-registeredsectionbanner":t.IsPlanned()||t.IsWaitlisted()?"schedule-listitem-plannedsectionbanner":t.IsCompleted()?"schedule-listitem-registeredsectionbanner":t.IsWithdrawn()||t.IsDropped()?"schedule-listitem-withdrawnsectionbanner":void 0});this.courseBannerIcon=ko.computed(function(){var n={};return(t.IsInProgress()||t.IsPreregistered())&&(n.icon="check",n.color="success-dark"),(t.IsPlanned()||t.IsWaitlisted())&&(n.icon="check",n.color="warning-dark"),t.IsCompleted()&&(n.icon="check",n.color="success-dark"),(t.IsWithdrawn()||t.IsDropped())&&(n.icon="error",n.color="error-dark"),n});this.courseBannerText=ko.computed(function(){return t.IsInProgress()?scheduleStatusRegistered:t.IsPreregistered()?scheduleStatusPreregistered:t.IsCompleted()?scheduleStatusCompleted:t.IsWithdrawn()?scheduleStatusWithdrawn:t.IsPlanned()?scheduleStatusPlanned:t.IsWaitlisted()?scheduleStatusWaitlisted:t.IsDropped()?scheduleStatusDropped:void 0});this.coursePrintStyle=ko.computed(function(){return t.IsInProgress()||t.IsCompleted()||t.IsPreregistered()?"schedule-details-table-registered":"schedule-details-table-planned"});this.showDropButton=ko.computed(function(){return!t.AcademicHistory.IsGraded()&&!t.IsWithdrawn()&&!t.IsDropped()?!0:!1});this.showWaitlistButton=ko.computed(function(){return t.Section===null?!1:typeof t.Section=="function"&&t.Section()===null?!1:t.Section.IsActive()&&t.Section.WaitlistAvailable()&&t.SectionWaitlistStatus()===Ellucian.DegreePlans.Resources.ScheduleWaitlistStatusNotWaitlisted&&t.Section.Available()!==null&&(t.Section.Available()<=0||t.Section.Waitlisted()>0)?!0:!1});this.CanSkipWaitlist=ko.observable(!1).subscribeTo("userCanSkipWaitlist",!0);this.showRegisterButton=ko.computed(function(){if(t.Section===null||typeof t.Section=="function"&&t.Section()===null)return!1;var n=typeof t.CanSkipWaitlist()!="undefined"?t.CanSkipWaitlist():!1;return t.Section.IsActive()&&(t.SectionWaitlistStatus()===Ellucian.DegreePlans.Resources.ScheduleWaitlistStatusPermissionToRegister||(t.Section.Available()>0||t.Section.Available()===null)&&(t.Section.Waitlisted()===0||n)||!(t.Section.Available()>0||t.Section.Available()===null)&&t.Section.Waitlisted()===0&&t.CanExceedSeatCapacity())?!0:!1});this.showDropWaitlistButton=ko.computed(function(){return t.SectionWaitlistStatus()===Ellucian.DegreePlans.Resources.ScheduleWaitlistStatusActive||t.SectionWaitlistStatus()===Ellucian.DegreePlans.Resources.ScheduleWaitlistStatusPermissionToRegister?!0:!1});this.displayCreditsCeus=ko.computed(function(){return t.AcademicHistory!==null&&t.AcademicHistory.AcademicCreditId()?t.AcademicHistory.CreditsCeusDisplay():t.CreditsCeusDisplay()});this.showFullCoursePlaceholder=ko.observable(!0);t.TruncatedCoursePlaceholderDescription()&&t.showFullCoursePlaceholder(!1);this.showExpandedCoursePlaceholderDescriptionDialog=ko.observable(!1);t.showExpandedCoursePlaceholderDescription=function(){t.showExpandedCoursePlaceholderDescriptionDialog(!0)};t.closeExpandedCoursePlaceholderDescriptionDialog=function(){t.showExpandedCoursePlaceholderDescriptionDialog(!1)};t.expandedCoursePlaceholderDialogCloseButton={id:"closeExpandedCoursePlaceholderDescriptionDialog",title:Ellucian.DegreePlans.Resources.CoursePlaceholderDescriptionCloseDialogText,isPrimary:!0,enabled:!0,callback:t.closeExpandedCoursePlaceholderDescriptionDialog};t.displayCoursePlaceholderDescription=ko.pureComputed(function(){return t.CoursePlaceholderDescription()?t.showFullCoursePlaceholder()===!0?t.CoursePlaceholderDescription():t.TruncatedCoursePlaceholderDescription():null});t.coursePlaceholderStyle=ko.pureComputed(function(){return t.CoursePlaceholderDescription()!==null?"course-placeholder":null})}function Filter(n){var t=this;this.Value=ko.observable(n.Value);this.Description=ko.observable(n.Description);this.Selected=ko.observable(n.Selected);this.Count=ko.observable(n.Count)}function requisiteModel(n){ko.mapping.fromJS(n,planMapping,this);var t=this}function corequisiteCourseModel(n){ko.mapping.fromJS(n,planMapping,this);var t=this}function corequisiteSectionModel(n){if(n!=null){ko.mapping.fromJS(n,planMapping,this);var t=this;this.alertStyle=ko.pureComputed(function(){return t.IsRequired()===!0?"esg-alert--warning":"esg-alert--info"});this.iconStyle=ko.pureComputed(function(){return t.IsRequired()===!0?"esg-icon--warning-dark":"esg-icon--info-dark"});this.icon=ko.pureComputed(function(){return t.IsRequired()===!0?"#icon-warning":"#icon-info"});this.bubbleStyle=ko.pureComputed(function(){return t.IsRequired()===!0?"dp-warning-bubble":"dp-info-bubble"})}}function DropReasonsConfigurationModel(n){ko.mapping.fromJS(n,planMapping,this);var t=this}function IntentToWithdrawCodesModel(n){ko.mapping.fromJS(n,planMapping,this);var t=this}function StudentPetitionsWaiversViewModel(){var n=this;this.isLoaded=ko.observable(!1);this.StudentWaivers=ko.observableArray();this.StudentPetitions=ko.observableArray();this.StudentOverloadPetitions=ko.observableArray();this.StudentConsents=ko.observableArray();this.StudentAddAuthorizations=ko.observableArray();this.hasPetitions=ko.observable(!1);this.hasOverloadPetitions=ko.observable(!1);this.hasConsents=ko.observable(!1);this.hasWaivers=ko.observable(!1);this.hasAuthorizations=ko.observable(!1);this.hasPetitions=ko.computed(function(){return n.StudentPetitions().length>0});this.hasOverloadPetitions=ko.computed(function(){return n.StudentOverloadPetitions().length>0});this.hasConsents=ko.computed(function(){return n.StudentConsents().length>0});this.hasWaivers=ko.computed(function(){return n.StudentWaivers().length>0});this.hasAuthorizations=ko.computed(function(){return n.StudentAddAuthorizations().length>0})}function StudentGradeIdsViewModel(){var n=this;this.isLoaded=ko.observable(!1);this.StudentId=ko.observable(null);this.AnonymousGradingType=ko.observable(null);this.StudentGradingIds=ko.observableArray([]);this.Notifications=ko.observableArray([]);this.hasGradingIds=ko.observable(!1);this.hasGradingIds=ko.computed(function(){return n.StudentGradingIds().length>0});this.displayNotifications=function(){var t,i;if($("#notificationHost").notificationCenter("reset"),n.Notifications().length>0)for(t=0;t<n.Notifications().length;t++)i=ko.toJS(n.Notifications()[t]),$("#notificationHost").notificationCenter("addNotification",{message:i.Message,type:i.Type,flash:!1})}}function retrievePetitionsWaivers(){$.ajax({url:getStudentPetitionsWaiversActionUrl,type:"GET",contentType:jsonContentType,dataType:"json",success:function(n){account.handleInvalidSessionResponse(n)||ko.mapping.fromJS(n,planMapping,planViewModelInstance.studentPetitionsWaiversInstance)},error:function(n){n.status!=0&&$("#notificationHost").notificationCenter("addNotification",{message:"Unable to retrieve programs",type:"error"})},complete:function(){planViewModelInstance.studentPetitionsWaiversInstance.isLoaded(!0);$(".student-petition-table").makeTableResponsive();$(".student-waiver-table").makeTableResponsive()}})}function retrieveStudentGradingIds(){$.ajax({url:getStudentGradingIdsActionUrl,type:"GET",contentType:jsonContentType,dataType:"json",success:function(n){account.handleInvalidSessionResponse(n)||(ko.mapping.fromJS(n.StudentGradeIds,{},planViewModelInstance.studentGradeIdsInstance),planViewModelInstance.studentGradeIdsInstance.displayNotifications())},error:function(n){n.status!=0&&$("#notificationHost").notificationCenter("addNotification",{message:Ellucian.DegreePlans.Resources.UnableToGetStudentGradingIds,type:"error"})},complete:function(){planViewModelInstance.studentGradeIdsInstance.isLoaded(!0);$("#student-grading-ids-table").makeTableResponsive()}})}function programModel(n){function u(){for(var t=programRequirementsViewModelInstance.EnrolledActivePrograms(),r=programRequirementsViewModelInstance.CurrentProgram(),i=!0,n=0;n<t.length;n++)if(r.Code()===t[n].Code()){i=!1;break}return i}function r(n){if(n===null||n.length===0)return!1;var t=moment(n).format("L");return t===null?!1:!0}function f(n,t){var r=n[0],e,u,o,s,i,f;for(r&&(programRequirementsViewModelInstance.Programs.removeAll(),programRequirementsViewModelInstance.EnrolledActivePrograms.removeAll()),i=0;i<r.length;i++)e=new programModel(r[i].Program),programRequirementsViewModelInstance.Programs.push(e),programRequirementsViewModelInstance.EnrolledActivePrograms.push(e);if(u=r.find(function(n){return n.Program.Code==t}),u!==null&&u!==undefined)for(i=0;i<u.Notifications.length;i++)o=ko.toJS(u.Notifications[i]),$("#notificationHost").notificationCenter("addNotification",o);for(programRequirementsViewModelInstance.Programs().length>0&&(s=programRequirementsViewModelInstance.GetProgramIndexFromHash(),programRequirementsViewModelInstance.CurrentProgram(programRequirementsViewModelInstance.Programs()[s])),i=0;i<r.length;i++)if(r[i].RelatedPrograms.length>0)for(f=0;f<r[i].RelatedPrograms.length;f++)programRequirementsViewModelInstance.RelatedProgramCodes.push(r[i].RelatedPrograms[f])}var t,i;ko.mapping.fromJS(n,requirementMapping,this);t=this;BaseViewModel.call(t,768);t.checkForMobile(window,document);this.CurrentCatalogYear=ko.observable();programRequirementsViewModelInstance.CurrentProgram()!=undefined&&t.CurrentCatalogYear(programRequirementsViewModelInstance.CurrentProgram().Catalog());this.SelectedCatalog=ko.observable();this.SelectedCatalog.subscribe(function(n){n?(programRequirementsViewModelInstance.SelectedProgramCode(programRequirementsViewModelInstance.CurrentProgram().Code()),programRequirementsViewModelInstance.SelectedCatalogYear(n),programRequirementsViewModelInstance.IsCatalogChanged(!0),programRequirementsViewModelInstance.Evaluate()):programRequirementsViewModelInstance.SelectedCatalogYear("")});i=new Date;this.StartDate=ko.observable(null);t.selectedDateOrDefault=ko.observable(null);this.StartDateErrorMessage=ko.observable(!1);t.ShowStartDateErrorMessage=ko.pureComputed({read:function(){return t.StartDateErrorMessage()},write:function(n){t.StartDateErrorMessage(n)},owner:t});t.selectDate=function(n){t.selectedDateOrDefault(n)};t.StartDateValueEntry=ko.pureComputed({read:function(){return t.StartDate()},write:function(n){t.StartDate(n);t.selectDate(n);this.checkStartDateValidity(n)},owner:t});this.DepartmentOptions=ko.computed(function(){return t.Departments().sort(function(n,t){var i=n.toLowerCase(),r=t.toLowerCase();return i<r?-1:i>r?1:0})});this.SelectedDepartment=ko.observable();this.LocationOptions=ko.computed(function(){return t.Locations().sort(function(n,t){var i=n.toLowerCase(),r=t.toLowerCase();return i<r?-1:i>r?1:0})});this.SelectedLocation=ko.observable();this.EnableStartDate=ko.observable(!1);this.EnableDepartment=ko.observable();this.EnableLocation=ko.observable();this.departmentValidationMessage=ko.observable(!1);this.locationValidationMessage=ko.observable(!1);this.departmentFocus=ko.observable();this.locationFocus=ko.observable();this.ProgramLowerStartDateLimit=ko.observable();this.ProgramUpperStartDateLimit=ko.observable();this.IsProgramStartDateValidated=ko.observable(!1);this.ProgramStartDateValidationMessage=ko.observable();this.ShowStartDateValidationMessage=ko.observable(!1);this.IsProgramStartDateValidatedByChange=ko.observable(!1);this.UpdateProgramWindowTitleAndButtonText=ko.observable();this.isUpdateProgramDialogVisible=ko.observable(!1);this.filterEnrolledActivePrograms=ko.computed(function(){return ko.utils.arrayFilter(programRequirementsViewModelInstance.EnrolledActivePrograms(),function(n){return n.ProgramStatusProcessingCode()==="Active"})});this.clearStartDate=function(){t.StartDateErrorMessage(!1);$("[id^=sdate] input").parent().prev().removeClass("esg-form__label");$("[id^=sdate] input").parent().parent().parent().parent().removeClass("esg-has-error");$("[id^=sdate] input").parent().parent().parent().next().addClass("hide-content");$("[id^=sdate] input").parent().parent().removeClass("esg-has-error");$("[id^=sdate] input").closest(".esg-grid-overlay").removeClass("esg-has-error")};this.clearCommonDates=function(){$("[id^=date_] input").parent().next().addClass("hide-content");$("[id^=date_] input").val("");$("[id^=date_] input").next().parent().parent().parent().parent().next().addClass("hide-content");$("[id^=date_] input").closest(".esg-grid-overlay").removeClass("esg-has-error");$("[id^=date_] input").prop("required",!1);$("[id^=date_] input").parent().parent().removeClass("esg-has-error");$("[id^=date_] input").parent().prev().removeClass("esg-form__label");$("[id^=date] input").parent().parent().parent().next().addClass("hide-content")};this.openUpdateProgramDialog=function(){var r;if(t.AcademicProgramStartDate()!==null){var f=moment(t.AcademicProgramStartDate).format("L"),e=moment(f).format("L"),n=moment(e);n.isValid()?t.StartDate(n.toDate()):t.StartDate(i)}t.Departments().length==1?(t.SelectedDepartment(t.Departments()[0]),t.EnableDepartment(!1)):t.EnableDepartment(!0);t.Locations()==null||t.Locations().length==0?t.EnableLocation(!1):t.Locations().length==1?(t.SelectedLocation(t.Locations()[0]),t.EnableLocation(!1)):t.EnableLocation(!0);t.isUpdateProgramDialogVisible(!0);r=$("#active-programs-list > li").length-2;r<1?$("#active-programs-list > li:nth-child(2)").hide():$("#active-programs-list > li:nth-child(2)").show();$("#active-programs-list input:checkbox").prop("checked",!1);t.clearCommonDates();t.clearStartDate();t.EnableDepartment()&&t.SelectedDepartment("");t.EnableLocation()&&t.SelectedLocation("");t.departmentValidationMessage(!1);t.locationValidationMessage(!1);u()?(t.EnableStartDate(!0),t.StartDate(new Date(i)),t.UpdateProgramWindowTitleAndButtonText(Ellucian.Programs.Resources.AddProgramModalHeading),$("#sdate input").val(moment(new Date(i)).format("L"))):(t.EnableStartDate(!1),t.UpdateProgramWindowTitleAndButtonText(Ellucian.Programs.Resources.UpdateProgramModalHeading));programRequirementsViewModelInstance.SelectedCatalogYear(programRequirementsViewModelInstance.CurrentProgram().Catalog());programRequirementsViewModelInstance.IsCatalogChanged(!u())};this.itemsChecked=ko.observableArray();this.EndDate=ko.observable(null);t.EndDateValueEntry=ko.pureComputed({read:function(){return t.EndDate()},write:function(n){t.EndDate(n);t.selectDate(n)},owner:t});this.onCheckboxToggle=function(n){endDateID="#date_"+n+" input";$(endDateID).prop("required")?($(endDateID).prop("required",!1),$(endDateID).val(""),$(endDateID).closest(".esg-grid-overlay").removeClass("esg-has-error"),$(endDateID).next().parent().parent().parent().next().addClass("hide-content"),$(endDateID).parent().next().addClass("hide-content"),$(endDateID).parent().parent().removeClass("esg-has-error")):$(endDateID).prop("required",!0)};t.closeUpdateProgram=function(){$("#active-programs-list input:checkbox").prop("checked",!1);$("[id^=date_] input").val("");$("[id^=date_] input").prop("required",!1);$("[id^=date_] input").closest(".esg-grid-overlay").removeClass("esg-has-error");t.IsProgramStartDateValidated(!1);t.ShowStartDateValidationMessage(!1);t.departmentValidationMessage(!1);t.locationValidationMessage(!1);programRequirementsViewModelInstance.IsCatalogChanged()==!1&&(t.StartDate(new Date(i)),t.Departments().length>1&&t.SelectedDepartment(""),t.Locations().length>1&&t.SelectedLocation(""));t.isUpdateProgramDialogVisible(!1)};this.checkDropdownValueSelected=function(){if(t.Departments().length>1&&t.SelectedDepartment()===undefined?t.departmentValidationMessage(!0):t.departmentValidationMessage(!1),t.Locations().length>1&&t.SelectedLocation()===undefined?t.locationValidationMessage(!0):t.locationValidationMessage(!1),t.locationValidationMessage()||t.departmentValidationMessage()){t.isUpdateProgramDialogVisible(!0);return}t.departmentValidationMessage(!1);t.locationValidationMessage(!1)};this.checkStartDateValidity=function(n){var i="sdate",u=n;if(t.ShowStartDateValidationMessage(!1),$("#"+i).parent().prev().removeClass("esg-form__label"),u==""||u==null||u==undefined){$("#"+i+".esg-form__feedback-text").length==0||$("#"+i+".esg-form__feedback-text").hasClass("hide-content")?($("#"+i).parent().next().addClass("hide-content"),$("#"+i).parent().parent().parent().next().removeClass("hide-content"),$("#"+i).closest(".esg-grid-overlay").addClass("esg-has-error")):($("#"+i).parent().parent().parent().next().addClass("hide-content"),$("#"+i).closest(".esg-grid-overlay").removeClass("esg-has-error"));t.StartDateValueEntry(u);t.isUpdateProgramDialogVisible(!0);t.IsProgramStartDateValidated(!1);t.IsProgramStartDateValidatedByChange(!1);return}if(r(u))$("#"+i).closest(".esg-grid-overlay").removeClass("esg-has-error"),$("#"+i).parent().parent().parent().next().addClass("hide-content"),t.IsProgramStartDateValidated(!0),t.IsProgramStartDateValidatedByChange(!0);else{$("#"+i).parent().parent().parent().next().addClass("hide-content");$("#"+i).parent().next().removeClass("hide-content");$("#"+i).closest(".esg-grid-overlay").addClass("esg-has-error");t.isUpdateProgramDialogVisible(!0);t.IsProgramStartDateValidated(!1);t.IsProgramStartDateValidatedByChange(!1);return}};this.updateProgram=function(){var n;if(t.ShowStartDateValidationMessage(!1),t.IsProgramStartDateValidated(!1),n=$("#sdate input").val(),$("#sdate input").trigger("change"),t.IsProgramStartDateValidatedByChange()){var e=function(){var et,it,y,i,w,c,o,l,s,at,vt,ut,a,ft,b,k,d,p,h,st,ht,g,nt;if(programRequirementsViewModelInstance.IsCatalogChanged())t.ShowStartDateValidationMessage(!1),t.IsProgramStartDateValidated(!0),$("[id^=sdate] input").closest(".esg-grid-overlay").removeClass("esg-has-error"),$("[id^=sdate] input").parent().parent().parent().next().addClass("hide-content");else if(t.IsProgramStartDateValidated(!1),et=moment(t.ProgramStartDate()).format("L"),this.ProgramLowerStartDateLimit=new Date(t.AcademicStartDate())>new Date(et)?new Date(t.AcademicStartDate()):new Date(et),t.AcademicEndDate()===null&&t.ProgramEndDate()===null?this.ProgramUpperStartDateLimit=null:t.AcademicEndDate()===null&&t.ProgramEndDate()!=null?(this.ProgramUpperStartDateLimit=new Date(t.ProgramEndDate()),this.ProgramUpperStartDateLimit.setDate(this.ProgramUpperStartDateLimit.getDate()-1)):t.AcademicEndDate()!=null&&t.ProgramEndDate()===null?(this.ProgramUpperStartDateLimit=new Date(t.AcademicEndDate()),this.ProgramUpperStartDateLimit.setDate(this.ProgramUpperStartDateLimit.getDate()-1)):new Date(t.AcademicEndDate())>new Date(t.ProgramEndDate())?(this.ProgramUpperStartDateLimit=new Date(t.ProgramEndDate()),this.ProgramUpperStartDateLimit.setDate(this.ProgramUpperStartDateLimit.getDate()-1)):(this.ProgramUpperStartDateLimit=new Date(t.AcademicEndDate()),this.ProgramUpperStartDateLimit.setDate(this.ProgramUpperStartDateLimit.getDate()-1)),this.ProgramUpperStartDateLimit===null?new Date(t.StartDate()).setHours(0,0,0,0)>=this.ProgramLowerStartDateLimit.setHours(0,0,0,0)&&t.IsProgramStartDateValidated(!0):new Date(t.StartDate()).setHours(0,0,0,0)>=this.ProgramLowerStartDateLimit.setHours(0,0,0,0)&&new Date(t.StartDate()).setHours(0,0,0,0)<=this.ProgramUpperStartDateLimit.setHours(0,0,0,0)&&t.IsProgramStartDateValidated(!0),(n==""||n==null||n==undefined)&&t.IsProgramStartDateValidated(!1),!t.IsProgramStartDateValidated()){this.ProgramUpperStartDateLimit===null?t.ProgramStartDateValidationMessage(Ellucian.Programs.Resources.StartDateLowerLimitValidationMessage.format(moment(this.ProgramLowerStartDateLimit).format("L"))):t.ProgramStartDateValidationMessage(Ellucian.Programs.Resources.StartDateLowerUpperLimitValidationMessage.format(moment(this.ProgramLowerStartDateLimit).format("L"),moment(this.ProgramUpperStartDateLimit).format("L")));t.isUpdateProgramDialogVisible(!0);t.ShowStartDateValidationMessage(!0);$("[id^=sdate] input").parent().parent().parent().next().addClass("hide-content");$("[id^=sdate] input").closest(".esg-grid-overlay").addClass("esg-has-error");return}if(t.Departments().length>1&&t.SelectedDepartment()===undefined?t.departmentValidationMessage(!0):t.departmentValidationMessage(!1),t.Locations().length>1&&t.SelectedLocation()===undefined?t.locationValidationMessage(!0):t.locationValidationMessage(!1),t.locationValidationMessage()||t.departmentValidationMessage()){t.isUpdateProgramDialogVisible(!0);return}t.departmentValidationMessage(!1);t.locationValidationMessage(!1);var ot=programRequirementsViewModelInstance.CurrentProgram(),e=[],tt=[];for(o=0;o<$("li.active-program-list-data input[type=checkbox]").length;o++)it=$("li.active-program-list-data input[type=checkbox]")[o],it.checked?(y=it.id.split("_"),e.push([y[0],y[1]])):(y=it.id.split("_"),tt.push([y[0],y[1]]));for(i=[],w=0;w<programRequirementsViewModelInstance.EnrolledActivePrograms().length;w++)programRequirementsViewModelInstance.EnrolledActivePrograms()[w].AcademicLevelCode()==ot.AcademicLevelCode()&&i.push(programRequirementsViewModelInstance.EnrolledActivePrograms()[w]);var v=t.StartDate(),rt=e.length>0?!0:!1,ct,lt=!1;if(v==""||v==null||v==undefined||n==""||n==null||n==undefined){t.isUpdateProgramDialogVisible(!0);t.ShowStartDateValidationMessage(!0);t.ProgramStartDateValidationMessage(Ellucian.Programs.Resources.StartDateValidationMessage);return}for(c=[],o=0;o<e.length;o++)for(l=0;l<i.length;l++)if(i[l].Code()==e[o][0])if(ct=i[l].Title(),s=$("#date_"+e[o][1]+" input").val(),r(s)&&(s=moment(s).format("MM/DD/YYYY")),h=i[l].AcademicProgramStartDate(),r(h)&&(h=moment(h).format("MM/DD/YYYY")),at={ProgramCode:i[l].Code(),ProgramTitle:i[l].Title(),EndDate:s},c.push(at),new Date(s)>=new Date(h))if(new Date(v)>new Date(s)&&lt==!1){if(vt=Math.ceil(Math.abs(new Date(v)-new Date(s))/864e5),vt>=1){for(ut=!1,a=[],ft=0;ft<tt.length;ft++)for(b=0;b<i.length;b++)if(i[b].Code()==tt[ft][0]){a.push(i[b]);break}for(k=0;k<e.length;k++)for(d=0;d<i.length;d++)i[d].Code()==e[k][0]&&e[k][0]!=e[o][0]&&a.push(i[d]);for(a.push(ot),p=0;p<a.length;p++){for(h=a[p].AcademicProgramStartDate(),h==null&&a[p].Code()==ot.Code()&&(h=v),st=!1,ht=null,g=0;g<e.length;g++)if(a[p].Code()==e[g][0]){st=!0;ht=$("#date_"+e[g][1]+" input").val();break}if(st){if(new Date(h).addDays(-1).setHours(0,0,0,0)<=new Date(s)&&new Date(ht)>=new Date(v).addDays(-1)){ut=!0;break}}else if(new Date(h).addDays(-1).setHours(0,0,0,0)<=new Date(s)){ut=!0;break}}if(ut){rt=!1;break}}else if(tt.length==0){rt=!1;break}}else{rt=!1;lt=!0;break}else{t.isUpdateProgramDialogVisible(!0);t.ShowStartDateValidationMessage(!0);t.ProgramStartDateValidationMessage(Ellucian.Programs.Resources.EndDateToSelfStartDateValidationMessage.format(ct));return}if(rt){t.isUpdateProgramDialogVisible(!0);t.ShowStartDateValidationMessage(!0);t.ProgramStartDateValidationMessage(Ellucian.Programs.Resources.EndDateValidationMessage);return}$("#active-programs-list input:checkbox").prop("checked",!1);$("[id^=date_] input").val("");$("[id^=date_] input").prop("required",!1);t.departmentValidationMessage(!1);t.locationValidationMessage(!1);nt={StudentId:advisingViewModelJson.Advisee.Id,AcadamicProgramId:programRequirementsViewModelInstance.CurrentProgram().Code(),CatalogYear:programRequirementsViewModelInstance.CurrentProgram().Catalog(),Department:t.SelectedDepartment(),Location:t.SelectedLocation(),StartDate:moment(n).format("MM/DD/YYYY"),ActivePrograms:c};programRequirementsViewModelInstance.isLoading(!0);u()?requirementsRepository.addStudentProgram(nt).then(function(n){var i,t,r,u;if(n){if(c.length>0)for(t=0;t<c.length;t++)i=advisingViewModelInstance.Advisee.ProgramDisplay.indexOf(c[t].ProgramTitle),i>-1&&advisingViewModelInstance.Advisee.ProgramDisplay.splice(i,1);r=programRequirementsViewModelInstance.CurrentProgram().Title();advisingViewModelInstance.Advisee.ProgramDisplay().indexOf(r)===-1&&advisingViewModelInstance.Advisee.ProgramDisplay.push(r);f(n,nt.AcadamicProgramId)}programRequirementsViewModelInstance.isLoading(!1);u={Flash:!1,Message:Ellucian.Programs.Resources.ProgramAddedSuccessMessage,Type:"Success"};$("#notificationHost").notificationCenter("addNotification",u)}).catch(function(n){var t={Flash:!1,Message:n,Type:"Error"};$("#notificationHost").notificationCenter("addNotification",t);programRequirementsViewModelInstance.isLoading(!1)}):requirementsRepository.updateStudentProgram(nt).then(function(n){var i,t,r;if(n){if(c.length>0)for(t=0;t<c.length;t++)i=advisingViewModelInstance.Advisee.ProgramDisplay.indexOf(c[t].ProgramTitle),i>-1&&advisingViewModelInstance.Advisee.ProgramDisplay.splice(i,1);f(n,nt.AcadamicProgramId)}programRequirementsViewModelInstance.isLoading(!1);r={Flash:!1,Message:Ellucian.Programs.Resources.ProgramChangedSuccessMessage,Type:"Success"};$("#notificationHost").notificationCenter("addNotification",r)}).catch(function(n){var t={Flash:!1,Message:n,Type:"Error"};$("#notificationHost").notificationCenter("addNotification",t);programRequirementsViewModelInstance.isLoading(!1)})},i=$("#active-programs-list input:required"),o=0;i.length!=0?$.each(i,function(n,t){if(t.value==""||t.value==null||t.value==undefined){$(this).closest(".esg-grid-overlay").addClass("esg-has-error");$(this).next().parent().parent().parent().next().removeClass("hide-content");return}if(o++,!r(t.value)){$(this).closest(".esg-grid-overlay").addClass("esg-has-error");$(this).next().parent().parent().parent().next().removeClass("hide-content");$(this).parent().next().length==1&&$(this).parent().parent().parent().next().addClass("hide-content");return}$(this).closest(".esg-grid-overlay").removeClass("esg-has-error");$(this).next().parent().parent().parent().next().addClass("hide-content");i.length==o&&e()}):e()}};this.DescriptionDialogIsOpen=ko.observable(!1);this.OpenDescriptionDialog=function(){t.DescriptionDialogIsOpen(!0);modalElement=$(document).find(".esg-modal-dialog[tabindex='-1']")[0];$(modalElement).trigger("focus")};this.CloseDescriptionDialog=function(){t.DescriptionDialogIsOpen(!1)};this.DescriptionDisplay=ko.computed(function(){var n=t.Description();return n.replace(new RegExp("\r\n\r\n","g"),"<\/p><p>")});t.closeDescriptionButton={id:"close-program-description-button",title:"Close",aria:"Close Program Desription",isPrimary:!1,callback:t.CloseDescriptionDialog};this.EnableCatalogYear=ko.computed(function(){return t.ProgramCatalogs().length===1&&t.Catalog()!==t.ProgramCatalogs()[0].CatalogYear()?!0:t.ProgramCatalogs().length===1&&t.Catalog()===t.ProgramCatalogs()[0].CatalogYear()?!1:t.ProgramCatalogs().length>1});this.SortedProgramCatalogs=ko.computed(function(){return t.ProgramCatalogs().sort(function(n,t){return new Date(n.CatalogStartDate())-new Date(t.CatalogStartDate())})});this.DescriptionShort=ko.computed(function(){return t.DescriptionDisplay()!==null?t.DescriptionDisplay().substring(0,50):t.DescriptionDisplay()});this.TotalCreditsForGraph=ko.computed(function(){var n=t.CompletedCredits()+t.PlannedCredits()+t.InProgressCredits(),i=t.MinimumCredits();return n>i?n:i});this.TotalStudentCredits=ko.computed(function(){var n=t.CompletedCredits()+t.InProgressCredits(),i=t.MinimumCredits();return n>i?i:n});this.TotalStudentProgressPercent=ko.computed(function(){return t.MinimumCredits()===0?0:t.TotalStudentCredits()/t.MinimumCredits()*100});this.TotalInstitutionalCreditsForGraph=ko.computed(function(){var n=t.CompletedInstitutionalCredits()+t.PlannedInstitutionalCredits()+t.InProgressInstitutionalCredits(),i=t.MinimumInstitutionalCredits();return n>i?n:i});this.CompletedCreditsPercent=ko.computed(function(){return t.TotalCreditsForGraph()===0?0:t.CompletedCredits()/t.TotalCreditsForGraph()*100});this.CompletedInstitutionalCreditsPercent=ko.computed(function(){return t.TotalInstitutionalCreditsForGraph()===0?0:t.CompletedInstitutionalCredits()/t.TotalInstitutionalCreditsForGraph()*100});this.PlannedCreditsPercent=ko.computed(function(){return t.TotalCreditsForGraph()===0?0:t.PlannedCredits()/t.TotalCreditsForGraph()*100});this.PlannedInstitutionalCreditsPercent=ko.computed(function(){return t.TotalInstitutionalCreditsForGraph()===0?0:t.PlannedInstitutionalCredits()/t.TotalInstitutionalCreditsForGraph()*100});this.InProgressCreditsPercent=ko.computed(function(){return t.TotalCreditsForGraph()===0?0:t.InProgressCredits()/t.TotalCreditsForGraph()*100});this.InProgressInstitutionalCreditsPercent=ko.computed(function(){return t.TotalInstitutionalCreditsForGraph()===0?0:t.InProgressInstitutionalCredits()/t.TotalInstitutionalCreditsForGraph()*100});this.ProgressParts=ko.pureComputed(function(){var i=t.CompletedCredits(),r=t.InProgressCredits(),u=t.PlannedCredits(),n=[];return n.push({percentage:t.CompletedCreditsPercent(),partDisplayText:t.CompletedCredits(),partColorClass:ko.observable("completed-progress"),moreInfo:ko.observable(t.CompletedCredits()+" credits completed.")}),n.push({percentage:t.InProgressCreditsPercent(),partDisplayText:t.InProgressCredits(),partColorClass:ko.observable("inprogress-progress"),moreInfo:ko.observable(t.InProgressCredits()+" credits in progress.")}),n.push({percentage:t.PlannedCreditsPercent(),partDisplayText:t.PlannedCredits(),partColorClass:ko.observable("planned-progress"),moreInfo:ko.observable(t.PlannedCredits()+" credits planned.")}),n});this.InstitutionalProgressParts=ko.pureComputed(function(){var n=[];return n.push({percentage:t.CompletedInstitutionalCreditsPercent(),partDisplayText:t.CompletedInstitutionalCredits(),partColorClass:ko.observable("completed-progress"),moreInfo:ko.observable(t.CompletedInstitutionalCredits()+" institutional credits completed.")}),n.push({percentage:t.InProgressInstitutionalCreditsPercent(),partDisplayText:t.InProgressInstitutionalCredits(),partColorClass:ko.observable("inprogress-progress"),moreInfo:ko.observable(t.InProgressInstitutionalCredits()+" institutional credits in progress.")}),n.push({percentage:t.PlannedInstitutionalCreditsPercent(),partDisplayText:t.PlannedInstitutionalCredits(),partColorClass:ko.observable("planned-progress"),moreInfo:ko.observable(t.PlannedInstitutionalCredits()+" institutional credits planned.")}),n});this.ProgramCompletionProgress=ko.pureComputed(function(){var n=[];return n.push({percentage:t.CompletedRequirementPercent(),partColorClass:ko.observable("completed-progress")}),n});this.totalOfMinimumCreditsText=ko.computed(function(){return t.TotalCredits!==undefined&&t.TotalCredits()!==undefined&&t.TotalCredits()!==null&&t.MinimumCredits!==undefined&&t.MinimumCredits()!==undefined&&t.MinimumCredits()!==null?Ellucian.Programs.Resources.PortionOfTotalFormatString.format(t.TotalCredits(),t.MinimumCredits()):null});this.totalOfMinimumInstitutionalCreditsText=ko.computed(function(){return t.TotalInstitutionalCredits!==undefined&&t.TotalInstitutionalCredits()!==undefined&&t.TotalInstitutionalCredits()!==null&&t.MinimumInstitutionalCredits!==undefined&&t.MinimumInstitutionalCredits()!==undefined&&t.MinimumInstitutionalCredits()!==null?Ellucian.Programs.Resources.PortionOfTotalFormatString.format(t.TotalInstitutionalCredits(),t.MinimumInstitutionalCredits()):null});t.otherCoursesAreDisplayed=ko.observable(!0);this.toggleOtherCoursesAreDisplayed=function(){t.otherCoursesAreDisplayed(!t.otherCoursesAreDisplayed())};this.ShowOtherCoursesDetail=function(){t.otherCoursesAreDisplayed(!0)};this.HideOtherCoursesDetail=function(){t.otherCoursesAreDisplayed(!1)};this.RetrievedNotices=ko.observable(!1);this.HasNotices=ko.observable(!1);this.ShowEvaluationNotices=ko.observable(!0);this.ToggleEvaluationNotices=function(){t.ShowEvaluationNotices()==!0?t.ShowEvaluationNotices(!1):t.ShowEvaluationNotices(!0)};this.HeaderNotice=ko.observable();this.FooterNotice=ko.observable();this.NoticeDialogIsOpen=ko.observable(!1);this.OpenNoticeDialog=function(){t.NoticeDialogIsOpen(!0);modalElement=$(document).find(".esg-modal-dialog[tabindex='-1']")[0];$(modalElement).trigger("focus")};this.CloseProgramNotesDialog=function(){t.NoticeDialogIsOpen(!1)};t.closeProgramNotesButton={id:"close-program-notes-button",title:"Close",aria:"Close "+Ellucian.Programs.Resources.UiProgramNotes,isPrimary:!1,callback:t.CloseProgramNotesDialog};this.printMyProgress=function(n){var i=window.open("","_blank"),r=$("#ReportLogoPath").val(),f,u;return typeof r!="undefined"&&r&&r.charAt(0)==="/"&&(r=r.substr(1)),f=document.getElementById("esg-cdnPath").innerHTML,u=null,u=typeof advisingViewModelJson!="undefined"?'<div id="print-section-header"  style="padding-top: 1em;border-bottom: 1px solid #000000;margin-bottom: .313em;"><img alt="logo" style="max-width: 20%;padding-bottom: 1.375rem;" src="'+baseUrl+r+'" /><div id="print-myprogress-user" class="esg-h3 text-align-center">'+studentDisplayName+" (<span>"+advisingViewModelJson.Advisee.Id+"<\/span>)<\/div><\/div>":'<div id="print-section-header"  style="padding-top: 1em;border-bottom: 1px solid #000000;margin-bottom: .313em;"><img alt="logo" style="max-width: 20%;padding-bottom: 1.375rem;" src="'+baseUrl+r+'" /><div id="print-myprogress-user" class="esg-h3 text-align-center">'+studentDisplayName+" (<span>"+currentUserID+"<\/span>)<\/div><\/div>",this.GetEvaluationNotices().then(function(){var e,o,g,v,h,y,p,w,r,s,b,c,l,k,a,d;for(i.document.open(),t.HeaderNotice&&(e='<ul style="font-weight: normal">',ko.utils.arrayForEach(t.HeaderNotice,function(n){e+="<li>"+n+"<\/li>"}),e+="<\/ul><\/div>"),t.FooterNotice&&(o='<div id="FooterNotes"><ul>',ko.utils.arrayForEach(t.FooterNotice,function(n){o+="<li>"+n+"<\/li>"}),o+="<\/ul><\/div>"),i.document.write('<html lang="en" class="no-js"><head><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=Edge" /><title>'+t.Title()+"<\/title>"),i.document.write('<link href="'+f+'" rel="stylesheet"/>'),i.document.write('<link href="'+baseUrl+'Areas/Planning/Content/Planning.css" rel="stylesheet"/>'),i.document.write('<link href="'+baseUrl+'Content/Site.css" rel="stylesheet"/>'),i.document.write('<link href="'+baseUrl+'Content/PrintPreview.css" rel="stylesheet"/>'),i.document.write("<style>a{text-decoration: none;} table{page-break-inside: auto !important;}<\/style>"),i.document.write('<\/head><body onload="window.print()">'),i.document.write(u),g=document.getElementById(n).innerHTML,i.document.write(g),i.document.write("<\/body><\/html>"),v=i.document.querySelectorAll('div[class="esg-tab program-wrapper"]'),r=0;r<v.length;r++)h=v[r],h.style.display==="none"&&h.parentNode.removeChild(h);for(i.document.getElementById("description-"+t.Code().replace(/[^a-z0-9\s]/gi,"")).innerHTML=t.DescriptionDisplay(),y=i.document.getElementById("description-more-link-"+t.Code().replace(/[^a-z0-9\s]/gi,"")),y&&y.remove(),p=i.document.getElementById("description-ellipsis-"+t.Code().replace(/[^a-z0-9\s]/gi,"")),p&&p.remove(),e&&(i.document.getElementById("program-notes-"+t.Code()).innerHTML=e),o&&(i.document.getElementById("program-footer-notes-"+t.Code()).innerHTML=o),e||o||i.document.getElementById("program-notes-"+t.Code()).remove,w=i.document.getElementsByClassName("subrequirements"),r=0;r<w.length;r++){for(s=w[r],s.style.display==="none"&&(s.style.display="block"),b=s.getElementsByTagName("table"),c=0;c<b.length;c++)l=b[c],l.rows.length>1&&l.style.display==="none"&&(l.style.display="block");for(k=s.getElementsByClassName("groups-no-list-style"),a=0;a<k.length;a++)d=k[a],d.style.display==="none"&&(d.style.display="block")}i.document.close()}),!1};this.GetEvaluationNotices=function(){var n=currentUserId,i;return typeof advisingViewModelJson!="undefined"&&(n=advisingViewModelJson.Advisee.Id),i={studentId:n,programCode:t.Code()},Promise.resolve($.ajax({url:programEvaluationNoticesUrl,data:JSON.stringify(i),type:"POST",contentType:jsonContentType,dataType:"json",success:function(n){n=$.parseJSON(n);n.length>0&&(n[0].Text&&(t.HeaderNotice=n[0].Text),n.length>1&&n[1].Text&&(t.FooterNotice=n[1].Text))},error:function(){$("#notificationHost").notificationCenter("addNotification",{message:"Unable to get notices for: "+t.Code(),type:"error"});t.isLoading(!1)}}))};this.progressBarCompletionProgressId=ko.pureComputed(function(){return t.Code()?"progress-bar-completion-progress-"+t.Code().replace(/[^a-z0-9\s]/gi,""):"progress-bar-completion-progress"});this.progressBarProgressId=ko.pureComputed(function(){return t.Code()?"progress-bar-progress-"+t.Code().replace(/[^a-z0-9\s]/gi,""):"progress-bar-progress"});this.progressBarInstProgressId=ko.pureComputed(function(){return t.Code()?"progress-bar-inst-progress-"+t.Code().replace(/[^a-z0-9\s]/gi,""):"progress-bar-inst-progress"});this.addProgramButton={id:"addProgramButton-"+t.Code(),title:t.UpdateProgramWindowTitleAndButtonText,isPrimary:!0,callback:this.updateProgram};this.cancelAddProgramButton={id:"cancelAddProgramButton-"+t.Code(),title:Ellucian.Programs.Resources.UiCancelButtonText,isPrimary:!1,callback:this.closeUpdateProgram};this.IsAllRequirementsCompleted=ko.observable(!0);this.ExpandRequirementsValue=ko.observable(t.ExpandRequirements());this.IsExpandAllRequirementsSet=ko.observable(t.ExpandRequirementsValue()!=requirementsDefaultStateText);this.IsExpandAllRequirements=ko.observable(t.ExpandRequirementsValue().length>0&&t.ExpandRequirementsValue()===requirementsExpandAllStateText?!0:t.ExpandRequirementsValue()===requirementsCollapseAllStateText?!1:!t.IsAllRequirementsCompleted());this.setExpandAllRequirements=function(){t.IsExpandAllRequirements(t.ExpandRequirementsValue().length>0&&t.ExpandRequirementsValue()===requirementsExpandAllStateText?!0:t.ExpandRequirementsValue()===requirementsCollapseAllStateText?!1:!t.IsAllRequirementsCompleted())};this.requirementsExpandOrCollapseLinkText=ko.observable("");this.setRequirementsExpandOrCollapseLinkText=function(){var n=t.IsExpandAllRequirementsSet()&&t.IsExpandAllRequirements()?requirementsCollapseAllLinkText:t.IsExpandAllRequirementsSet()&&!t.IsExpandAllRequirements()?requirementsExpandAllLinkText:t.IsAllRequirementsCompleted()?requirementsExpandAllLinkText:requirementsExpandAllLinkText;this.requirementsExpandOrCollapseLinkText(n);n==requirementsExpandAllLinkText?this.IsExpandAllRequirements(!1):this.IsExpandAllRequirements(!0)};this.ToggleExpandOrCollapseLinkText=function(){t.requirementsExpandOrCollapseLinkText()===requirementsCollapseAllLinkText?t.requirementsExpandOrCollapseLinkText(requirementsExpandAllLinkText):t.requirementsExpandOrCollapseLinkText()===requirementsExpandAllLinkText&&t.requirementsExpandOrCollapseLinkText(requirementsCollapseAllLinkText)};this.ToggleAllRequirementDetails=function(){t.IsExpandAllRequirements(!t.IsExpandAllRequirements());t.InitializeAllRequirementDetails();t.ToggleExpandOrCollapseLinkText()};this.InitializeAllRequirementDetails=function(){for(var i,r,n=0;n<this.Requirements().length;n++)if(t.IsExpandAllRequirements())for(this.Requirements()[n].ShowRequirementDetail(),t.isMobile()&&(this.Requirements()[n].ShowRequirementDisplay(),this.ShowOtherCoursesDetail()),i=0;i<this.Requirements()[n].Subrequirements().length;i++)for(this.Requirements()[n].Subrequirements()[i].ShowRequirementDetail(),r=0;r<this.Requirements()[n].Subrequirements()[i].Groups().length;r++)this.Requirements()[n].Subrequirements()[i].Groups()[r].ShowGroupDetail();else for(this.Requirements()[n].HideRequirementDetail(),t.isMobile()&&(this.Requirements()[n].HideRequirementDisplay(),this.HideOtherCoursesDetail()),i=0;i<this.Requirements()[n].Subrequirements().length;i++)for(this.Requirements()[n].Subrequirements()[i].HideRequirementDetail(),r=0;r<this.Requirements()[n].Subrequirements()[i].Groups().length;r++)this.Requirements()[n].Subrequirements()[i].Groups()[r].HideGroupDetail()};this.CheckAnyRequirementsCompleted=function(){this.IsAllRequirementsCompleted(!0);for(var n=0;n<this.Requirements().length;n++)if(this.Requirements()[n].CompletionStatus()!=Ellucian.Requirements.Groups.Completed){this.IsAllRequirementsCompleted(!1);t.setExpandAllRequirements();break}};t.IsExpandAllRequirementsSet()?(t.InitializeAllRequirementDetails(),t.CheckAnyRequirementsCompleted(),t.setRequirementsExpandOrCollapseLinkText()):(t.CheckAnyRequirementsCompleted(),t.setRequirementsExpandOrCollapseLinkText())}function requirementModel(n){ko.mapping.fromJS(n,requirementMapping,this);var t=this;this.requirementDetailIsDisplayed=ko.observable(function(){return detailsCollapsedByDefaultWhenFullyPlanned?t.CompletionStatus()!==Ellucian.Requirements.Groups.Completed&&t.CompletionStatus()!==Ellucian.Requirements.Groups.Waived&&t.PlanningStatus()!==Ellucian.Requirements.Groups.CompletelyPlanned:t.CompletionStatus()!==Ellucian.Requirements.Groups.Completed&&t.CompletionStatus()!==Ellucian.Requirements.Groups.Waived}());this.ToggleRequirementDetail=function(){t.requirementDetailIsDisplayed(!t.requirementDetailIsDisplayed())};this.ShowRequirementDetail=function(){t.requirementDetailIsDisplayed(!0)};this.HideRequirementDetail=function(){t.requirementDetailIsDisplayed(!1)};this.IsRequirementIsDisplayed=ko.observable(!0);this.requirementIsDisplayed=ko.observable(!0);this.toggleRequirementDisplay=function(){t.IsRequirementIsDisplayed(!t.IsRequirementIsDisplayed())};this.ShowRequirementDisplay=function(){t.IsRequirementIsDisplayed(!0)};this.HideRequirementDisplay=function(){t.IsRequirementIsDisplayed(!1)};this.requirementsDetailAriaText=ko.computed(function(){return t.requirementDetailIsDisplayed()?hideRequirementsDetailAriaText:showRequirementsDetailAriaText});this.requirementsDetailLinkText=ko.computed(function(){return t.requirementDetailIsDisplayed()?hideRequirementsDetailLinkText:showRequirementsDetailLinkText});this.DirectiveStyle=ko.computed(function(){switch(t.CompletionStatus()){case Ellucian.Requirements.Groups.Waived:return"requirement-directive-waived";case Ellucian.Requirements.Groups.Completed:return"requirement-directive-complete"}return"requirement-directive-incomplete"});this.PlanningDirectiveStyle=ko.computed(function(){return t.PlanningStatus()==Ellucian.Requirements.Groups.CompletelyPlanned?"requirement-directive-planned":"requirement-directive-remaining"})}function subrequirementModel(n,t){ko.mapping.fromJS(n,requirementMapping,this);var i=this;this.showPlanningDirective=ko.observable(i.CompletionStatus()!==Ellucian.Requirements.Groups.Completed&&i.CompletionStatus()!==Ellucian.Requirements.Groups.Waived);this.showDirectiveInformation=ko.observable(!(t.CompletionStatus()===Ellucian.Requirements.Groups.Completed&&i.showPlanningDirective())&&!i.IsSingleGroupThatOnlyConveysPrintText());this.requirementDetailIsDisplayed=ko.observable(function(){return detailsCollapsedByDefaultWhenFullyPlanned?i.CompletionStatus()!==Ellucian.Requirements.Groups.Completed&&i.CompletionStatus()!==Ellucian.Requirements.Groups.Waived&&i.PlanningStatus()!==Ellucian.Requirements.Groups.CompletelyPlanned:i.CompletionStatus()!==Ellucian.Requirements.Groups.Completed&&i.CompletionStatus()!==Ellucian.Requirements.Groups.Waived}());this.ToggleRequirementDetail=function(){i.requirementDetailIsDisplayed(!i.requirementDetailIsDisplayed())};this.ShowRequirementDetail=function(){i.requirementDetailIsDisplayed(!0)};this.HideRequirementDetail=function(){i.requirementDetailIsDisplayed(!1)};this.requirementsDetailAriaText=ko.computed(function(){return i.requirementDetailIsDisplayed()?hideRequirementsDetailAriaText:showRequirementsDetailAriaText});this.requirementsDetailLinkText=ko.computed(function(){return i.requirementDetailIsDisplayed()?hideRequirementsDetailLinkText:showRequirementsDetailLinkText});this.DirectiveStyle=ko.computed(function(){switch(i.CompletionStatus()){case Ellucian.Requirements.Groups.Waived:return"subrequirement-directive-waived";case Ellucian.Requirements.Groups.Completed:return"subrequirement-directive-complete"}return"subrequirement-directive-incomplete"});this.PlanningDirectiveStyle=ko.computed(function(){return i.PlanningStatus()==Ellucian.Requirements.Groups.CompletelyPlanned?"subrequirement-directive-planned":"subrequirement-directive-incomplete"});this.GroupStyle=ko.computed(function(){return i.Groups().length>1?"groups":"groups-no-list-style"});this.CodeText=ko.computed(function(){return this.Code()!==null&&this.Code().length>0?this.Code():Ellucian.Programs.Resources.CompleteTheFollowingText},this)}function groupModel(n,t){ko.mapping.fromJS(n,requirementMapping,this);var i=this;this.groupDetailIsDisplayed=ko.observable(function(){return i.MinGroupStatus()===Ellucian.Requirements.Groups.Extra&&i.CompletionStatus()===Ellucian.Requirements.Groups.NotStarted&&i.PlanningStatus()===Ellucian.Requirements.Groups.NotPlanned?!1:i.MinGroupStatus()===Ellucian.Requirements.Groups.Ignore?!1:t.CompletionStatus()===Ellucian.Requirements.Groups.Completed&&i.CompletionStatus()!==Ellucian.Requirements.Groups.Completed&&i.CompletionStatus()!==Ellucian.Requirements.Groups.Waived&&i.MinGroupStatus()!==Ellucian.Requirements.Groups.Extra?!1:detailsCollapsedByDefaultWhenFullyPlanned?i.CompletionStatus()!==Ellucian.Requirements.Groups.Completed&&i.CompletionStatus()!==Ellucian.Requirements.Groups.Waived&&i.PlanningStatus()!==Ellucian.Requirements.Groups.CompletelyPlanned:i.CompletionStatus()!==Ellucian.Requirements.Groups.Completed&&i.CompletionStatus()!==Ellucian.Requirements.Groups.Waived}());this.fulfilledStatementIsDisplayed=ko.computed(function(){return t.CompletionStatus()===Ellucian.Requirements.Groups.Completed&&i.CompletionStatus()!==Ellucian.Requirements.Groups.Completed&&i.CompletionStatus()!==Ellucian.Requirements.Groups.Waived?i.MinGroupStatus()===Ellucian.Requirements.Groups.Extra?i.CompletionStatus()===Ellucian.Requirements.Groups.NotStarted&&i.PlanningStatus()===Ellucian.Requirements.Groups.NotPlanned?!0:!1:!0:!1});this.groupText=ko.computed(function(){return i.Directive().length>0?i.Directive():i.SearchText()});this.directiveStatementIsDisplayed=ko.computed(function(){return i.MinGroupStatus()===Ellucian.Requirements.Groups.Extra&&i.CompletionStatus()===Ellucian.Requirements.Groups.NotStarted&&i.PlanningStatus()===Ellucian.Requirements.Groups.NotPlanned?!1:i.MinGroupStatus()===Ellucian.Requirements.Groups.Ignore?!1:(t.CompletionStatus()===Ellucian.Requirements.Groups.Completed&&i.CompletionStatus()!==Ellucian.Requirements.Groups.Completed&&i.CompletionStatus()!==Ellucian.Requirements.Groups.Waived)?i.MinGroupStatus()===Ellucian.Requirements.Groups.Extra&&t.CompletionStatus()===Ellucian.Requirements.Groups.Completed&&i.CompletionStatus()!==Ellucian.Requirements.Groups.Completed&&i.CompletionStatus()!==Ellucian.Requirements.Groups.Waived?!0:void 0:!0});this.displayGroupDetails=ko.computed(function(){return i.ModificationMessages()!==null&&i.ModificationMessages().length>0||i.fulfilledStatementIsDisplayed()||i.directiveStatementIsDisplayed()?!0:!1});this.ToggleGroupDetail=function(){i.groupDetailIsDisplayed(!i.groupDetailIsDisplayed())};this.ShowGroupDetail=function(){i.groupDetailIsDisplayed(!0)};this.HideGroupDetail=function(){i.groupDetailIsDisplayed(!1)};this.requirementsDetailAriaText=ko.computed(function(){return i.groupDetailIsDisplayed()?hideRequirementsDetailAriaText:showRequirementsDetailAriaText});this.requirementsDetailLinkText=ko.computed(function(){return i.groupDetailIsDisplayed()?hideRequirementsDetailLinkText:showRequirementsDetailLinkText});this.CodeText=ko.computed(function(){return this.Code().length>0?this.Code():Ellucian.Programs.Resources.CompleteTheFollowingText},this);this.DirectiveStyle=ko.computed(function(){var n;switch(i.CompletionStatus()){case Ellucian.Requirements.Groups.Waived:n="group-directive-waived";break;case Ellucian.Requirements.Groups.Completed:n="group-directive-complete";break;default:n="group-directive-incomplete"}return n});this.PlanningDirectiveStyle=ko.computed(function(){return i.PlanningStatus()==Ellucian.Requirements.Groups.CompletelyPlanned?"esg-icon__label group-directive-planned":"esg-icon__label group-directive-incomplete"})}function courseModel(n){ko.mapping.fromJS(n,requirementMapping,this);var t=this}function creditModel(n){ko.mapping.fromJS(n,requirementMapping,this);var t=this;this.creditStatusStyle=ko.computed(function(){if(t.IsNonCourse()===!0||t.IsTransferCourse()===!0)return"group-completed";switch(t.DisplayStatus()){case"Attempted":return"group-attempted";case"Withdrawn":return"group-withdrawn";case Ellucian.Requirements.Groups.Completed:return"group-completed";case"InProgress":return"group-inprogress";case"Preregistered":return"group-preregistered";case"Dropped":return"group-dropped";default:return""}});this.creditStatusIcon=ko.computed(function(){var n={};if(t.IsNonCourse()===!0||t.IsTransferCourse()===!0)return n.icon="check",n.color="success-dark",n;switch(t.DisplayStatus()){case"Attempted":n.icon="info";n.color="error-dark";break;case"Withdrawn":n.icon="info";n.color="error-dark";break;case Ellucian.Requirements.Groups.Completed:n.icon="check";n.color="success-dark";break;case"InProgress":n.icon="in-progress";n.color="success-dark";break;case"Preregistered":n.icon="check";n.color="warning-dark";break;case"Dropped":n.icon="error";n.color="error-dark";break;default:n.icon="error";n.color="error-dark"}return n});this.creditStatusText=ko.computed(function(){if(t.IsTransferCourse()===!0)return Ellucian.Programs.Resources.TransferEquivalencyCourseText;if(t.IsNonCourse()===!0)return Ellucian.Programs.Resources.NonCourseEquivalencyText;switch(t.DisplayStatus()){case"Attempted":return creditAttemptedText;case"Withdrawn":return creditWithdrawnText;case Ellucian.Requirements.Groups.Completed:return creditCompletedText;case"InProgress":return creditInProgressText;case"Preregistered":return creditPreregisteredText;case"Dropped":return creditDroppedText;default:return""}});this.isAttempted=ko.computed(function(){return t.IsCompletedCredit()===!0&&t.OtherAttemptedButNotCompleted()===!0&&t.IsWithdrawn()===!1&&t.IsDropped()===!1})}function programRequirementsViewModel(n,t){var i=this,r;BaseViewModel.call(i,Ellucian.ScreenSizes.small);i.checkForMobile(window,document);i.requirementMinHeight=ko.observable();i.activeTab=ko.observable("ataglance");i.setActiveTab=function(n){i.activeTab(n)};i.changeToMobile=function(){var t,n,r;if(i.Programs().length>0)for(t=0;t<i.Programs().length;t++)if(n=i.Programs()[t],n.otherCoursesAreDisplayed(!1),n.Requirements().length>0)for(r=0;r<n.Requirements().length;r++)n.Requirements()[r].requirementIsDisplayed(!1)};i.changeToDesktop=function(){var t,n,r;if(i.Programs().length>0)for(t=0;t<i.Programs().length;t++)if(n=i.Programs()[t],n.otherCoursesAreDisplayed(!0),n.Requirements().length>0)for(r=0;r<n.Requirements().length;r++)n.Requirements()[r].requirementIsDisplayed(!0)};r=!1;this.searchUrl=ko.observable(n);this.searchAsync=ko.observable(t);this.isProxyUser=ko.observable(!1).subscribeTo("isProxyUser",!0);this.canEdit=ko.observable(!1).subscribeTo("canEdit",!0);this.catalogResult=ko.observable(null).publishOn("catalogResult");this.catalogResultsDisplayed=ko.observable(!1).publishOn("catalogResultDisplayed");this.StudentId=ko.observable();this.noPrograms=ko.observable(!1);this.samplePlanLoaded=ko.observable(!1).subscribeTo("samplePlanLoaded");this.samplePlanLoaded.subscribe(function(n){n===!0&&(planRepository.removeSessionKeys(i.StudentId()),requirementsRepository.removeSessionKeys(i.StudentId()))});this.CourseLinkClick=function(n){var t=i.searchUrl();if(groupModel.prototype.isPrototypeOf(n)?t+="?requirement="+encodeURIComponent(n.RequirementCode())+"&Subrequirement="+encodeURIComponent(n.SubrequirementId())+"&Group="+encodeURIComponent(n.Id())+"&requirementText="+encodeURIComponent(n.SearchText()):courseModel.prototype.isPrototypeOf(n)?t+=n.Id()=="PlannedCourse"?"?CourseIds="+encodeURIComponent(n.CourseId()):"?CourseIds="+encodeURIComponent(n.Id()):creditModel.prototype.isPrototypeOf(n)&&(t+="?CourseIds="+encodeURIComponent(n.CourseId())),i.searchAsync())$.ajax({url:t,type:"GET",contentType:jsonContentType,dataType:"json",success:function(n){account.handleInvalidSessionResponse(n)||(i.catalogResult(n),i.catalogResultsDisplayed(!0),advisingTabsViewModelInstance.activeTabId("advising-catalog"),document.body.scrollTop=0,document.documentElement.scrollTop=0)},error:function(n){n.status!=0&&$("#notificationHost").notificationCenter("addNotification",{message:"Unable to retrieve search results.",type:"error"})},complete:function(){}});else{window.location=t;return}return!1};this.CurrentUserIsStudent=ko.observable(!1);this.Programs=ko.observableArray();this.EnrolledActivePrograms=ko.observableArray();this.RelatedProgramCodes=ko.observableArray();this.RelatedPrograms=ko.observableArray();this.relatedProgramsAreLoading=ko.observable(!1);this.ShowAllRelatedPrograms=ko.observable(!1);this.DisplayRelatedPrograms=ko.computed(function(){return i.ShowAllRelatedPrograms()?i.RelatedPrograms():i.RelatedPrograms.slice(0,3)});this.SetShowAllRelated=function(){i.ShowAllRelatedPrograms(!0)};this.Notifications=ko.observableArray();this.AllPrograms=ko.observableArray();this.DegreePlan=ko.observable();this.isLoading=ko.observable(!1);this.LoadingMessage=ko.observable(stringEvaluatingProgramSpinner).syncWith("LoadingMessage",!0);this.RemoveProgramClickHandler=function(){i.Programs.remove(i.CurrentProgram());i.CurrentProgram(i.Programs()[i.Programs().length-1]);window.location.hash=i.CurrentProgram().Code()};this.CurrentProgram=ko.observable();this.SelectPreviousProgram=function(){var n=i.Programs.indexOf(i.CurrentProgram());i.CurrentProgram(i.Programs()[n-1]);window.location.hash=i.CurrentProgram().Code()};this.SelectNextProgram=function(){var n=i.Programs.indexOf(i.CurrentProgram());i.CurrentProgram(i.Programs()[n+1]);window.location.hash=i.CurrentProgram().Code()};this.GetProgramIndexFromHash=function(){var t=window.location.hash.substr(1),n;if(t.length>0)for(n=0;n<i.Programs().length;n++)if(i.Programs()[n].Code()==t)return window.location.hash=i.Programs()[n].Code(),n;return window.location.hash=i.Programs()[0].Code(),0};this.WhatIfDialogIsOpen=ko.observable(!1);this.OpenWhatIfDialog=function(){i.IsCatalogChanged(!1);i.RelatedProgramCodes().length>0&&i.RelatedPrograms().length==0&&(i.relatedProgramsAreLoading(!0),$.ajax({url:evaluateRelatedProgramsUrl,data:JSON.stringify({studentId:i.StudentId(),relatedPrograms:i.RelatedProgramCodes()}),type:"POST",contentType:jsonContentType,dataType:"json",success:function(n){var t,r,u;if(!account.handleInvalidSessionResponse(n))for(n=$.parseJSON(n),t=0;t<n.length;t++)r=n[t],u=new programModel(r.Program),i.RelatedPrograms.push(u);i.relatedProgramsAreLoading(!1)},error:function(n){i.relatedProgramsAreLoading(!1);n.status!=0&&$("#notificationHost").notificationCenter("addNotification",{message:"Unable to retrieve related program details.",type:"error"})},complete:function(){}}));$("li.program").show();i.WhatIfDialogIsOpen(!0);$("#programs-filter").val("");$("#programs-filternoresults").hide();i.AllPrograms().length==0&&$("#programs-filternoresults").show()};this.CancelWhatIfDialog=function(){i.ShowAllRelatedPrograms(!1);i.IsCatalogChanged(!0);i.WhatIfDialogIsOpen(!1)};this.IsCatalogChanged=ko.observable();this.SelectedCatalogYear=ko.observable();this.SelectedProgramCode=ko.observable();this.SelectedProgram=ko.observable();this.SelectedProgram.subscribe(function(n){n?i.SelectedProgramCode(n.Code()):i.SelectedProgramCode("")});this.enableViewProgramButton=ko.pureComputed(function(){return!isNullOrEmpty(i.SelectedProgramCode())});this.Evaluate=function(){for(var t,n=0;n<i.Programs().length;n++)if(i.SelectedProgramCode()==i.Programs()[n].Code()&&(i.SelectedCatalogYear()==i.Programs()[n].Catalog()||!i.IsCatalogChanged())){i.CurrentProgram(i.Programs()[n]);window.location.hash=i.CurrentProgram().Code();i.WhatIfDialogIsOpen(!1);return}i.WhatIfDialogIsOpen(!1);typeof stringEvaluatingProgramSpinner=="string"&&i.LoadingMessage(stringEvaluatingProgramSpinner);i.isLoading(!0);t={program:i.SelectedProgramCode(),isWhatIfEvaluation:!0,studentId:i.StudentId(),catalogYear:i.SelectedCatalogYear()};$.ajax({url:programEvaluationUrl,data:JSON.stringify(t),type:"POST",contentType:jsonContentType,dataType:"json",success:function(n){var r,t,u;if(!account.handleInvalidSessionResponse(n)){for(n=$.parseJSON(n),r=new programModel(n.Program),i.Programs.push(r),t=0;t<n.Notifications.length;t++)u=n.Notifications[t],$("#notificationHost").notificationCenter("addNotification",u);$("#programs-filter").val("");setTimeout(function(){i.CurrentProgram(i.Programs()[i.Programs().length-1]);window.location.hash=i.CurrentProgram().Code()},0)}i.isLoading(!1)},error:function(){$("#notificationHost").notificationCenter("addNotification",{message:"Unable to evaluate: "+program.Code(),type:"error"});i.isLoading(!1)},complete:function(){}})};this.delayedFilter=null;this.filterDelayMs=300;this.setupProgramFilter=function(){$(document).on("keyup search","#programs-filter",function(){window.clearTimeout(i.delayedFilter);i.delayedFilter=window.setTimeout(function(){var n=$("#programs-filter").val();$("li.program").hide().filter(":containsany("+n+")").show();$("li.program").filter(":visible").length===0?$("#programs-filternoresults").show():$("#programs-filternoresults").hide();$("#programs-filter").trigger("focus");window.clearTimeout(i.delayedFilter)},i.filterDelayMs)})};this.updateEvaluations=ko.observable(!1).syncWith("updateEvaluations");this.GetEvaluationNotices=function(n){var t={studentId:i.StudentId(),programCode:n};$.ajax({url:programEvaluationNoticesUrl,data:JSON.stringify(t),type:"POST",contentType:jsonContentType,dataType:"json",success:function(n){var r,u;if(!account.handleInvalidSessionResponse(n))for(n=$.parseJSON(n),r=0;r<i.Programs().length;r++)if(i.Programs()[r].Code()==t.programCode&&(i.Programs()[r].RetrievedNotices(!0),n.length>0)){for(i.Programs()[r].HasNotices(!0),u=0;u<n.length;u++)i.Programs()[r].Notices.push(n[u]);i.Programs()[r].OpenNoticeDialog()}},error:function(){$("#notificationHost").notificationCenter("addNotification",{message:"Unable to get notices for: "+program.Code(),type:"error"});i.isLoading(!1)},complete:function(){}})};this.whatIfViewProgramButton={id:"whatifviewprogrambutton",title:Ellucian.Programs.Resources.ViewProgramButtonText,isPrimary:!0,enabled:i.enableViewProgramButton,callback:i.Evaluate};this.whatIfCancelButton={id:"whatifcancelbutton",title:Ellucian.Programs.Resources.UiCancelButtonText,isPrimary:!1,callback:i.CancelWhatIfDialog}}function courseDetailsViewModel(){var n=this;this.FullTitle=ko.observable();this.Description=ko.observable();this.TermsOffered=ko.observable();this.YearsOffered=ko.observable();this.CreditsStatic=ko.observable();this.CreditsVariableIncrements=ko.observableArray();this.IsFreeFormCredits=ko.observable(!1);this.IsStaticCredits=ko.observable(!1);this.IsDropDownCredits=ko.observable(!1);this.FreeFormCreditsValue=ko.observable();this.CreditsLabel=ko.observable();this.AllowAdding=ko.observable();this.Locations=ko.observableArray();this.AddTerms=ko.observableArray();this.AllowUpdating=ko.observable();this.Requisites=ko.observableArray();this.LocationCycleRestrictionDescriptions=ko.observableArray();this.SelectedTerm=ko.observable(null);this.isCoursePlaceholder=ko.observable(!1);this.dialogTitle=ko.observable();this.showLocationCycleRestrictionDescriptions=ko.observable(!1);this.showTermsOffered=ko.computed(function(){return!this.showLocationCycleRestrictionDescriptions()&&!isNullOrEmpty(this.TermsOffered())},this);this.showYearsOffered=ko.computed(function(){return!this.showLocationCycleRestrictionDescriptions()&&!isNullOrEmpty(this.YearsOffered())},this);this.isLoading=ko.observable(!0);this.courseIsVisible=ko.observable(!1);this.disableCourseAddButton=ko.pureComputed(function(){return!n.SelectedTerm()});this.courseDetailsAddButton={id:"coursedetails-add",title:Ellucian.Course.SectionCourseCommonDetails.CourseAddButtonLabel,isPrimary:!0,visible:n.AllowAdding,disabled:n.disableCourseAddButton,callback:addCourseDetails};this.courseDetailsUpdateButton={id:"coursedetails-update",title:Ellucian.Course.SectionCourseCommonDetails.CourseUpdateButtonLabel,visible:n.AllowUpdating,isPrimary:!0,callback:updateCourseDetails};this.closeCourseDetailsButton={id:"coursedetails-close",title:Ellucian.Course.SectionCourseCommonDetails.CloseButton,aria:Ellucian.Course.SectionCourseCommonDetails.CourseCloseTitle,isPrimary:!1,callback:closeCourseDetails};this.showCatalogSearchButton=!1;this.searchCatalogForPlaceholder=function(){return null}}function sectionDetailsViewModel(){var n=this;this.gradingSelected=ko.observable();this.FullTitle=ko.observable();this.Description=ko.observable();this.CreditsStatic=ko.observable();this.CreditsVariableIncrements=ko.observableArray();this.IsFreeFormCredits=ko.observable(!1);this.IsStaticCredits=ko.observable(!1);this.IsDropDownCredits=ko.observable(!1);this.FreeFormCreditsValue=ko.observable();this.GradingOptions=ko.observableArray();this.IsStaticGrading=ko.observable(!1);this.GradingStatic=ko.observable();this.GradingOptionsMatch=ko.observable(!0);this.CreditsLabel=ko.observable();this.Corequisites=ko.observableArray();this.Requisites=ko.observableArray();this.TimeLocations=ko.observableArray();this.Dates=ko.observable();this.Instructors=ko.observableArray();this.InstructorOfficeHours=ko.observableArray();this.BookList=ko.observableArray();this.ShowBookList=ko.observable();this.BooksTotal=ko.observable();this.BookstoreUrl=ko.observable();this.AllowAdding=ko.observable();this.TermDisplay=ko.observable();this.Capacity=ko.observable();this.Available=ko.observable();this.Enrolled=ko.observable();this.WaitlistAvailable=ko.observable(!1);this.Waitlisted=ko.observable();this.TopicCodeDescription=ko.observable();this.SectionDetailShowSpecialIcon=ko.observable();this.SectionDetailShowSpecialIcon2=ko.observable();this.SectionDetailShowSpecialIcon3=ko.observable();this.SectionDetailShowSpecialIcon4=ko.observable();this.SectionDetailShowSpecialIcon5=ko.observable();this.InstantEnrollment=ko.observable(!1);this.gradingStaticValue=ko.pureComputed(function(){return n.IsStaticGrading()?n.GradingStatic():n.GradingOptions()&&n.GradingOptions().length===1&&n.GradingOptions()[0]!==undefined&&n.GradingOptions()[0].Description!==undefined?n.GradingOptions()[0].Description:""}).extend({deferred:!0});this.Charges=ko.observableArray();this.HasCharges=ko.computed(function(){return n.Charges()!==null&&n.Charges().length>0});this.HasRuleBasedCharges=ko.observable(!1);this.ShowNegativeSeatCounts=ko.observable(!1);this.SeatlistAvailable=ko.observable();this.AvailabilityTooltip=ko.observable();this.AvailabilityDisplay=ko.observable();this.SeatlistString=ko.pureComputed(function(){return Ellucian.Course.SectionCourseCommonDetails.SeatlistFormatString.format(n.SeatlistAvailable(),n.Capacity())});this.IsUnlimitedSeating=ko.computed(function(){return n.Available()===null||n.Capacity()===null});this.Comments=ko.observable();this.TransferStatusDescription=ko.observable();this.canSkipWaitlist=ko.observable(!1);this.isLoading=ko.observable(!1);this.sectionIsVisible=ko.observable(!1);this.addSectionDetailsButton={id:"addSectionDetailsButton",title:Ellucian.Course.SectionCourseCommonDetails.SectionAddButtonLabel,isPrimary:!0,visible:n.AllowAdding,callback:addSectionDetails};this.closeSectionDetailsButton={id:"closeSectionDetailsButton",title:Ellucian.Course.SectionCourseCommonDetails.CloseButton,aria:Ellucian.Course.SectionCourseCommonDetails.SectionCloseTitle,isPrimary:!1,callback:closeSectionDetails};this.ShowInstantEnrollmentBookstoreLink=ko.observable(!1);this.showBookstoreLink=ko.computed(function(){return n.InstantEnrollment()!==!0?n.BookstoreUrl():n.BookstoreUrl()&&n.ShowInstantEnrollmentBookstoreLink()===!0});this.showSectionBooksTotal=ko.computed(function(){return n.InstantEnrollment()!==!0?!n.BookstoreUrl():!n.BookstoreUrl()||n.ShowInstantEnrollmentBookstoreLink()===!1})}var Ellucian=Ellucian||{},OfficeHoursRepository,curriculumTracksMapping,planMapping,BaseViewModel,loadSamplePlanInstance,programRequirementsSubscriberModelInstance,requirementMapping,cvm,svm;Ellucian.Student=Ellucian.Student||{};Ellucian.Student.OfficeHours=Ellucian.Student.OfficeHours||{};Ellucian.Student.OfficeHours.OfficeHoursRepository=function(){return{getOfficeHours:function(n){return new Promise(function(t,i){$.ajax({url:Ellucian.Student.Faculty.ActionUrls.facultyOfficeHoursAsync+"?facultyId="+n,type:"GET",contentType:jsonContentType,dataType:"json"}).done(function(n){account.handleInvalidSessionResponse(n)||t(n);i(Ellucian.Faculty.Resources.UnableToRetrieveFacultyOfficeHours)}).fail(function(){i(Ellucian.Faculty.Resources.UnableToRetrieveFacultyOfficeHours)}).always(function(){})})},getOfficeHoursAddData:function(){return new Promise(function(n,t){$.ajax({url:Ellucian.Student.OfficeHours.ActionUrls.OfficeHoursAddDataAsync,type:"GET",contentType:jsonContentType,dataType:"json"}).done(function(i){account.handleInvalidSessionResponse(i)||n(i);t(Ellucian.Faculty.Resources.UnableToRetrieveOfficeHoursAddData)}).fail(function(){t(Ellucian.Faculty.Resources.UnableToRetrieveOfficeHoursAddData)}).always(function(){})})}}}();Ellucian=Ellucian||{};Ellucian.Student=Ellucian.Student||{};Ellucian.Student.Faculty=Ellucian.Student.Faculty||{};OfficeHoursRepository=Ellucian.Student.OfficeHours.OfficeHoursRepository;Ellucian.Student.Faculty.OfficeHoursViewModel=function(){function t(n){if(n===null||n.length===0)return!1;var t=moment(n).format("L");return t===null?!1:!0}function i(n,t,i,r,u,f,e,o){return n<i&&i<t&&(f==u||f!=u&&((e=="W"||e=="BM"||e=="M"||e=="BW")&&(o=="C"||o=="D")||e=="C"||e=="D"))?!0:n<=r&&r<t&&(f==u||f!=u&&((e=="W"||e=="BM"||e=="M"||e=="BW")&&(o=="C"||o=="D")||e=="C"||e=="D"))?!0:i<=n&&t<=r&&(f==u||f!=u&&((e=="W"||e=="BM"||e=="M"||e=="BW")&&(o=="C"||o=="D")||e=="C"||e=="D"))?!0:!1}var n=this;this.officeHoursIsVisible=ko.observable(!1);this.isLoading=ko.observable(!1);this.isAdding=ko.observable(!1);this.isUpdating=ko.observable(!1);this.isDeleting=ko.observable(!1);this.officeHours=ko.observableArray();this.isLoadingAddData=ko.observable(!1);this.Buildings=ko.observableArray([]);this.filteredBuildings=ko.observableArray([]);this.SelectedBuilding=ko.observable("");this.Rooms=ko.observableArray([]);this.filteredRooms=ko.observableArray([]);this.SelectedRoomId=ko.observable("");this.isRoomsDisabled=ko.observable(!0);this.DaysOfWeek=ko.observableArray([]);this.Frequency=ko.observableArray([]);this.SelectedFrequency=ko.observable();this.EnableCancelButton=ko.observable(!0);this.EnableSaveButton=ko.observable(!1);this.isCancelButtonTriggered=ko.observable(!1);this.confirmOfficeHoursDeleteDialogOpen=ko.observable(!1);this.userSearchErrorOccurred=ko.observable(!1);this.searchString=ko.observable("");this.isBuildingSearchVisible=ko.observable(!1);this.isRoomError=ko.observable(!1);this.StartDate=ko.observable(null);this.EndDate=ko.observable(null);this.startsAtTime=ko.observable();this.endsByTime=ko.observable();this.editingOfficeHoursId=ko.observable();this.isEditing=ko.observable(!1);this.StartDateErrorMessage=ko.observable(!1);n.ShowStartDateErrorMessage=ko.pureComputed({read:function(){return n.StartDateErrorMessage()},write:function(t){n.StartDateErrorMessage(t)},owner:n});n.StartDateValueEntry=ko.pureComputed({read:function(){return n.StartDate()},write:function(t){n.StartDate(t);this.checkStartDateValidity(t)},owner:n});this.EndDateErrorMessage=ko.observable(!1);n.ShowEndDateErrorMessage=ko.pureComputed({read:function(){return n.EndDateErrorMessage()},write:function(t){n.EndDateErrorMessage(t)},owner:n});n.EndDateValueEntry=ko.pureComputed({read:function(){return n.EndDate()},write:function(t){n.EndDate(t);this.checkEndDateValidity(t)},owner:n});this.isEndDateValid=ko.observable(!0);this.checkEndDateValidity=function(i){var r="end-date",u=i;if($("#"+r).parent().prev().removeClass("esg-form__label"),u==""||u==null||u==undefined){$("#"+r).closest(".esg-grid-overlay").removeClass("esg-has-error");$("#"+r).parent().parent().parent().next().addClass("hide-content");$("#end-date-greater-error").addClass("hide-content");n.isEndDateValid(!0);return}var e=moment(n.StartDate()).format("L"),f=moment(u).format("L"),o=moment(new Date).format("L");if($("#end-date-greater-error").addClass("hide-content"),$("#end-date-past-error").addClass("hide-content"),new Date(e)>new Date(f)){this.ShowEndDateError();n.isEndDateValid(!1);return}if(new Date(f)<new Date(o)){n.isEndDateValid(!1);r="end-date";$("#end-date-past-error").removeClass("hide-content");$("#"+r).parent().parent().parent().next().removeClass("hide-content");$("#"+r).parent().next().removeClass("hide-content");$("#"+r).closest(".esg-grid-overlay").addClass("esg-has-error");return}if(this.HideEndDateError(),this.HideStartDateError(),t(u))$("#"+r).closest(".esg-grid-overlay").removeClass("esg-has-error"),$("#"+r).parent().parent().parent().next().addClass("hide-content");else{$("#"+r).parent().parent().parent().next().addClass("hide-content");$("#"+r).parent().next().removeClass("hide-content");$("#"+r).closest(".esg-grid-overlay").addClass("esg-has-error");n.isEndDateValid(!1);return}n.isEndDateValid(!0)};this.ValidateEndDate=function(i,r,u){if(new Date(i)>new Date(r)){n.isEndDateValid(!1);return}if(new Date(r)<new Date(u)){n.isEndDateValid(!1);return}if(!t(r)){n.isEndDateValid(!1);return}n.isEndDateValid(!0)};this.ShowStartDateError=function(){var n="start-date";$("#start-date-greater-error").removeClass("hide-content");$("#"+n).parent().parent().parent().next().removeClass("hide-content");$("#"+n).parent().next().removeClass("hide-content");$("#"+n).closest(".esg-grid-overlay").addClass("esg-has-error")};this.HideStartDateError=function(){var n="start-date";$("#start-date-greater-error").addClass("hide-content");$("#"+n).parent().parent().parent().next().addClass("hide-content");$("#"+n).parent().next().addClass("hide-content");$("#"+n).closest(".esg-grid-overlay").removeClass("esg-has-error")};this.ShowEndDateError=function(){var n="end-date";$("#end-date-greater-error").removeClass("hide-content");$("#"+n).parent().parent().parent().next().removeClass("hide-content");$("#"+n).parent().next().removeClass("hide-content");$("#"+n).closest(".esg-grid-overlay").addClass("esg-has-error")};this.HideEndDateError=function(){var n="end-date";$("#end-date-greater-error").addClass("hide-content");$("#end-date-past-error").addClass("hide-content");$("#"+n).parent().parent().parent().next().addClass("hide-content");$("#"+n).parent().next().addClass("hide-content");$("#"+n).closest(".esg-grid-overlay").removeClass("esg-has-error")};this.checkStartDateValidity=function(i){var r="start-date",u=i,f,e;if(!n.isCancelButtonTriggered()){if($("#"+r).parent().prev().removeClass("esg-form__label"),u==""||u==null||u==undefined){$("#"+r+".esg-form__feedback-text").length==0||$("#"+r+".esg-form__feedback-text").hasClass("hide-content")?($("#"+r).parent().next().addClass("hide-content"),$("#"+r).parent().parent().parent().next().removeClass("hide-content"),$("#"+r).closest(".esg-grid-overlay").addClass("esg-has-error"),this.HideStartDateError()):($("#"+r).parent().parent().parent().next().addClass("hide-content"),$("#"+r).closest(".esg-grid-overlay").removeClass("esg-has-error"));n.EnableSaveButton(!1);$("#start-date-greater-error").addClass("hide-content");return}if(f=moment(u).format("L"),e=moment(n.EndDate()).format("L"),new Date(f)>new Date(e)){this.ShowStartDateError();n.EnableSaveButton(!1);return}if(this.HideEndDateError(),this.HideStartDateError(),t(u))$("#"+r).closest(".esg-grid-overlay").removeClass("esg-has-error"),$("#"+r).parent().parent().parent().next().addClass("hide-content");else{$("#"+r).parent().parent().parent().next().addClass("hide-content");$("#"+r).parent().next().removeClass("hide-content");$("#"+r).closest(".esg-grid-overlay").addClass("esg-has-error");n.EnableSaveButton(!1);return}n.EnableSaveButton(!0)}};this.startsAtTime.ErrorMessage=ko.observable("");this.startsAtTime.isValid=ko.computed(function(){if(n.startsAtTime.ErrorMessage(""),!isNullOrEmpty(n.startsAtTime())&&n.startsAtTime()!="undefined"){var t=checkValidTimeFormat(n.startsAtTime());return t===null?(n.startsAtTime.ErrorMessage(Ellucian.Student.OfficeHours.Resources.InvalidTimeFormatErrorMessage),n.EnableSaveButton(!1),!1):(n.startsAtTime(t),n.EnableSaveButton(!0),!0)}return n.EnableSaveButton(!0),!0});this.endsByTime.ErrorMessage=ko.observable("");this.endsByTime.isValid=ko.computed(function(){if(n.endsByTime.ErrorMessage(""),!isNullOrEmpty(n.endsByTime())&&n.endsByTime()!="undefined"){var t=checkValidTimeFormat(n.endsByTime());return t===null?(n.endsByTime.ErrorMessage(Ellucian.Student.OfficeHours.Resources.InvalidTimeFormatErrorMessage),n.EnableSaveButton(!1),!1):(n.endsByTime(t),n.EnableSaveButton(!0),!0)}return n.EnableSaveButton(!0),!0});n.showOfficeHours=function(t){return n.officeHoursIsVisible(!0),n.isLoading(!0),n.officeHours(),OfficeHoursRepository.getOfficeHours(t.facultyId).then(function(t){n.officeHours(t);n.isLoading(!1)}).catch(function(t){n.isLoading(!1);$("#notificationHost").notificationCenter("addNotification",{message:t,type:"error"})}).then(function(){$("#office-hours-list").makeTableResponsive()})};n.GetOfficeHoursAddData=function(){return n.isLoadingAddData(!0),OfficeHoursRepository.getOfficeHoursAddData().then(function(t){n.Buildings(t.Buildings);n.Rooms(t.Rooms);n.DaysOfWeek(t.DaysOfWeek);n.Frequency(t.Frequencies);n.isLoadingAddData(!1)}).catch(function(n){$("#notificationHost").notificationCenter("addNotification",{message:n,type:"error"})}).then(function(){n.isLoadingAddData(!1)})};n.searchBuilding=function(){n.isBuildingSearchVisible(!1);n.filteredBuildings=n.searchString().length==0?n.Buildings():n.filterBuildings();n.isBuildingSearchVisible(!0)};n.filterBuildings=function(){return ko.utils.arrayFilter(n.Buildings(),function(t){return n.searchString().length==0||t.Text.toLowerCase().indexOf(n.searchString().toLowerCase())>-1})};n.buildingSearchHasValue=ko.computed(function(){return n.searchString()&&n.searchString().length>0});n.clearBuildingSearch=function(){n.searchString("");n.filteredRooms([]);n.isRoomsDisabled(!0);n.isBuildingSearchVisible(!1);n.SelectedBuilding("");n.SelectedRoomId("")};n.loadRooms=function(t){n.isRoomsDisabled(!0);t!=null&&(n.filteredRooms(n.filterRooms(t.Value)),n.filteredRooms().length>0&&n.isRoomsDisabled(!1),n.isBuildingSearchVisible(!1),n.searchString(t.Text),n.SelectedBuilding(t))};n.filterRooms=function(t){return ko.utils.arrayFilter(n.Rooms(),function(n){return t==null||n.BuildingCode==t})};n.CancelAddOfficeHours=function(){n.clearAddOfficeHoursData()};this.resetDaysOfWeek=function(){var i=n.DaysOfWeek(),t;for(n.DaysOfWeek([]),t=0;t<i.length;t++)i[t].Selected=!1;n.DaysOfWeek(i)};n.SubmitOfficeHours=function(){this.ValidateOfficeHours()&&(n.isEditing()===!0?this.Update():this.Save())};this.getSelectedDaysOfWeek=function(){for(var i="",r=n.DaysOfWeek(),t=0;t<r.length;t++)r[t].Selected&&(i===""?i=r[t].Value:i+=","+r[t].Value);return i};this.ValidateOfficeHours=function(){var s="",e,u,f,o,r,t;if(n.StartDate()!==null&&n.StartDate()!==""&&(u=moment(n.StartDate()).format("L"),s=u),e="",n.EndDate()!==null&&n.EndDate()!==""&&(f=moment(n.EndDate()).format("L"),e=f),$("#date-picker-input-2").val()&&(u=moment($("#date-picker-input-2").val()),!u.isValid())){$("#notificationHost").notificationCenter("addNotification",{message:Ellucian.Student.OfficeHours.Resources.StartDateValidationMessage,type:"error",flash:!1});return}if($("#date-picker-input-3").val()&&(f=moment($("#date-picker-input-3").val()),!f.isValid())){$("#notificationHost").notificationCenter("addNotification",{message:Ellucian.Student.OfficeHours.Resources.EndDateValidationMessage,type:"error",flash:!1});return}if(n.EndDate()!==null&&n.EndDate()!=="")for(o=n.officeHours().OfficeHoursDetails,r=0;r<o.length;r++)if(t=o[r],n.isEditing()!==!0||n.editingOfficeHoursId()!==t.Id){var c=s,l=e,a=moment(t.OfficeStartDate).format("L"),h=t.OfficeEndDate!=null?moment(t.OfficeEndDate).format("L"):null;if(h!=null&&new Date(c)<new Date(h)&&new Date(l)>new Date(a)&&n.startsAtTime()!==undefined&&n.endsByTime()!==undefined){var v=moment(n.startsAtTime(),"HH:mm A"),y=moment(n.endsByTime(),"HH:mm A"),p=moment(t.OfficeStartTime,"HH:mm A"),w=moment(t.OfficeEndTime,"HH:mm A"),b=n.getSelectedDaysOfWeek(),k=t.DaysOfWeekCodes,d=n.SelectedFrequency(),g=t.FrequencyCode;if(i(p,w,v,y,k,b,g,d))return $("#notificationHost").notificationCenter("addNotification",{message:Ellucian.Student.OfficeHours.Resources.TimeConflictErrorMessage.format(r+1),type:"error",flash:!1}),!1}}return!0};this.Save=function(){var r,t,u,i,f,e;if(n.isAdding(!0),r=this.getSelectedDaysOfWeek(),n.SelectedBuilding()!==undefined&&n.SelectedBuilding()!==""&&n.SelectedRoomId()===undefined||n.SelectedRoomId()===""){n.isRoomError(!0);n.isAdding(!1);return}t="";n.StartDate()!==null&&n.StartDate()!==""&&(u=moment(n.StartDate()).format("L"),t=u);i="";n.EndDate()!==null&&n.EndDate()!==""&&(f=moment(n.EndDate()).format("L"),i=f);e={StartDateString:t,EndDateString:i,StartTime:n.startsAtTime(),EndTime:n.endsByTime(),SelectedBuilding:n.SelectedBuilding(),SelectedRoom:n.SelectedRoomId(),SelectedDaysOfWeek:r,SelectedFrequency:n.SelectedFrequency()};$.ajax({url:Ellucian.Student.OfficeHours.ActionUrls.AddOfficeHourAsync,type:"POST",data:JSON.stringify(e),contentType:jsonContentType,dataType:"json",beforeSend:function(){},success:function(t){account.handleInvalidSessionResponse(t)||($("#notificationHost").notificationCenter("addNotification",{message:Ellucian.Student.OfficeHours.Resources.SuccessToAddOfficeHoursNotification,type:"success",flash:!1}),n.clearAddOfficeHoursData(),n.showOfficeHours({facultyId:currentUserId}))},error:function(n){n.status!=0&&$("#notificationHost").notificationCenter("addNotification",{message:Ellucian.Student.OfficeHours.Resources.FailedToAddOfficeHours,type:"error",flash:!1})},complete:function(){n.isAdding(!1)}})};this.Update=function(){var u,i,f,r,e,t,o;if(n.isUpdating(!0),u=this.getSelectedDaysOfWeek(),n.SelectedBuilding()!==undefined&&n.SelectedBuilding()!==""&&n.SelectedRoomId()===undefined||n.SelectedRoomId()===""){n.isRoomError(!0);n.isUpdating(!1);return}i="";n.StartDate()!==null&&n.StartDate()!==""&&(f=moment(n.StartDate()).format("L"),i=f);r="";n.EndDate()!==null&&n.EndDate()!==""&&(e=moment(n.EndDate()).format("L"),r=e);t=n.EditingData();o={OldStartDate:t.OfficeStartDate,OldEndDate:t.OfficeEndDate,OldStartTime:t.OfficeStartTime,OldEndTime:t.OfficeEndTime,OldDaysOfWeek:t.DaysOfWeekCodes,OldRoom:t.RoomNumber,OldFrequency:t.FrequencyCode,OldBuilding:t.BuildingCode,StartDateString:i,EndDateString:r,StartTime:n.startsAtTime(),EndTime:n.endsByTime(),SelectedBuilding:n.SelectedBuilding(),SelectedRoom:n.SelectedRoomId(),SelectedDaysOfWeek:u,SelectedFrequency:n.SelectedFrequency()};$.ajax({url:Ellucian.Student.OfficeHours.ActionUrls.UpdateOfficeHourAsync,type:"POST",data:JSON.stringify(o),contentType:jsonContentType,dataType:"json",beforeSend:function(){},success:function(t){account.handleInvalidSessionResponse(t)||($("#notificationHost").notificationCenter("addNotification",{message:Ellucian.Student.OfficeHours.Resources.SuccessToUpdateOfficeHours,type:"success",flash:!1}),n.clearAddOfficeHoursData(),n.isEditing(!1),n.showOfficeHours({facultyId:currentUserId}))},error:function(n){n.status!=0&&$("#notificationHost").notificationCenter("addNotification",{message:Ellucian.Student.OfficeHours.Resources.FailedToUpdateOfficeHours,type:"error",flash:!1})},complete:function(){n.isUpdating(!1)}})};n.CanEnableSaveButton=ko.pureComputed(function(){if(n.StartDateValueEntry()===undefined||n.StartDateValueEntry()===null||n.StartDateValueEntry()==="")return!1;if(n.EndDate()!=undefined&&n.EndDate()!==null&&n.EndDate()!==""){var t=moment(n.StartDate()).format("L"),i=moment(n.EndDate()).format("L"),r=moment(new Date).format("L");n.ValidateEndDate(t,i,r)}return n.isEndDateValid()!==!0||n.startsAtTime.isValid()!==!0||n.endsByTime.isValid()!==!0||n.isDaysOfWeekValid()!==!0?!1:!isNullOrEmpty(n.startsAtTime())&&n.startsAtTime()!="undefined"&&(isNullOrEmpty(n.endsByTime())||n.endsByTime()===undefined)?!1:!isNullOrEmpty(n.endsByTime())&&n.endsByTime()!="undefined"&&(isNullOrEmpty(n.startsAtTime())||n.startsAtTime()===undefined)?!1:!0});n.isDaysOfWeekValid=ko.observable(!1);n.selectedDaysOfWeek=function(t,i){for(var f,r=n.DaysOfWeek(),u=0;u<r.length;u++)if(r[u].Value===t.Value){r[u].Selected=i!=undefined&&i.currentTarget.checked?!0:!1;break}f=ko.utils.arrayFilter(r,function(n){return n.Selected===!0});f!=undefined&&f.length>0?(n.EnableSaveButton(!0),n.isDaysOfWeekValid(!0)):(n.EnableSaveButton(!1),n.isDaysOfWeekValid(!1))};this.clearAddOfficeHoursData=function(){n.isCancelButtonTriggered(!0);n.StartDateValueEntry("");n.EndDateValueEntry("");n.startsAtTime("");n.endsByTime("");n.searchString("");n.filteredRooms([]);n.SelectedRoomId("");n.SelectedBuilding("");n.SelectedRoomId("");n.isRoomError(!1);n.isRoomsDisabled(!0);n.isCancelButtonTriggered(!1);n.SelectedFrequency(n.Frequency()[0].Value);n.resetDaysOfWeek();n.clearBuildingSearch();n.isEditing(!1);var t="start-date";$("#"+t).find(".esg-has-feedback").removeClass("esg-has-error");$("#"+t).find(".esg-form__feedback-text").addClass("hide-content");this.HideEndDateError();this.HideStartDateError()};n.ShowStartTimeRequired=ko.pureComputed(function(){return n.endsByTime()&&n.endsByTime.isValid()&&!n.startsAtTime()?!0:!1});n.ShowEndTimeRequired=ko.pureComputed(function(){return n.startsAtTime()&&n.startsAtTime.isValid()&&!n.endsByTime()?!0:!1});this.EditingData=ko.observable();this.EditOfficeHours=function(t){var e,r,i;n.clearAddOfficeHoursData();this.EditingData(t);var o=moment(t.OfficeStartDate).format("L"),s=moment(o).format("L"),u=moment(s);u.isValid()&&(n.StartDate(u.toDate()),n.StartDateValueEntry(u.toDate()));var h=moment(t.OfficeEndDate).format("L"),c=moment(h).format("L"),f=moment(c);if(f.isValid()&&n.EndDate(f.toDate()),n.startsAtTime(t.OfficeStartTime),n.endsByTime(t.OfficeEndTime),n.editingOfficeHoursId(t.Id),n.isRoomsDisabled(!0),t.BuildingCode!==null&&t.BuildingCode!==""&&(n.filteredRooms(n.filterRooms(t.BuildingCode)),n.filteredRooms().length>0&&n.isRoomsDisabled(!1),n.searchString(t.BuildingDesription),e={Disabled:!1,Group:null,Selected:!0,Text:t.BuildingDesription,Value:t.BuildingCode},n.SelectedBuilding(e),n.SelectedRoomId(t.RoomNumber)),t.DaysOfWeekFullText!==null&&t.DaysOfWeekFullText!==""){for(r=n.DaysOfWeek(),i=0;i<r.length;i++)t.DaysOfWeekFullText.toLowerCase().indexOf(r[i].Text.toLowerCase())>=0?(r[i].Selected=!0,$("#"+r[i].Value+"-checkbox").prop("checked",!0)):(r[i].Selected=!1,$("#"+r[i].Value+"-checkbox").prop("checked",!1));n.EnableSaveButton(!0);n.isDaysOfWeekValid(!0)}else n.EnableSaveButton(!1),n.isDaysOfWeekValid(!1);t.FrequencyCode!==null&&t.FrequencyCode!==""&&n.SelectedFrequency(t.FrequencyCode);n.isEditing(!0)};this.DeletingData=ko.observable();this.DeleteOfficeHours=function(n){this.DeletingData(n);this.confirmOfficeHoursDeleteDialogOpen(!0)};this.deleteOfficeHoursData=function(){n.isDeleting(!0);n.confirmOfficeHoursDeleteDialogOpen(!1);var t={StartDateString:n.DeletingData().OfficeStartDate,EndDateString:n.DeletingData().OfficeEndDate,StartTime:n.DeletingData().OfficeStartTime,EndTime:n.DeletingData().OfficeEndTime,SelectedBuilding:n.DeletingData().BuildingCode,SelectedRoom:n.DeletingData().RoomNumber,SelectedDaysOfWeek:n.DeletingData().DaysOfWeekCodes,SelectedFrequency:n.DeletingData().FrequencyCode};$.ajax({url:Ellucian.Student.OfficeHours.ActionUrls.DeleteOfficeHourAsync,type:"POST",data:JSON.stringify(t),contentType:jsonContentType,dataType:"json",beforeSend:function(){},success:function(t){account.handleInvalidSessionResponse(t)||($("#notificationHost").notificationCenter("addNotification",{message:Ellucian.Student.OfficeHours.Resources.SuccessToDeleteOfficeHoursNotification,type:"success",flash:!1}),n.showOfficeHours({facultyId:currentUserId}),n.clearAddOfficeHoursData())},error:function(n){n.status!=0&&$("#notificationHost").notificationCenter("addNotification",{message:Ellucian.Student.OfficeHours.Resources.FailedToDeleteOfficeHours,type:"error",flash:!1})},complete:function(){n.isDeleting(!1)}})};this.continueDeleteOfficeHoursButton={id:"confirm-officehours-delete-dialog",title:Ellucian.Student.OfficeHours.Resources.OKButtonLabel,isPrimary:!0,callback:n.deleteOfficeHoursData}};Ellucian=Ellucian||{};Ellucian.Student=Ellucian.Student||{};Ellucian.Student.planRepository=function(){var i="degreeplan",f="studentprograms",t=Ellucian.Storage.session,n="",r=function(i,r){return((typeof r=="undefined"||r===null)&&(r=!0),!account.handleInvalidSessionResponse(i))?(!r||t.setItem(n,i),Promise.resolve(i)):Promise.reject(Ellucian.Student.planRepositoryMessages.updateFailed)},e=function(n){return account.handleInvalidSessionResponse(n)?Promise.reject(Ellucian.Student.planRepositoryMessages.updateFailed):Promise.resolve(n)},o=function(n){return account.handleInvalidSessionResponse(n)?Promise.reject(Ellucian.Student.planRepositoryMessages.updateFailed):Promise.resolve(n)},u=function(i){return t.removeItem(n),i.status==409?{isStale:!0,message:Ellucian.Student.planRepositoryMessages.staleData}:{isStale:!1,message:Ellucian.Student.planRepositoryMessages.updateFailed}},s=function(n){return n.status==409?{isStale:!0,message:Ellucian.Student.planRepositoryMessages.staleData}:{isStale:!1,message:Ellucian.Student.planRepositoryMessages.updateFailed}},h=function(n){return n.status==409?{isStale:!0,message:Ellucian.Student.planRepositoryMessages.staleData}:{isStale:!1,message:Ellucian.Student.planRepositoryMessages.updateFailed}},c=function(n){return account.handleInvalidSessionResponse(n)?Promise.reject(Ellucian.Student.planRepositoryMessages.updateFailed):Promise.resolve(n)},l=function(n){return n.status==409?{isStale:!0,message:Ellucian.Student.planRepositoryMessages.staleData}:{isStale:!1,message:Ellucian.Student.planRepositoryMessages.updateFailed}};return{get:function(n){if(!n||n.length===0)return Promise.reject(Ellucian.Student.planRepositoryMessages.studentIdRequired);var r=i+n,u=f+n,e=t.getItem(r),o=t.getItem(u);return e!==null&&o!==null?Promise.resolve([e,o]):new Promise(function(i,f){$.ajax({url:Ellucian.Student.planRepositoryUrls.get+"?studentId="+n,type:"GET",contentType:jsonContentType,dataType:"json"}).done(function(n){account.handleInvalidSessionResponse(n)||(t.setItem(r,n.DegreePlan),t.setItem(u,n.StudentPrograms),i([n.DegreePlan,n.StudentPrograms]));f(Ellucian.Student.planRepositoryMessages.getFailed)}).fail(function(){f(Ellucian.Student.planRepositoryMessages.getFailed)}).always(function(){})})},register:function(r,f){if(!r||r.length===0)return Promise.reject(Ellucian.Student.planRepositoryMessages.studentIdRequired);if(!f||typeof f instanceof Array)return Promise.reject(Ellucian.Student.planRepositoryMessages.argumentError);n=i+r;t.removeItem(n);var o={sectionRegistrations:f,studentId:r},e;return e=moment(),new Promise(function(n,t){$.ajax({url:Ellucian.Student.planRepositoryUrls.registerSections,data:JSON.stringify(o),type:"POST",contentType:jsonContentType,dataType:"json"}).done(function(i){if(!account.handleInvalidSessionResponse(i)){var r=moment(),u=r-e;allTrackUserTiming("Registration","SectionRegistration",u);n(i)}t(Ellucian.Student.planRepositoryMessages.updateFailed)}).fail(function(n){t(u(n))}).always(function(){})})},completeRegistration:function(u,f){if(!u||u.length===0)return Promise.reject(Ellucian.Student.planRepositoryMessages.studentIdRequired);n=i+u;t.removeItem(n);var e={studentId:u,notifications:f};return new Promise(function(n,t){$.ajax({url:Ellucian.Student.planRepositoryUrls.completeRegistration,data:JSON.stringify(e),type:"POST",contentType:jsonContentType,dataType:"json"}).done(function(t){n(r(t))}).fail(function(){t(Ellucian.Student.planRepositoryMessages.updateFailed)}).always(function(){})})},addTerm:function(f,e,o){if(!f||f.length===0)return Promise.reject(Ellucian.Student.planRepositoryMessages.studentIdRequired);if(!e||!o)return Promise.reject(Ellucian.Student.planRepositoryMessages.argumentError);n=i+f;t.removeItem(n);var s={addTermId:e,degreePlanJson:o};return new Promise(function(n,t){$.ajax({url:Ellucian.Student.planRepositoryUrls.addTerm,data:JSON.stringify(s),type:"POST",contentType:jsonContentType,dataType:"json"}).done(function(t){n(r(t))}).fail(function(n){t(u(n))}).always(function(){})})},removeTerm:function(f,e,o){if(!f||f.length===0)return Promise.reject(Ellucian.Student.planRepositoryMessages.studentIdRequired);if(!e||!o)return Promise.reject(Ellucian.Student.planRepositoryMessages.argumentError);n=i+f;t.removeItem(n);var s={removeTermId:e,degreePlanJson:o};return new Promise(function(n,t){$.ajax({url:Ellucian.Student.planRepositoryUrls.removeTerm,data:JSON.stringify(s),type:"POST",contentType:jsonContentType,dataType:"json"}).done(function(t){n(r(t))}).fail(function(n){t(u(n))}).always(function(){})})},addCourse:function(f,e,o,s,h){if(!f||f.length===0)return Promise.reject(Ellucian.Student.planRepositoryMessages.studentIdRequired);if(!e||!o||!s||!h)return Promise.reject(Ellucian.Student.planRepositoryMessages.argumentError);n=i+f;t.removeItem(n);var c={courseId:e,termId:o,credits:s,degreePlanJson:h};return new Promise(function(n,t){$.ajax({url:Ellucian.Student.planRepositoryUrls.addCourse,data:JSON.stringify(c),type:"POST",contentType:jsonContentType,dataType:"json"}).done(function(t){n(r(t))}).fail(function(n){t(u(n))}).always(function(){})})},updateCourse:function(f,e,o,s,h){if(!f||f.length===0)return Promise.reject(Ellucian.Student.planRepositoryMessages.studentIdRequired);if(!e||!o||!s||!h)return Promise.reject(Ellucian.Student.planRepositoryMessages.argumentError);n=i+f;t.removeItem(n);var c={courseId:e,oldTerm:o,newTerm:s,degreePlanJson:h};return new Promise(function(n,t){$.ajax({url:Ellucian.Student.planRepositoryUrls.updateCourse,data:JSON.stringify(c),type:"POST",contentType:jsonContentType,dataType:"json"}).done(function(t){n(r(t))}).fail(function(n){t(u(n))}).always(function(){})})},removeCourse:function(f,e,o,s,h){if(!f||f.length===0)return Promise.reject(Ellucian.Student.planRepositoryMessages.studentIdRequired);if(!e||!o||!h)return Promise.reject(Ellucian.Student.planRepositoryMessages.argumentError);n=i+f;t.removeItem(n);var c={removeCourseId:e,removeCourseTermId:o,removeCourseSectionId:s,degreePlanJson:h};return new Promise(function(n,t){$.ajax({url:Ellucian.Student.planRepositoryUrls.removeCourse,data:JSON.stringify(c),type:"POST",contentType:jsonContentType,dataType:"json"}).done(function(t){n(r(t))}).fail(function(n){t(u(n))}).always(function(){})})},addSection:function(f,e,o,s,h,c,l){if(!f||f.length===0)return Promise.reject(Ellucian.Student.planRepositoryMessages.studentIdRequired);if(!e||!o||!s||!h||!c||!l)return Promise.reject(Ellucian.Student.planRepositoryMessages.argumentError);n=i+f;t.removeItem(n);var a={courseId:e,termId:o,sectionId:s,gradingType:h,credits:c,degreePlanJson:l};return new Promise(function(n,t){$.ajax({url:Ellucian.Student.planRepositoryUrls.addSection,data:JSON.stringify(a),type:"POST",contentType:jsonContentType,dataType:"json"}).done(function(t){n(r(t))}).fail(function(n){t(u(n))}).always(function(){})})},removeSection:function(f,e,o){if(!f||f.length===0)return Promise.reject(Ellucian.Student.planRepositoryMessages.studentIdRequired);if(!e||!o)return Promise.reject(Ellucian.Student.planRepositoryMessages.argumentError);n=i+f;t.removeItem(n);var s={removeSectionId:e,degreePlanJson:o};return new Promise(function(n,t){$.ajax({url:Ellucian.Student.planRepositoryUrls.removeSection,data:JSON.stringify(s),type:"POST",contentType:jsonContentType,dataType:"json"}).done(function(t){n(r(t))}).fail(function(n){t(u(n))}).always(function(){})})},requestReview:function(f,e){if(!f||f.length===0)return Promise.reject(Ellucian.Student.planRepositoryMessages.studentIdRequired);if(!e)return Promise.reject(Ellucian.Student.planRepositoryMessages.argumentError);n=i+f;t.removeItem(n);var o={degreePlanJson:e};return new Promise(function(n,t){$.ajax({url:Ellucian.Student.planRepositoryUrls.requestReview,data:JSON.stringify(o),type:"POST",contentType:jsonContentType,dataType:"json"}).done(function(t){n(r(t))}).fail(function(n){t(u(n))}).always(function(){})})},completeReview:function(f,e){if(!f||f.length===0)return Promise.reject(Ellucian.Student.planRepositoryMessages.studentIdRequired);if(!e)return Promise.reject(Ellucian.Student.planRepositoryMessages.argumentError);n=i+f;t.removeItem(n);var o={degreePlanJson:e};return new Promise(function(n,t){$.ajax({url:Ellucian.Student.planRepositoryUrls.completeReview,data:JSON.stringify(o),type:"POST",contentType:jsonContentType,dataType:"json"}).done(function(t){n(r(t))}).fail(function(n){t(u(n))}).always(function(){})})},submitNote:function(f,e,o,s){if(!f||f.length===0)return Promise.reject(Ellucian.Student.planRepositoryMessages.studentIdRequired);if(!e||!s)return Promise.reject(Ellucian.Student.planRepositoryMessages.argumentError);n=i+f;t.removeItem(n);var h={message:e,personType:o,degreePlanJson:s};return new Promise(function(n,t){$.ajax({url:Ellucian.Student.planRepositoryUrls.submitNote,data:JSON.stringify(h),type:"POST",contentType:jsonContentType,dataType:"json"}).done(function(t){n(r(t))}).fail(function(n){t(u(n))}).always(function(){})})},submitRestrictedNote:function(f,e,o,s){if(!f||f.length===0)return Promise.reject(Ellucian.Student.planRepositoryMessages.studentIdRequired);if(!e||!o||!s)return Promise.reject(Ellucian.Student.planRepositoryMessages.argumentError);n=i+f;t.removeItem(n);var h={message:e,personType:o,degreePlanJson:s};return new Promise(function(n,t){$.ajax({url:Ellucian.Student.planRepositoryUrls.submitRestrictedNote,data:JSON.stringify(h),type:"POST",contentType:jsonContentType,dataType:"json"}).done(function(t){n(r(t))}).fail(function(n){t(u(n))}).always(function(){})})},approveCourses:function(f,e,o,s,h){if(!f||f.length===0)return Promise.reject(Ellucian.Student.planRepositoryMessages.studentIdRequired);if(!e||!o||!s||!h)return Promise.reject(Ellucian.Student.planRepositoryMessages.argumentError);n=i+f;t.removeItem(n);var c={term:e,courses:o,status:s,degreePlanJson:h};return new Promise(function(n,t){$.ajax({url:Ellucian.Student.planRepositoryUrls.approveCourses,data:JSON.stringify(c),type:"POST",contentType:jsonContentType,dataType:"json"}).done(function(t){n(r(t))}).fail(function(n){t(u(n))}).always(function(){})})},archivePlan:function(r,u){if(!r||r.length===0)return Promise.reject(Ellucian.Student.planRepositoryMessages.studentIdRequired);if(!u)return Promise.reject(Ellucian.Student.planRepositoryMessages.argumentError);n=i+r;t.removeItem(n);var f={degreePlanJson:u};return new Promise(function(n,t){$.ajax({url:Ellucian.Student.planRepositoryUrls.archivePlan,data:JSON.stringify(f),type:"POST",contentType:jsonContentType,dataType:"json"}).done(function(t){n(o(t))}).fail(function(n){t(h(n))}).always(function(){})})},archiveNotification:function(r,u){if(!r||r.length===0)return Promise.reject(Ellucian.Student.planRepositoryMessages.studentIdRequired);if(!u)return Promise.reject(Ellucian.Student.planRepositoryMessages.argumentError);n=i+r;t.removeItem(n);var f={degreePlanJson:u};return new Promise(function(n,t){$.ajax({url:Ellucian.Student.planRepositoryUrls.archiveNotification,data:JSON.stringify(f),type:"POST",contentType:jsonContentType,dataType:"json"}).done(function(t){n(c(t))}).fail(function(n){t(l(n))}).always(function(){})})},updateProtection:function(f,e,o,s){if(!f||f.length===0)return Promise.reject(Ellucian.Student.planRepositoryMessages.studentIdRequired);if(!e||typeof o!="boolean"||!s)return Promise.reject(Ellucian.Student.planRepositoryMessages.argumentError);n=i+f;t.removeItem(n);var h={courses:e,protectedState:o,degreePlanJson:s};return new Promise(function(n,t){$.ajax({url:Ellucian.Student.planRepositoryUrls.updateProtection,data:JSON.stringify(h),type:"POST",contentType:jsonContentType,dataType:"json"}).done(function(t){n(r(t))}).fail(function(n){t(u(n))}).always(function(){})})},completeAdvisement:function(n){if(!n||n.length===0)return Promise.reject(Ellucian.Student.planRepositoryMessages.studentIdRequired);var t={studentId:n};return new Promise(function(n,i){$.ajax({url:Ellucian.Student.planRepositoryUrls.completeAdvisement,data:JSON.stringify(t),type:"POST",contentType:jsonContentType,dataType:"json"}).done(function(t){n(e(t))}).fail(function(n){i(s(n))}).always(function(){})})},refreshRegistrationEligibility:function(n){if(!n||n.length===0)return Promise.reject(Ellucian.Student.planRepositoryMessages.studentIdRequired);var t=Ellucian.Student.planRepositoryUrls.registrationEligibility+"?id="+n;return new Promise(function(i,f){$.ajax({url:t,data:JSON.stringify(n),type:"GET",contentType:jsonContentType,dataType:"json"}).done(function(n){i(r(n,!1))}).fail(function(n){f(u(n))}).always(function(){})})},clearPlan:function(f,e,o){if(!f||f.length===0)return Promise.reject(Ellucian.Student.planRepositoryMessages.studentIdRequired);if(!e||!o)return Promise.reject(Ellucian.Student.planRepositoryMessages.argumentError);n=i+f;t.removeItem(n);var s={clearTermIds:e,degreePlanJson:o};return new Promise(function(n,t){$.ajax({url:Ellucian.Student.planRepositoryUrls.clearPlannedCourses,data:JSON.stringify(s),type:"POST",contentType:jsonContentType,dataType:"json"}).done(function(t){n(r(t))}).fail(function(n){t(u(n))}).always(function(){})})},removeSessionKeys:function(n){var r=i+n,u=f+n,e=t.removeItem(r),o=t.removeItem(u)}}}();Ellucian=Ellucian||{};Ellucian.Student=Ellucian.Student||{};Ellucian.Student.authorizationCodeRepository=function(){return{submitAuthorizationCode:function(n,t,i){if(!n||n.length===0)return Promise.reject(Ellucian.Student.AddAuthorization.Resources.StudentIdRequired);if(!t||t.length===0)return Promise.reject(Ellucian.Student.AddAuthorization.Resources.SectionIdRequired);if(!i||i.length===0)return Promise.reject(Ellucian.Student.AddAuthorization.Resources.AuthorizationCodeRequired);var r={studentId:n,sectionId:t,authorizationCode:i};return new Promise(function(n,t){$.ajax({url:Ellucian.Student.authorizationCodeRepositoryUrls.submitAuthorizationCode,data:JSON.stringify(r),type:"POST",contentType:jsonContentType,dataType:"json"}).done(function(i){account.handleInvalidSessionResponse(i)||n(i);t(Ellucian.Student.AddAuthorization.Resources.SubmitAuthorizationCodeErrorMessage)}).fail(function(){t(Ellucian.Student.AddAuthorization.Resources.SubmitAuthorizationCodeErrorMessage)}).always(function(){})})}}}();Ellucian=Ellucian||{};Ellucian.Planning=Ellucian.Planning||{};Ellucian.Planning.requirementsRepository=function(){var t="evaluations",i="activeprograms",n=Ellucian.Storage.session;return{get:function(r){if(!r||r.length===0)return Promise.reject(Ellucian.Planning.requirementsRepositoryMessages.studentIdRequired);var h=Ellucian.Planning.requirementsRepositoryUrls.get,f=t+r,e=i+r,o=n.getItem(f),s=n.getItem(e),u=n.getItem("degreeplan"+r),c={studentId:r,degreePlanJson:u&&u.DegreePlanDto?ko.mapping.toJSON(u.DegreePlanDto):null};return o!==null&&s!==null?Promise.resolve([o,s]):new Promise(function(t,i){var r=$.ajax({url:h,data:JSON.stringify(c),type:"POST",contentType:jsonContentType,dataType:"json"}).done(function(r){if(!account.handleInvalidSessionResponse(r)){n.setItem(f,r.Evaluations);n.setItem(e,r.ActivePrograms);var u=typeof r.Evaluations=="string"?JSON.parse(r.Evaluations):r.Evaluations;t([u,r.ActivePrograms])}i("Unable to retrieve programs.")}).fail(function(){i("Unable to retrieve programs.")})})},addStudentProgram:function(r){return r?new Promise(function(u,f){var e=$.ajax({url:Ellucian.Planning.requirementsRepositoryUrls.addStudentProgram,data:JSON.stringify(r),type:"POST",contentType:jsonContentType,dataType:"json"}).done(function(e){var o,s,h;account.handleInvalidSessionResponse(e)||(o=t+r.StudentId,s=i+r.StudentId,n.removeItem(o),n.removeItem(s),n.setItem(o,e.Evaluations),n.setItem(s,e.ActivePrograms),h=typeof e.Evaluations=="string"?JSON.parse(e.Evaluations):e.Evaluations,u([h,e.ActivePrograms]));f("Unable to add program.")}).fail(function(n){f(JSON.parse(n.responseText))})}):Promise.reject("Program is required")},updateStudentProgram:function(r){return r?new Promise(function(u,f){var e=$.ajax({url:Ellucian.Planning.requirementsRepositoryUrls.updateStudentProgram,data:JSON.stringify(r),type:"PUT",contentType:jsonContentType,dataType:"json"}).done(function(e){var o,s,h;account.handleInvalidSessionResponse(e)||(o=t+r.StudentId,s=i+r.StudentId,n.removeItem(o),n.removeItem(s),n.setItem(o,e.Evaluations),n.setItem(s,e.ActivePrograms),h=typeof e.Evaluations=="string"?JSON.parse(e.Evaluations):e.Evaluations,u([h,e.ActivePrograms]));f("Unable to update program.")}).fail(function(n){f(JSON.parse(n.responseText))})}):Promise.reject("Program is required")},removeSessionKeys:function(r){var u=t+r,f=i+r;n.removeItem(u);n.removeItem(f)}}}();curriculumTracksMapping={CurriculumTracks:{create:function(n){return new track(n.data,n.parent)}}};planMapping={DegreePlan:{create:function(n){return new DegreePlan(n.data)}},Terms:{create:function(n){return new Term(n.data)}},PlannedCourses:{create:function(n){return new Course(n.data)}},CompletedCourses:{create:function(n){return new Course(n.data)}},RequisiteWarnings:{create:function(n){return new requisiteModel(n.data)}},CorequisiteCourseWarnings:{create:function(n){return new corequisiteCourseModel(n.data)}},CorequisiteSectionWarnings:{create:function(n){return new corequisiteSectionModel(n.data)}},PlannedSectionsWithNoMeetingTimes:{create:function(n){return new Course(n.data)}},StudentWaivers:{update:function(n){return UpdatePetitionsWaivers(n)}},StudentPetitions:{update:function(n){return UpdatePetitionsWaivers(n)}},StudentConsents:{update:function(n){return UpdatePetitionsWaivers(n)}},DropReasonsConfiguration:{create:function(n){return new DropReasonsConfigurationModel(n.data)}},IntentToWithdrawCodesModel:{create:function(n){return new IntentToWithdrawCodesModel(n.data)}},copy:["DegreePlanDto"]};Ellucian=Ellucian||{};Ellucian.ScreenSizes=Ellucian.ScreenSizes||{};Ellucian.ScreenSizes=Object.freeze({xxsmall:320,xsmall:420,small:768,medium:992,tablets:1025,large:1200,xlarge:1440,xxlarge:2e3});BaseViewModel=function(n){var t=this,i;this.mobileScreenWidth=n||480;this.isMobile=ko.observable(!1);i=ko.observable(0);this.screenIsSmallerThan=function(n){var t=!1,r,u;for(r in Ellucian.ScreenSizes)if(n===r){t=!0;break}if(!t)throw"Please provide a valid screen query size from Ellucian.ScreenSizes";return(u=Ellucian.ScreenSizes[n],i()<Ellucian.ScreenSizes[n])?!0:!1};this.checkForMobile=function(n,r){var f=n,e="inner",u;"innerWidth"in n||(e="client",f=r.documentElement||r.body);u=f[e+"Width"];u<t.mobileScreenWidth?t.isMobile(!0):t.isMobile(!1);i(u)};this.isMobile.subscribe(function(n){n===!0?t.changeToMobile():t.changeToDesktop()});this.changeToMobile=function(){};this.changeToDesktop=function(){};t.loadingMessage=ko.observable(personProxyLoadingThrobberMessage);t.proxySelectionDialogIsLoading=ko.observable(!1);t.proxySelectionDialogIsDisplayed=ko.observable(!1);this.ProxySubjects=ko.observableArray();t.selectedProxySubject=ko.observable(null);t.changeProxySubject=function(){hideProxyDialog=!1;t.getProxySubjects()};t.updateProxyBanner=ko.observable(!1).subscribeTo("UPDATE.PROXY.BANNER");t.updateViewModelWithProxySubjectData=function(){t.proxySelectionDialogIsLoading(!1);t.proxySelectionDialogIsDisplayed(!hideProxyDialog&&t.ProxySubjects().length>1);showOrHideElement(t.ProxySubjects(),$("#changeProxyUser-link"));showOrHideElement(t.ProxySubjects(),$("#changeProxyUser-opsLink"));t.proxySelectionDialogIsDisplayed()?setFocus("input.buttonless"):setFocus("#topOfForm")};this.getProxySubjects=function(){var n=Ellucian.Storage.session.getItem("Ellucian.proxySubjects");n?(ko.mapping.fromJS(n,{},t.ProxySubjects),t.updateViewModelWithProxySubjectData()):$.ajax({url:getProxySubjectsActionUrl,type:"GET",contentType:jsonContentType,dataType:"json",beforeSend:function(){t.proxySelectionDialogIsLoading(!0)},success:function(n){account.handleInvalidSessionResponse(n)||(Ellucian.Storage.session.setItem("Ellucian.proxySubjects",n.ProxySubjects),ko.mapping.fromJS(n,{},t))},error:function(n){n.status!=0&&$("#notificationHost").notificationCenter("addNotification",{message:proxySelectionUnableToLoadSubjectsMessage,type:"error"})},complete:function(){t.updateViewModelWithProxySubjectData()}})};t.cancelProxySelectionDialog=function(){t.proxySelectionDialogIsDisplayed(!1);t.selectedProxySubject(null)};t.changingUserMessage=ko.observable(personProxyChangingThrobberMessage);t.changingProxyUsers=ko.observable(!1);t.saveProxySelectionDialog=function(){var i={subjectJson:ko.toJSON(t.selectedProxySubject())},n=homeUrl;t.selectedProxySubject().Id()==currentUserId&&(n+="?hideProxyDialog=true");$.ajax({url:setProxySubjectActionUrl,type:"PUT",contentType:jsonContentType,data:JSON.stringify(i),dataType:"json",beforeSend:function(){t.changingProxyUsers(!0)},success:function(){},error:function(){console.log("Error setting proxy subject.")},complete:function(){window.location.href=n}})};t.saveProxySelectionEnabled=ko.computed(function(){return t.selectedProxySubject()});t.selectedProxySubject.subscribe(function(){t.selectedProxySubject()&&makeAnnouncement(proxySelectionUserSelectedMessage.format(t.selectedProxySubject().FullName()))});t.verifyingPasswordMessage=ko.observable(verifyingPasswordMessage);t.verifyingPasswordAltText=ko.observable(verifyingPasswordAltText);t.verifyingPassword=ko.observable(!1);t.userPassword=ko.observable();t.verifyPasswordMessage=ko.observable();t.verifyPasswordDialogIsDisplayed=ko.observable(!1);t.showVerifyPasswordDialog=function(){t.verifyPasswordDialogIsDisplayed(!0)};t.cancelVerifyPasswordDialog=function(){t.verifyPasswordDialogIsDisplayed(!1);t.verifyPasswordMessage(null);t.userPassword(null)};t.verifyPasswordButtonEnabled=ko.computed(function(){return t.userPassword()&&t.userPassword()!==""});t.submitVerifyPasswordDialog=function(){var n={passwordJson:ko.toJSON(t.userPassword())};$.ajax({url:reauthenticateUrl,type:"POST",contentType:jsonContentType,data:JSON.stringify(n),dataType:"json",beforeSend:function(){t.verifyPasswordDialogIsDisplayed(!1);t.verifyingPassword(!0)},success:function(n){account.handleInvalidSessionResponse(n)||(t.verifyingPassword(!1),t.verifyingPasswordSuccessFunction(),t.verifyPasswordMessage(null),t.userPassword(null))},error:function(n){n.status!=0&&t.verifyPasswordMessage(JSON.parse(n.responseText));t.verifyingPassword(!1);t.verifyPasswordDialogIsDisplayed(!0)},complete:function(){}})};t.verifyingPasswordSuccessFunction=function(){};t.saveProxySelectionButton={id:"save-proxy-selection-dialog-button",isPrimary:!0,title:Ellucian.Proxy.ButtonLabels.saveProxySelectionDialogButtonLabel,callback:t.saveProxySelectionDialog,enabled:t.saveProxySelectionEnabled};t.cancelProxySelectionButton={id:"cancel-proxy-selection-dialog-button",isPrimary:!1,title:Ellucian.Proxy.ButtonLabels.cancelProxySelectionDialogButtonLabel,callback:t.cancelProxySelectionDialog};t.verifyPasswordDialogButton={id:"verify-password-dialog-button",isPrimary:!0,title:Ellucian.SharedComponents.ButtonLabels.buttonTextVerifyPassword,callback:t.submitVerifyPasswordDialog,enabled:t.verifyPasswordButtonEnabled};t.cancelPasswordDialogButton={id:"cancel-dialog-button",title:Ellucian.SharedComponents.ButtonLabels.buttonTextCancel,callback:t.cancelVerifyPasswordDialog};$(document).ready(function(){var n=0;$(window).on("resize",function(){clearTimeout(n);n=setTimeout(function(){t.checkForMobile(window,document)},100)})})};Ellucian=Ellucian||{};Ellucian.Planning=Ellucian.Planning||{};Ellucian.Student=Ellucian.Student||{};Ellucian.Student.BasePlanViewModel=function(n,t,r,u){var f=this,o,h,s,c;BaseViewModel.call(f);f.selectedTab=ko.observable("list");f.activeTabId=ko.observable("schedplan-schedule");f.setSelectedTab=function(n){f.selectedTab(n);n=="calendar"&&setTimeout(function(){f.currentTermCode.valueHasMutated()},15)};f.activeTabId.subscribe(function(n){n==="schedplan-dp"?f.selectedTab("timeline"):f.selectedTab()==="timeline"&&f.selectedTab("list")});this.degreePlanChanged=ko.observable(!1).publishOn("degreePlanChanged");this.isPageLoading=ko.observable(!0);var e={courseId:null,sectionId:null,termId:null,courseCreditsFreeform:!1,courseFreeformMin:0,courseFreeformMax:0,courseStaticCredits:0,courseNonTerm:!1},l={chosenCredits:null,chosenTerm:null};this.planningTerms=ko.observableArray().publishOn("planningTerms");this.updatePlanningTerms=function(n){f.planningTerms.removeAll();for(var t=0;t<n.length;t++)f.planningTerms.push(new Term(n[t]))};this.availablePlanningTerms=ko.observableArray().publishOn("availablePlanningTerms");this.updateAvailablePlanningTerms=function(n){f.availablePlanningTerms.removeAll();for(var t=0;t<n.length;t++)f.availablePlanningTerms.push(new Term(n[t]))};this.Notification=ko.observable({Type:ko.observable(""),Message:ko.observable("")});this.isShowingSchedule=!0;typeof n=="undefined"&&(n=!1);this.isProxyUser=ko.observable(n).publishOn("isProxyUser");this.searchUrl=ko.observable(t);this.searchAsync=ko.observable(!1);this.DegreePlan=ko.observable().syncWith("degreePlan").extend({rateLimit:{timeout:500,method:"notifyWhenChangesStop"}});this.DegreePlan.subscribe(function(){f.currentTermCode.valueHasMutated()});this.catalogResult=ko.observable(null).publishOn("catalogResult");this.catalogResultsDisplayed=ko.observable(!1).publishOn("catalogResultDisplayed");this.isLoading=ko.observable(!1).syncWith("isLoading",!0);this.LoadingMessage=ko.observable("").syncWith("LoadingMessage",!0);this.currentTermCode=ko.observable(null);f.currentTermCode.subscribeChanged(function(n,t){f.isShowingSchedule&&(n==null||n!=t)&&f.ResetToNoCoursesOpen();ko.unwrap(f.DegreePlan)&&ko.unwrap(f.DegreePlan().Terms)?f.currentTerm(ko.utils.arrayFirstDeprecated(f.DegreePlan().Terms(),function(n){return n.Code()==f.currentTermCode()})):f.currentTerm(null);f.checkForMobile(window,document);f.calendarHeightFix()});this.currentTerm=ko.observable(null);Ellucian.Student.FullCalendarModel.call(f);this.FirstTerm=ko.computed(function(){return typeof f.DegreePlan()=="undefined"||typeof f.DegreePlan().Terms=="undefined"||f.DegreePlan().Terms().length<1?"":f.DegreePlan().Terms()[0].Code()});this.LastTerm=ko.computed(function(){return typeof f.DegreePlan()=="undefined"||typeof f.DegreePlan().Terms=="undefined"||f.DegreePlan().Terms().length<1?"":f.DegreePlan().Terms()[f.DegreePlan().Terms().length-1].Code()});this.termEligibility=ko.observableArray();this.hasRegistrationOverride=ko.observable();this.currentTermAddMessage=ko.computed(function(){if(f.currentTermCode()==null)return"";var n=ko.utils.arrayFirstDeprecated(f.termEligibility(),function(n){return n.Term==f.currentTermCode()});return n?n.Message:null});this.canRegister=ko.computed(function(){if(f.currentTermCode()==null)return!1;var n=ko.utils.arrayFirstDeprecated(f.termEligibility(),function(n){return n.Term==f.currentTermCode()});return forceEnableRegistrationButtons===!0||f.hasRegistrationOverride()===!0||(n?n.AllowRegistration:!1)});this.canSkipWaitlist=ko.computed(function(){if(f.currentTermCode()==null)return!1;var n=ko.utils.arrayFirstDeprecated(f.termEligibility(),function(n){return n.Term==f.currentTermCode()});return n?n.AllowSkippingWaitlist:!1}).publishOn("userCanSkipWaitlist");this.addingTerm=ko.observable();this.removingTerm=ko.observable();this.removingCourseId=ko.observable();this.removingCoursePlaceholder=ko.observable(!1);this.removingCourseTitle=ko.observable();this.removingCourseTerm=ko.observable();this.removingCourseTermTitle=ko.observable();this.removingCourseSectionId=ko.observable();this.AdvisingNotes=ko.observable("");this.removeCourseDialogIsOpen=ko.observable(!1);this.removeCourseDialogTitle=ko.pureComputed(function(){return f.removingCoursePlaceholder()===!0?Ellucian.DegreePlans.Resources.RemoveCoursePlaceholderDialogTitle:Ellucian.DegreePlans.Resources.RemoveCourseDialogTitle});this.ShowRemoveCourseDialog=function(n,t,i){i?(f.removingCourseTerm(""),f.removingCourseTermTitle(Ellucian.Student.PlanViewModelMessages.removeNonTermSectionLabel)):(f.removingCourseTerm(t.Code()),f.removingCourseTermTitle(t.Description()));f.removingCourseId(n.Id());f.removingCoursePlaceholder(!isNullOrEmpty(n.CoursePlaceholderDescription()));f.removingCoursePlaceholder()===!0?f.removingCourseTitle(n.FullTitleDisplay()):f.removingCourseTitle(n.CourseTitleDisplay());f.removingCourseSectionId(null);n.Section!=null&&typeof n.Section!="function"&&f.removingCourseSectionId(n.Section.Id());f.removeCourseDialogIsOpen(!0)};this.CancelRemoveCourse=function(){f.removeCourseDialogIsOpen(!1);f.removingCourseId(null);f.removingCourseTitle("");f.removingCourseTerm(null);f.removingCourseTermTitle("");f.removingCourseSectionId(null)};this.commitRemoveCourse=function(){f.removingCoursePlaceholder()?f.LoadingMessage(Ellucian.Student.PlanViewModelMessages.removingCourseProcessing.format(Ellucian.Student.PlanViewModelMessages.CoursePlaceholderString)):f.removingCourseId()!=""&&f.removingCourseId()!=null&&typeof Ellucian.Student.PlanViewModelMessages.removingCourseProcessing=="string"&&(f.removingCourseSectionId()?f.LoadingMessage(Ellucian.Student.PlanViewModelMessages.removingCourseProcessing.format(Ellucian.Student.PlanViewModelMessages.SectionString)):f.LoadingMessage(Ellucian.Student.PlanViewModelMessages.removingCourseProcessing.format(Ellucian.Student.PlanViewModelMessages.CourseString)));f.isLoading(!0);f.removeCourseDialogIsOpen(!1);r.removeCourse(f.DegreePlan().PersonId(),f.removingCourseId(),f.removingCourseTerm(),f.removingCourseSectionId(),ko.mapping.toJSON(ko.utils.unwrapObservable(f.DegreePlan).DegreePlanDto)).then(function(n){f.degreePlanChanged(!0);f.repositorySuccessHandler(n)}).catch(function(n){f.repositoryErrorHandler(n)}).then(o,o)};o=function(){f.removingCourseId(null);f.removingCourseTitle("");f.removingCourseTerm(null);f.removingCourseTermTitle("");f.removingCourseSectionId(null);f.updateCompleted()};this.canApprove=ko.computed(function(){if(Ellucian.Student.HasStudentPlanning){var n=f.isProxyUser();return!n}return!1});this.canSaveAdvisingNotes=ko.pureComputed(function(){return f.AdvisingNotes()===undefined||f.AdvisingNotes()===null||f.AdvisingNotes().trim()===""?!1:!0});this.canEdit=ko.computed(function(){var n=f.isProxyUser();return!n}).publishOn("canEdit");this.showRegister=ko.computed(function(){if(f.currentTerm()==null)return!1;var n=f.isProxyUser();return!n&&(f.currentTerm().AllowRegistration()===!0||forceEnableRegistrationButtons===!0)&&f.currentTerm().IsTermCompleted()===!1});this.userCanDrop=ko.computed(function(){if(f.currentTerm()==null)return!1;var n=f.isProxyUser();return!n&&f.currentTerm().IsTermCompleted()===!1});this.canSubmitForApproval=ko.computed(function(){if(Ellucian.Student.HasStudentPlanning){var n=ko.utils.unwrapObservable(f.DegreePlan);if(n!=null)return n.AdviseByOfficeFlag()&&!f.isProxyUser()?!0:n.StudentHasAdvisor()&&!f.isProxyUser()}return!1});this.showEventTitleAsLinks=ko.observable(!0);this.OpenDropDialog=ko.observable(!1);this.DropSection=ko.observable();this.DropOtherSections=ko.observableArray();this.DropMessage=ko.computed(function(){var t="",n=f.DropSection();return n!==null&&typeof n!="undefined"&&(t=stringDroppingSectionMessage+ko.utils.unwrapObservable(n.DropTitleDisplay)+" ("+ko.utils.unwrapObservable(n.CreditsCeusDisplay)+")"),t});this.showAddAuthorizationDialog=ko.observable(!1);this.authorizationSectionWrapper=ko.observable({authorizationSection:ko.observable(),authorizationAction:ko.observable()});this.authorizationCode=ko.observable();this.authorizationCodeFieldHasFocus=ko.observable(!1);this.showAddAuthorizationDialog.subscribe(function(n){n===!0?setTimeout(function(){f.authorizationCodeFieldHasFocus(!0)},100):f.authorizationCodeFieldHasFocus(!1)});this.canSubmitAuthorizationCode=ko.computed(function(){return f.authorizationCode()&&f.authorizationCode().length>0?!0:!1});this.submissionErrorMessage=ko.observable();this.submittingAuthorizationCode=ko.observable(!1);this.submittingAuthorizationCodesFromDrop=ko.observable(!1);this.submitAuthorizationCode=function(){return f.submittingAuthorizationCode(!0),u.submitAuthorizationCode(f.DegreePlan().PersonId(),f.authorizationSectionWrapper().authorizationSection().Section.Id(),f.authorizationCode()).then(function(){f.showAddAuthorizationDialog(!1);var n=[];n.push({plannedCourse:f.authorizationSectionWrapper().authorizationSection(),action:f.authorizationSectionWrapper().authorizationAction()});f.authorizationCode(null);f.RegisterSections(n)}).catch(function(n){f.submissionErrorMessage(n);f.authorizationCodeFieldHasFocus(!0)}).then(f.submitAuthorizationComplete,f.submitAuthorizationComplete)};this.cancelAuthorizationCode=function(){f.showAddAuthorizationDialog(!1);f.submissionErrorMessage(null)};this.submitAuthorizationComplete=function(){f.submittingAuthorizationCode(!1);f.submittingAuthorizationCodesFromDrop(!1)};this.IsRegistrationPaymentRequired=ko.observable(!1);this.CommitDrop=function(){var n=[];ko.utils.arrayForEach(f.dropDialogDropSections(),function(t){t.selected()&&n.push({plannedCourse:t.plannedCourse,action:"Drop",dropReason:t.dropReason()})});var t=ko.utils.arrayFilter(f.dropDialogAddSections(),function(n){return n.selected()&&n.requiresAuthorization===!0&&!isNullOrEmpty(n.authorizationCode())}),i=ko.utils.arrayFilter(f.dropDialogAddSections(),function(n){return n.selected()&&n.requiresAuthorization===!1}),r=[],e=[];t.length>0&&ko.utils.arrayForEach(t,function(t){f.authorizationSectionWrapper().authorizationSection(t);f.submittingAuthorizationCodesFromDrop(!0);var i=u.submitAuthorizationCode(f.DegreePlan().PersonId(),f.authorizationSectionWrapper().authorizationSection().plannedCourse().Section.Id(),f.authorizationSectionWrapper().authorizationSection().authorizationCode()).then(function(){n.push({plannedCourse:t.plannedCourse(),action:"Add"});t.authorizationCode(null)}).catch(function(){var n=Ellucian.Student.AddAuthorization.Resources.SubmitAuthorizationCodeFormattedErrorMessage.format(t.text);e.push(n)}).then(f.submitAuthorizationComplete,f.submitAuthorizationComplete);r.push(i)});i.length>0&&ko.utils.arrayForEach(i,function(t){var i="Add";t.selected()&&typeof t.selectedWaitlist()!="undefined"&&t.selectedWaitlist()&&(i="Waitlist");n.push({plannedCourse:t.plannedCourse(),action:i})});Promise.all(r).then(function(){f.RegisterSections(n,e);f.OpenDropDialog(!1)})};this.CancelDropSection=function(){f.DropOtherSections([]);f.OpenDropDialog(!1)};this.AddSectionToPlan=function(n,t){var i,r;if(n!=null&&(i=n.Course,typeof i=="undefined"&&(i=n),t!=null)){if(showSectionDetails({course:i,section:t,allowAdding:!0,addTerms:null,addCallback:f.commitAddSection,creditsOverride:null,studentId:f.DegreePlan().PersonId(),canSkipWaitlist:f.canSkipWaitlist()}),e.sectionId=t.Id,e.sectionNumber=t.Number,e.termId=f.currentTermCode(),r=n.IsNonTermSection(),(t.TermId===null||t.TermId==="")&&(r=!0),e.courseNonTerm=r,isCourseOrSectionVariableCredit(ko.mapping.toJS(t))){var u=t.VariableCreditIncrement,o=t.MinimumCredits,s=t.MaximumCredits;u!=null?e.courseCreditsFreeform=!1:(e.courseCreditsFreeform=!0,e.courseFreeformMin=o,e.courseFreeformMax=s)}else e.courseCreditsFreeform=!1,e.courseStaticCredits=isNullOrEmpty(t.MinimumCredits)?-1:t.MinimumCredits;e.courseId=i.Id();e.courseSectionId=t.Id}};h=function(){r.get(f.DegreePlan().PersonId()).then(function(n){f.degreePlanChanged(!0);f.repositorySuccessHandler(n)}).catch(function(n){$("#notificationHost").notificationCenter("addNotification",{message:n,type:"error"})}).then(f.updateCompleted,f.updateCompleted)};this.commitAddSection=function(n){var n=$.extend({},l,n),t,i;if(e.courseId!=null){if(e.courseCreditsFreeform){if(t=n.chosenCredits,t===null||t===""||t===undefined){alert(Ellucian.Student.PlanViewModelMessages.specifyCredits);focusAddingSection();return}if(!isNumber(t)){alert(Ellucian.Student.PlanViewModelMessages.specifyCreditsRange.format(e.courseFreeformMin,e.courseFreeformMax));focusAddingSection();return}if(t>e.courseFreeformMax||t<e.courseFreeformMin){alert(Ellucian.Student.PlanViewModelMessages.specifyCreditsRange.format(e.courseFreeformMin,e.courseFreeformMax));focusAddingSection();return}}i=isNullOrEmpty(n.chosenCredits)?e.courseStaticCredits:n.chosenCredits;e.courseNonTerm&&(e.termId="");f.LoadingMessage(Ellucian.Student.PlanViewModelMessages.updatingMessage);f.ajaxBeforeSendHandler();closeSectionDetails();r.addSection(f.DegreePlan().PersonId(),e.courseId,e.termId,e.sectionId,n.chosenGradingType,i,ko.mapping.toJSON(f.DegreePlan().DegreePlanDto)).then(function(n){e.courseId=null;e.sectionId=null;e.sectionNumber=null;e.termId=null;f.degreePlanChanged(!0);f.repositorySuccessHandler(n)}).catch(function(n){e.courseId=null;e.sectionId=null;e.sectionNumber=null;e.termId=null;f.repositoryErrorHandler(n)}).then(f.updateCompleted,f.updateCompleted)}};this.PlannedCourseCredits=function(){var n,t;if(f.currentTerm()!=null)for(n=f.currentTerm().PlannedCourses(),i=0;i<n.length;i++)t=n[i];return 0};this.RegisterAllHandler=function(){var r=[],t,i,n;for(f.dropDialogDropSections([]),f.dropDialogUnavailableDropSections([]),t=[],n=0;n<f.notRegisteredPlannedCourses().length;n++)dropDialogAddSection=new BulkSectionsToDropOrAdd("Add",f.notRegisteredPlannedCourses()[n],null,null,f.isProxyUser(),f.canSkipWaitlist()),t.push(dropDialogAddSection);if(f.dropDialogAddSections(t),f.atLeastOneSectionToAddRequiresAuthorizationCode()||f.atLeastOneSectionToAddIsFullOrHasWaitlist()&&f.canSkipWaitlist()===!0&&f.isProxyUser())f.dropDialogAddSections.sort(function(n,t){return n.requiresAuthorization===t.requiresAuthorization?0:n.requiresAuthorization?-1:1}),f.OpenDropDialog(!0);else{for(i=f.notRegisteredPlannedCourses(),n=0;n<i.length;n++)r.push({plannedCourse:i[n],action:"Add"});f.RegisterSections(r)}};this.RegisterSectionHandler=function(n,t){var o,c,u,e,i;if(t=="Drop"){f.DropSection(n);o=f.VerifyCorequisiteSections();f.DropOtherSections(o);var r=f.registeredPlannedCourses(),s=[],h=[];for(i=0;i<r.length;i++)c=f.DropOtherSections.indexOf(r[i])>=0,dropDialogDropSection=new BulkSectionsToDropOrAdd("Drop",r[i],c,n,f.isProxyUser(),f.canSkipWaitlist()),dropDialogDropSection.isAvailableForDrop?s.push(dropDialogDropSection):h.push(dropDialogDropSection);for(f.dropDialogDropSections(s),f.dropDialogUnavailableDropSections(h),u=f.notRegisteredPlannedCourses(),e=[],i=0;i<u.length;i++)dropDialogAddSection=new BulkSectionsToDropOrAdd("Add",u[i],null,null,f.isProxyUser(),f.canSkipWaitlist()),e.push(dropDialogAddSection);f.dropDialogAddSections(e);f.dropDialogAddSections.sort(function(n,t){return n.requiresAuthorization===t.requiresAuthorization?0:n.requiresAuthorization?-1:1});f.OpenDropDialog(!0)}else n.RequiresAddAuthorizationCode()&&t!=="RemoveFromWaitlist"?(f.authorizationSectionWrapper().authorizationSection(n),f.authorizationSectionWrapper().authorizationAction(t),f.showAddAuthorizationDialog(!0)):f.RegisterSections([{plannedCourse:n,action:t}])};this.registeredPlannedCourses=ko.computed(function(){var i,n,t;if(f.currentTerm()===null||typeof f.currentTerm().PlannedCourses=="undefined")return[];for(i=[],n=0;n<f.currentTerm().PlannedCourses().length;n++)t=ko.utils.unwrapObservable(f.currentTerm().PlannedCourses()[n].AcademicHistory),t===null||t.HasSection()!==!0||t.IsCompletedCredit()||i.push(f.currentTerm().PlannedCourses()[n]);return i}).extend({throttle:10});this.notRegisteredPlannedCourses=ko.computed(function(){var i,r,t,n;if(f.currentTerm()==null||typeof f.currentTerm().PlannedCourses=="undefined")return[];for(i=[],r=f.currentTerm().PlannedCourses(),t=0;t<r.length;t++)n=r[t],ko.utils.unwrapObservable(n.AcademicHistory.HasSection)===!1&&ko.utils.unwrapObservable(n.AcademicHistory.IsCompletedCredit)===!1&&ko.utils.unwrapObservable(n.Section)!=null&&i.push(n);return i}).extend({throttle:10});this.dropDialogDropSections=ko.observableArray();this.dropDialogUnavailableDropSections=ko.observableArray();this.dropDialogAddSections=ko.observableArray();this.hasDropSections=ko.pureComputed(function(){return f.dropDialogDropSections()&&f.dropDialogDropSections().length>0?!0:!1});this.hasUnavailableDropSections=ko.pureComputed(function(){return f.dropDialogUnavailableDropSections()&&f.dropDialogUnavailableDropSections().length>0?!0:!1});this.hasAddSections=ko.pureComputed(function(){return f.dropDialogAddSections()&&f.dropDialogAddSections().length>0?!0:!1});this.isAddingWithoutDropping=ko.pureComputed(function(){return!f.hasDropSections()&&f.hasAddSections()?!0:!1});this.showDropsAndAddsSeparator=ko.pureComputed(function(){return!f.isAddingWithoutDropping()&&f.showSelectDropReasonHeader()?!0:!1});this.numberOfSelectedItemsToAddDrop=ko.computed(function(){return ko.utils.arrayFilter(f.dropDialogDropSections(),function(n){return n.selected()}).length+ko.utils.arrayFilter(f.dropDialogAddSections(),function(n){return n.selected()}).length});this.droppedSectionsWithoutDropReason=ko.computed(function(){return ko.utils.arrayFilter(f.dropDialogDropSections(),function(n){return n.selected()&&n.dropReasonToValidate()===!0})});this.addedSectionsWithoutAuthorizationCodeWhenRequired=ko.computed(function(){return ko.utils.arrayFilter(f.dropDialogAddSections(),function(n){return n.selected()&&n.requiresAuthorization===!0&&isNullOrEmpty(n.authorizationCode())})});this.addDropDialogTitle=ko.pureComputed(function(){return f.isAddingWithoutDropping()?Ellucian.DegreePlans.Resources.UiRegisterButtonLabel:Ellucian.DegreePlans.Resources.UiDropTitle});this.dropDialogButtonLabel=ko.computed(function(){return f.isAddingWithoutDropping()?Ellucian.DegreePlans.Resources.UiIndividualRegisterButtonLabel:Ellucian.DegreePlans.Resources.DropDialogDrop});this.dropDialogButtonAriaLabel=ko.computed(function(){return f.isAddingWithoutDropping()?Ellucian.DegreePlans.Resources.UiIndividualRegisterButtonAriaLabel:Ellucian.DegreePlans.Resources.DropDialogDropAriaLabel});this.dropDialogCancelAriaLabel=ko.computed(function(){return f.isAddingWithoutDropping()?Ellucian.DegreePlans.Resources.UiIndividualRegisterCacnelButtonAriaLabel:Ellucian.DegreePlans.Resources.DropDialogCancelAriaLabel});this.intentToWithdraw=ko.observable(null);this.showIntentToWithdrawPrompt=ko.pureComputed(function(){if(f.isProxyUser()===!0)return!1;var n=ko.utils.arrayFilter(f.dropDialogDropSections(),function(n){return n.selected()===!0&&n.PromptForIntentToWithdrawWhenDropping===!0});return n.length>0?f.IntentToWithdrawCodesModel.Codes().length>0:!1});this.showIntentToWithdrawPrompt.subscribe(function(n){n===!1&&f.intentToWithdraw(null)});this.showWaitlistOverrideMessage=ko.computed(function(){return f.isProxyUser()&&f.canSkipWaitlist()?!0:!1});this.VerifyCorequisiteSections=function(){for(var i,s,n,l,h,r,u,e,a,o=f.DropSection().AcademicHistory.Section.Id(),c=[],t=0;t<f.registeredPlannedCourses().length;t++)if(o!==f.registeredPlannedCourses()[t].AcademicHistory.Section.Id()&&(i=f.registeredPlannedCourses()[t],i.AcademicHistory.Section!=null&&(s=i.AcademicHistory.Section,n=ko.utils.unwrapObservable(s.SectionCorequisites),n!=null&&n.indexOf(o)!==-1))){for(l=s.SectionCorequisitesNumberNeeded(),h=0,r=0;r<n.length;r++)for(u=0;u<f.registeredPlannedCourses().length;u++)e=f.registeredPlannedCourses()[u],e.AcademicHistory.HasSection()===!0&&o!==e.AcademicHistory.Section.Id()&&(a=e.AcademicHistory.Section.Id(),a===n[r]&&(h+=1));h<l&&c.push(ko.utils.unwrapObservable(i))}return c};this.RegisterSections=function(n,t){var o,i,s;if(n.length>0){for(o=[],i=0;i<n.length;i++){var u=ko.utils.unwrapObservable(n[i].plannedCourse),e=n[i].action,h=null;n[i].action=="Drop"&&(h=n[i].dropReason);var c=ko.utils.unwrapObservable(u.Section),l=c==null?u.AcademicHistory.Section.Id():c.Id(),a=u.Credits();e=="Add"&&(u.GradingType()==Ellucian.Course.SectionDetails.stringAuditGradingCode||u.GradingType()==Ellucian.Course.SectionDetails.stringPassFailGradingCode)&&(e=u.GradingType());s=null;e=="Drop"&&(s=u.Section.PromptForIntentToWithdrawWhenDropping()===!0?f.intentToWithdraw():null);o.push({SectionId:l,Credits:a,Action:e,DropReasonCode:h,IntentToWithdrawId:s})}f.ajaxBeforeSendHandler(stringRegistrationMessage);r.register(f.DegreePlan().PersonId(),o).then(function(n){f.LoadingMessage(stringRegistrationCompleteMessage);f.CompleteRegistration(n,t)}).catch(function(n){f.repositoryErrorHandler(n);f.isLoading(!1)}).then(null,f.updateCompleted)}else t&&t.length>0&&f.repositorySuccessHandler(null,t)};this.CompleteRegistration=function(n,t){r.completeRegistration(f.DegreePlan().PersonId(),n).then(function(n){f.degreePlanChanged(!0);f.repositorySuccessHandler(n,t)}).catch(function(n){$("#notificationHost").notificationCenter("addNotification",{message:n,type:"error"})}).then(f.updateCompleted,f.updateCompleted)};this.Details=function(n){showCourseOrSectionDetails({course:n,allowAdding:!1,addTerms:null,addCallback:null,creditsOverride:null,canSkipWaitlist:f.canSkipWaitlist()})};this.ajaxBeforeSendHandler=function(){f.LoadingMessage(Ellucian.Student.PlanViewModelMessages.updatingMessage);f.isLoading(!0)};this.updateCompleted=function(){f.CheckIfPaymentRequired();f.currentTermCode.valueHasMutated();f.isLoading(!1)};this.SelectPreviousTerm=function(){var n=ko.utils.arrayFirstDeprecated(f.DegreePlan().Terms(),function(n){return n.Code()==f.currentTermCode()}),t=f.DegreePlan().Terms().indexOf(n)-1;f.currentTermCode(f.DegreePlan().Terms()[t].Code())};this.SelectNextTerm=function(){var n=ko.utils.arrayFirstDeprecated(f.DegreePlan().Terms(),function(n){return n.Code()==f.currentTermCode()}),t=f.DegreePlan().Terms().indexOf(n)+1;f.currentTermCode(f.DegreePlan().Terms()[t].Code())};this.ShowScheduleTerm=function(n){$("#schedplan-schedule-tablink").trigger("click");setTimeout(function(){f.currentTermCode(n)},5)};this.removeTermDialogIsOpen=ko.observable(!1);this.ShowRemoveTermDialog=function(n){f.removeTermDialogIsOpen(!0);typeof n!="undefined"?f.removingTerm(n):f.removingTerm(f.currentTerm())};this.CommitRemoveTerm=function(){var t=null,n;if(f.removingTerm()!=null){if(f.currentTermCode()===f.removingTerm().Code())for(n=0;n<f.DegreePlan().Terms().length;n++)f.DegreePlan().Terms()[n].Code()===f.removingTerm().Code()&&(t=n+1<f.DegreePlan().Terms().length?f.DegreePlan().Terms()[n+1].Code():f.DegreePlan().Terms()[n-1].Code());typeof stringRemovingTermProcessing=="string"&&f.LoadingMessage(stringRemovingTermProcessing);f.isLoading(!0);f.removeTermDialogIsOpen(!1);r.removeTerm(f.DegreePlan().PersonId(),f.removingTerm().Code(),ko.mapping.toJSON(f.DegreePlan().DegreePlanDto)).then(function(n){if(f.degreePlanChanged(!0),t!=null){var i=ko.utils.arrayFirstDeprecated(f.DegreePlan().Terms(),function(n){return n.Code()==t});f.currentTermCode(i.Code())}f.repositorySuccessHandler(n);f.removingTerm(null)}).catch(function(n){f.repositoryErrorHandler(n)}).then(f.updateCompleted,f.updateCompleted)}};this.CancelRemoveTerm=function(){f.removeTermDialogIsOpen(!1);f.addingTerm(null)};this.addTermDialogIsOpen=ko.observable(!1);this.ShowAddTermDialog=function(){var n=f.DegreePlan().UnplannedTerms();try{n.length==1?($("#addTermId").attr("selectedIndex",0),$("#schedplan-addtermformaddbutton").trigger("click")):f.addTermDialogIsOpen(!0)}catch(t){$("#notificationHost").notificationCenter("addNotification",{message:Ellucian.Student.PlanViewModelMessages.noTermsCanBeAdded,type:"error"})}};this.CommitAddTerm=function(){f.addingTerm()!=null&&(typeof stringAddingTermProcessing=="string"&&f.LoadingMessage(stringAddingTermProcessing),f.isLoading(!0),f.addTermDialogIsOpen(!1),r.addTerm(f.DegreePlan().PersonId(),f.addingTerm(),ko.mapping.toJSON(f.DegreePlan().DegreePlanDto)).then(function(n){f.repositorySuccessHandler(n);f.addingTerm(null);for(var t=0;t<f.DegreePlan().Terms().length;t++)if(f.DegreePlan().Terms()[t]!==null&&f.DegreePlan().Terms()[t].Code()===n.TermToShow){f.currentTermCode(f.DegreePlan().Terms()[t].Code());break}f.isShowingSchedule?f.ShowScheduleTerm(f.currentTermCode()):f.ScrollToTerm(!0)}).catch(function(n){f.repositoryErrorHandler(n)}).then(f.updateCompleted,f.updateCompleted))};this.CancelAddTerm=function(){f.addTermDialogIsOpen(!1);f.addingTerm(null)};this.RequisiteWarningLinkHandler=function(n){var t=f.searchUrl();if(requisiteModel.prototype.isPrototypeOf(n)?t+="?requirement="+encodeURIComponent(n.RequisiteId())+"&requirementText="+encodeURIComponent(n.DisplayText()):corequisiteCourseModel.prototype.isPrototypeOf(n)?t+="?CourseIds="+encodeURIComponent(n.Id())+"&requirementText="+encodeURIComponent(n.DisplayMessage()):corequisiteSectionModel.prototype.isPrototypeOf(n)&&(t+="?SectionIds="+encodeURIComponent(n.SectionIds())+"&requirementText="+encodeURIComponent(n.DisplayMessage())),f.searchAsync())$.ajax({url:t,type:"GET",contentType:jsonContentType,dataType:"json",success:function(n){account.handleInvalidSessionResponse(n)||(f.catalogResult(n),f.catalogResultsDisplayed(!0),advisingTabsViewModelInstance.activeTabId("advising-catalog"))},error:function(n){n.status!=0&&$("#notificationHost").notificationCenter("addNotification",{message:"Unable to retrieve search results.",type:"error"})},complete:function(){}});else{window.location=t;return}return!1};this.searchCatalogForPlaceholder=function(n,t){var i=f.searchUrl();if(t!==null&&(t.AcademicRequirementCode()&&(i+="?requirement="+encodeURIComponent(t.AcademicRequirementCode())),t.SubrequirementId()&&(i+="&Subrequirement="+encodeURIComponent(t.SubrequirementId())),t.GroupId()&&(i+="&Group="+encodeURIComponent(t.GroupId()))),n&&(i+="&requirementText="+encodeURIComponent(n)),f.searchAsync())$.ajax({url:i,type:"GET",contentType:jsonContentType,dataType:"json",success:function(n){account.handleInvalidSessionResponse(n)||(closeCourseDetails(),f.catalogResult(n),f.catalogResultsDisplayed(!0),advisingTabsViewModelInstance.activeTabId("advising-catalog"),document.body.scrollTop=0,document.documentElement.scrollTop=0)},error:function(n){n.status!=0&&$("#notificationHost").notificationCenter("addNotification",{message:Ellucian.DegreePlans.Resources.UnableToSearchCatalogMessage,type:"error"})},complete:function(){}});else{window.location=i;return}return!1};this.CheckIfPaymentRequired=function(){paymentRequiredActionUrl!==""&&f.isProxyUser()===!1?$.ajax({url:paymentRequiredActionUrl,type:"GET",contentType:jsonContentType,dataType:"json",success:function(n){account.handleInvalidSessionResponse(n)||(n.length>0?f.IsRegistrationPaymentRequired(!0):f.IsRegistrationPaymentRequired(!1))},error:function(){f.IsRegistrationPaymentRequired(!1)},complete:function(){}}):f.IsRegistrationPaymentRequired(!1)};this.ImmediatePayment=function(){if(immediatePaymentActionUrl){var n=f.currentTermCode(),t=f.selectedTab(),i=window.location.href,r={ReturnUrl:i,TermId:n,SelectedTab:t};ko.utils.postJson(immediatePaymentActionUrl,{model:r,__RequestVerificationToken:$('input[name="__RequestVerificationToken"]').val()})}};this.toggleSectionFilters=function(n){!n.availableSectionsRetrieved()&&n.PlannedCourses().length>0&&f.getAvailableSections();n.showingFilters(!n.showingFilters())};this.filterClickHandler=function(n){n.Selected(!n.Selected());f.ResetToNoCoursesOpen();f.getAvailableSections()};this.clearDialogTerms=ko.observableArray();this.clearTermSelected=ko.computed(function(){if(typeof f.clearDialogTerms()=="undefined"||f.clearDialogTerms().length===0)return!1;for(var n=0;n<f.clearDialogTerms().length;n++)if(f.clearDialogTerms()[n].selected())return!0;return!1});this.clearPlannedTermDialogIsOpen=ko.observable(!1);this.ShowClearPlannedTermDialog=function(){f.removingCourseTerm(f.currentTermCode());f.removingCourseTermTitle(f.currentTerm().Description());f.clearDialogTerms.push({termCode:f.currentTermCode(),description:f.currentTerm().Description(),selected:ko.observable(!0)});f.clearPlannedTermDialogIsOpen(!0)};this.ShowClearPlannedTermsDialog=function(){var n,t;for(f.DegreePlan().ClearableTerms().length==1&&(f.removingCourseTerm(f.DegreePlan().ClearableTerms()[0].Code()),f.removingCourseTermTitle(f.DegreePlan().ClearableTerms()[0].Description())),n=0;n<f.DegreePlan().ClearableTerms().length;n++)t=f.DegreePlan().ClearableTerms()[n],f.clearDialogTerms.push({termCode:f.DegreePlan().ClearableTerms()[n].Code(),description:f.DegreePlan().ClearableTerms()[n].Description(),selected:ko.observable(!0)});f.clearPlannedTermDialogIsOpen(!0)};this.CancelClearPlannedTerms=function(){f.clearPlannedTermDialogIsOpen(!1);f.removingCourseTerm(null);f.removingCourseTermTitle("");f.clearDialogTerms([])};this.CommitClearPlannedCourses=function(){for(var r,i=[],t=f.clearDialogTerms(),n=0;n<t.length;n++)r=t[n],t[n].selected()&&i.push(t[n].termCode);f.clearDialogTerms([]);f.ClearPlannedCourses(i);f.clearPlannedTermDialogIsOpen(!1)};this.ClearPlannedCourses=function(n){n.length>0&&(typeof stringClearPlannedCourseProcessing=="string"&&f.LoadingMessage(stringClearPlannedCourseProcessing),f.isLoading(!0),f.clearPlannedTermDialogIsOpen(!1),r.clearPlan(f.DegreePlan().PersonId(),n,ko.mapping.toJSON(ko.utils.unwrapObservable(f.DegreePlan).DegreePlanDto)).then(function(n){f.degreePlanChanged(!0);f.repositorySuccessHandler(n)}).catch(function(n){f.repositoryErrorHandler(n)}).then(s,s))};s=function(){f.removingCourseTerm(null);f.removingCourseTermTitle("");f.updateCompleted()};this.atLeastOneSectionToAddIsFullOrHasWaitlist=ko.pureComputed(function(){var n=ko.utils.arrayFilter(f.dropDialogAddSections(),function(n){return n.sectionIsFull()===!0||n.sectionWaitlistAvailable()===!0});return n.length>0});this.atLeastOneSectionToAddRequiresAuthorizationCode=ko.pureComputed(function(){var n=ko.utils.arrayFilter(f.dropDialogAddSections(),function(n){return n.requiresAuthorization===!0});return n.length>0});this.dropDialogAddSectionsHeadingCss=ko.pureComputed(function(){return f.atLeastOneSectionToAddRequiresAuthorizationCode()||f.atLeastOneSectionToAddIsFullOrHasWaitlist()?"esg-col-sm-6":"esg-col-sm-12"});this.dropDialogDropSectionsHeadingCss=ko.pureComputed(function(){return f.DropReasonsConfiguration&&f.DropReasonsConfiguration.PromptForDropReason()?"esg-col-sm-6":"esg-col-sm-12"});this.dropDialogAddSectionsBorderBottomCss=ko.pureComputed(function(){return f.isProxyUser()&&f.canSkipWaitlist()?"esg-section--border-bottom esg-section--margin-bottom":""});this.showSelectDropReasonHeader=ko.pureComputed(function(){if(f.dropDialogDropSections()&&f.dropDialogDropSections().length>0){var n=ko.utils.arrayFilter(f.dropDialogDropSections(),function(n){return n&&n.plannedCourse&&n.plannedCourse().Section&&n.plannedCourse().Section.ShowDropReasonDropdown()===!0?!0:!1});return n.length>0}return!1});this.dropSectionButtonEnabled=ko.computed(function(){return f.droppedSectionsWithoutDropReason().length>0?(console.log((new Date).toJSON()+": You must enter a drop reason for all course sections that you are dropping before you can click "+f.dropDialogButtonLabel()),!1):f.addedSectionsWithoutAuthorizationCodeWhenRequired().length>0?(console.log((new Date).toJSON()+": You must enter authorization codes for all course sections that require one before you can click "+f.dropDialogButtonLabel()),!1):f.numberOfSelectedItemsToAddDrop()===0?(console.log((new Date).toJSON()+": You must select at least one course section to drop or add before you can click "+f.dropDialogButtonLabel()),!1):f.showIntentToWithdrawPrompt()!==!0||ko.unwrap(f.intentToWithdraw)?!0:(console.log((new Date).toJSON()+": You must answer the question '"+Ellucian.DegreePlans.Resources.IntendToWithdrawQuestionText+"' before you can click "+f.dropDialogButtonLabel()),!1)});this.ModifiedAdvisingContacts=ko.observableArray();c={create:function(n){return new function(){this.selected=ko.observable("");this.toggle=function(){this.selected()===""?this.selected("esg-icon__container--fill"):this.selected("")};ko.mapping.fromJS(n.data,{},this)}}};this.selected=ko.observable("");this.toggle=function(){this.selected()===""?this.selected("esg-icon__container--fill"):this.selected("")};this.RefreshRegistrationEligibility=function(n){return typeof refreshingRegistrationEligibility=="string"&&f.LoadingMessage(refreshingRegistrationEligibility),f.isLoading(!0),f.termEligibility.removeAll(),isNullOrEmpty(n)&&(n=typeof f.DegreePlan()!="undefined"?f.DegreePlan().PersonId():""),r.refreshRegistrationEligibility(n).then(function(n){var t=n.RegistrationEligibility,r,i;if(ko.mapping.fromJS(n,planMapping,f),Ellucian.Student.HasStudentPlanning&&ko.mapping.fromJS(f.DegreePlan().AdvisingContacts(),c,f.ModifiedAdvisingContacts),!account.handleInvalidSessionResponse(n)){for(t.Notifications.length>0&&$("#notificationHost").notificationCenter("addNotification",t.Notifications),r=[],i=0;i<t.Terms.length;i++)r.push(t.Terms[i]);f.termEligibility(r);f.hasRegistrationOverride(t.HasRegistrationOverride)}}).catch(function(){$("#notificationHost").notificationCenter("addNotification",{message:Ellucian.RegistrationEligibility.Resources.UnableToDetermineRegistrationEligibility,type:"error"})}).then(f.updateCompleted,f.updateCompleted)};this.studentPetitionsWaiversInstance=new StudentPetitionsWaiversViewModel;this.studentGradeIdsInstance=new StudentGradeIdsViewModel;this.repositorySuccessHandler=function(n,t){var i,e,r,u;if(n){for(i=f.currentTermCode(),e=!0,r=0;r<n.Terms.length;r++)i===n.Terms[r].Code&&(e=!1);e===!0&&(i=n.TermToShow,f.currentTermCode(i));ko.mapping.fromJS(n,planMapping,f.DegreePlan);f.isMobile.valueHasMutated();setTimeout(function(){var n,t;if($("#notificationHost").notificationCenter("reset"),f.DegreePlan().Notifications().length>0)for(n=0;n<f.DegreePlan().Notifications().length;n++)t=ko.toJS(f.DegreePlan().Notifications()[n]),$("#notificationHost").notificationCenter("addNotification",t)},350);u=ko.utils.arrayFirstDeprecated(f.DegreePlan().Terms(),function(n){return n.Code()==i});typeof u!="undefined"&&u!==null&&f.currentTermCode(u.Code());Ellucian.Student.HasStudentPlanning&&(f.updateEvaluations(!0),f.updatePlanningTerms(f.DegreePlan().AvailableSamplePlanTerms()),f.updateAvailablePlanningTerms(f.DegreePlan().AvailablePlanningTerms()))}t&&t.length>0&&setTimeout(function(){for(var n=0;n<t.length;n++)$("#notificationHost").notificationCenter("addNotification",{message:t[n],type:"error"})},350)};this.repositoryErrorHandler=function(n){n.hasOwnProperty("isStale")&&n.isStale===!0&&h(n.message);var t=n.hasOwnProperty("message")?n.message:n;$("#notificationHost").notificationCenter("addNotification",{message:t,type:"error"})};this.addTermButton={id:"schedplan-addtermformaddbutton",title:Ellucian.DegreePlans.Resources.UiAddTermPopupButtonText,aria:Ellucian.DegreePlans.Resources.UiAddTermPopupButtonAriaLabel,isPrimary:!0,callback:f.CommitAddTerm};this.addTermCancelButton={id:"schedplan-addtermformcancelbutton",title:Ellucian.DegreePlans.Resources.UiAddTermCancelButtonText,aria:Ellucian.DegreePlans.Resources.UiAddTermCancelButtonAriaLabel,isPrimary:!1,callback:f.CancelAddTerm};this.clearTermButton={id:"dp-clearterm-remove",title:Ellucian.DegreePlans.Resources.RemoveItemButtonText,aria:Ellucian.DegreePlans.Resources.RemoveTermPlannedCoursesButtonAriaLabel,isPrimary:!0,callback:f.CommitClearPlannedCourses};this.clearTermCancelButton={id:"dp-clearterm-cancel",title:Ellucian.DegreePlans.Resources.RemoveItemCancelButtonText,aria:Ellucian.DegreePlans.Resources.RemoveTermPlannedCoursesCancelButtonAriaLabel,enabled:f.clearTermSelected,isPrimary:!1,callback:f.CancelClearPlannedTerms};this.dropSectionButton={id:"dp-dropsection-commit",title:f.dropDialogButtonLabel,aria:f.dropDialogButtonAriaLabel,enabled:f.dropSectionButtonEnabled,isPrimary:!0,callback:f.CommitDrop};this.dropSectionCancelButton={id:"dp-dropsection-cancel",title:Ellucian.DegreePlans.Resources.DropDialogCancel,aria:f.dropDialogCancelAriaLabel,isPrimary:!1,callback:f.CancelDropSection};this.removeTermButton={id:"dp-removeterm-remove",title:Ellucian.DegreePlans.Resources.RemoveItemButtonText,aria:Ellucian.DegreePlans.Resources.RemoveTermAria,isPrimary:!0,callback:f.CommitRemoveTerm};this.removeTermCancelButton={id:"dp-removeterm-cancel",title:Ellucian.DegreePlans.Resources.RemoveItemCancelButtonText,aria:Ellucian.DegreePlans.Resources.CancelRemoveTermTextAriaLabel,isPrimary:!1,callback:f.CancelRemoveTerm};this.submitAuthorizationCodeButton={id:"dp-submit-authorization-code",title:Ellucian.DegreePlans.Resources.SubmitAuthorizationCodeButtonLabel,aria:Ellucian.DegreePlans.Resources.SubmitAuthorizationCodeButtonAriaLabel,enabled:f.canSubmitAuthorizationCode,isPrimary:!0,callback:f.submitAuthorizationCode};this.cancelAuthorizationCodeButton={id:"dp-cancel-authorization-code",title:Ellucian.SharedComponents.ButtonLabels.buttonTextCancel,aria:Ellucian.DegreePlans.Resources.CancelAuthorizationCodeButtonAriaLabel,isPrimary:!1,callback:f.cancelAuthorizationCode};this.removeCourseRemoveButton={id:"schedplan-removecourse-remove",title:Ellucian.DegreePlans.Resources.RemoveItemButtonText,aria:Ellucian.DegreePlans.Resources.RemoveCourseButtonAriaLabel,isPrimary:!0,callback:f.commitRemoveCourse};this.removeCourseCancelButton={id:"schedplan-removecourse-cancel",title:Ellucian.DegreePlans.Resources.RemoveItemCancelButtonText,aria:Ellucian.DegreePlans.Resources.CancelRemoveCourseButtonAriaLabel,isPrimary:!1,callback:f.CancelRemoveCourse}};Ellucian.Student.PlanningPlanViewModel=function(n,t,i,r){var u=this;Ellucian.Student.BasePlanViewModel.call(u,n,t,i,r);this.samplePlanLoaded=ko.observable(!1).subscribeTo("samplePlanLoaded");this.samplePlanLoaded.subscribe(function(n){n===!0&&(i.removeSessionKeys(u.DegreePlan().PersonId()),u.degreePlanChanged(!0))});this.ScrollToTerm=function(n){var t=$("#dp-plans").css("overflow-y")==="hidden";$(".dp-termouter").each(function(){var i,f,r;if(u.DegreePlan()===null||typeof u.DegreePlan()=="undefined")return!1;i=$(this).find(".dp-termlisting").children(":first");f=i.text();f===u.currentTerm().Description()&&(i=i.parent(),t===!0?(r=$("#dp-plans").scrollLeft()+$(this).position().left-$("#scroll-left").outerWidth(!0),$("#dp-plans").animate({scrollLeft:r},u.ToggleScrollButtons)):(r=$("#dp-plans").scrollTop()+$(this).position().top,$("#dp-plans").animate({scrollTop:r},u.ToggleScrollButtons)),n===!0&&(this.FocusInTerm=function(n){if(n!==null)try{var t=!1,i=n.parent().next().children();i.length>0&&(i.first().find(".dp-planneditemlink").first().focus(),t=!0);t||n.focus()}catch(r){}}))})};u.tabWrapperClass=ko.pureComputed(function(){var n="esg-col-sm-12";return u.showArchivedPlans()===!0&&(n="esg-col-sm-6"),n});u.showArchivedPlans=ko.observable(!1);Ellucian.Student.HasStudentPlanning&&(this.planArchiveInstance=new planArchiveViewModel(!n),this.getDegreePlanArchives=function(){$.ajax({url:getPlanArchivesUrl+"?degreePlanId="+u.DegreePlan().Id(),type:"GET",contentType:jsonContentType,dataType:"json",beforeSend:function(){u.planArchiveInstance.isLoading(!0);u.planArchiveInstance.isLoaded(!1);u.planArchiveInstance.archives.removeAll()},success:function(n){account.handleInvalidSessionResponse(n)||u.planArchiveInstance.archives.pushAll(n)},error:function(n){n.status!=0&&$("#notificationHost").notificationCenter("addNotification",{message:Ellucian.DegreePlans.Resources.PlanArchiveErrorMessage,type:"error"})},complete:function(){u.planArchiveInstance.isLoading(!1);u.planArchiveInstance.isLoaded(!0)}})},this.ShowPlanArchivePanel=ko.observable(!1),this.ShowArchivePanelAction=ko.observable(!0),this.showSplitPanel=function(){u.planArchiveInstance.isLoaded()!==!0&&u.getDegreePlanArchives();u.showArchivedPlans(!0)},this.hideSplitPanel=function(){u.showArchivedPlans(!1)});this.isReviewRequestDisable=ko.computed(function(){var n=ko.utils.unwrapObservable(u.DegreePlan);return n!=null&&ko.unwrap(n.AdviseByOfficeFlag)&&!u.isProxyUser()&&n.IsReviewRequestDisabled()?!0:!1});this.requestReview=function(){u.LoadingMessage(Ellucian.Student.PlanViewModelMessages.requestingReviewMessage);u.isLoading(!0);i.requestReview(u.DegreePlan().PersonId(),ko.mapping.toJSON(u.DegreePlan().DegreePlanDto)).then(function(n){u.repositorySuccessHandler(n)}).catch(function(n){u.repositoryErrorHandler(n)}).then(u.updateCompleted,u.updateCompleted)};this.updateEvaluations=ko.observable().syncWith("updateEvaluations");this.UpdateCourse=function(n){if(n!==null&&!isNullOrEmpty(n.newTerm)){if(n.oldTerm===n.newTerm){closeCourseDetails();return}typeof stringUpdatingCourseProcessing=="string"&&u.LoadingMessage(stringUpdatingCourseProcessing);closeCourseDetails();u.isLoading(!0);i.updateCourse(u.DegreePlan().PersonId(),n.courseId,n.oldTerm,n.newTerm,ko.mapping.toJSON(u.DegreePlan().DegreePlanDto)).then(function(n){u.degreePlanChanged(!0);u.repositorySuccessHandler(n)}).catch(function(n){u.repositoryErrorHandler(n)}).then(u.updateCompleted,u.updateCompleted)}};this.AddAdvisingNoteFromStudent=function(n){if(Ellucian.Student.HasStudentPlanning&&!isNullOrEmpty(n)){var t=null;try{t=u.DegreePlan().DegreePlanDto;(typeof t=="undefined"||t==="")&&(t=null)}catch(r){t=null}typeof stringAddingAdvisingNote=="string"&&u.LoadingMessage(stringAddingAdvisingNote);u.isLoading(!0);i.submitNote(u.DegreePlan().PersonId(),n,"STUDENT",ko.mapping.toJSON(t)).then(function(n){ko.mapping.fromJS(n,planMapping,u.DegreePlan);u.AdvisingNotes("");$("#advising-notes-compose-box").trigger("focus");$("#notificationHost").notificationCenter("addNotification",{message:Ellucian.Student.PlanViewModelMessages.YourMessageHasBeenSavedText,type:"success",flash:!1})}).catch(function(n){u.repositoryErrorHandler(n)}).then(u.updateCompleted,u.updateCompleted)}};this.scrollingTimelineWait=!1;this.ScrollTerms=function(n){if(u.scrollingTimelineWait!==!0){u.scrollingTimelineWait=!0;setTimeout(function(){u.scrollingTimelineWait=!1},205);var t=$(".dp-termwrapper").children(".dp-termouter:first-child").outerWidth(!0);n=="left"?$("#dp-plans").animate({scrollLeft:$("#dp-plans").scrollLeft()-t},"fast",u.ToggleScrollButtons):n=="right"&&$("#dp-plans").animate({scrollLeft:$("#dp-plans").scrollLeft()+t},"fast",u.ToggleScrollButtons)}};this.LeftScrollEnabled=ko.observable(!0);this.RightScrollEnabled=ko.observable(!0);this.ToggleScrollButtons=function(){var n=!0,t=!0,i,r;$("#dp-plans").HasScrollBar()===!1&&(n=!1,t=!1);var f=$("#dp-plans").scrollLeft()+$("#scroll-left").outerWidth(!0),e=$("#dp-plans").width()-$("#scroll-right").outerWidth(!0),o=$(".dp-termwrapper").children(".dp-termouter:first-child").position().left;o>=f&&(n=!1);i=$(".dp-termwrapper").children(".dp-termouter:last-child").position().left;r=i+$(".dp-termwrapper").children(".dp-termouter:last-child").width();r<=e&&(t=!1);u.LeftScrollEnabled(n);u.RightScrollEnabled(t)};this.draggableItems="Course";this.ProcessCourseDrop=function(n,t){if(n){var i={courseId:n.Id(),oldTerm:n.TermCode(),newTerm:t.Code()};u.UpdateCourse(i)}};this.ProcessDragEnter=function(n,t,i){var f=!1,r=!1,e=!1;return ko.utils.arrayFirstDeprecated(u.availablePlanningTerms(),function(n){return n.Code()===i.Code()&&(r=!0),r}),t.IsPlanned()===!0&&t.HasSection()===!1&&t.IsProtected()===!1&&(e=!0),e===!0&&r===!0&&(f=!0),f};this.ScrollTermHover=function(n,t,i){u.ScrollTerms(i)};this.firstTermWithCourse=ko.computed({read:function(){if(u.DegreePlan()){var n=0;return ko.utils.arrayFirstDeprecated(u.DegreePlan().Terms(),function(t,i){if(t.Code()===u.currentTermCode())return n=i,!0}),ko.utils.arrayFirstDeprecated(u.DegreePlan().Terms().slice(n,u.DegreePlan().Terms().length),function(n){return ko.utils.arrayFirstDeprecated(n.PlannedCourses(),function(n){if(n.IsPlanned()===!0&&n.HasSection()===!1&&n.IsProtected()===!1)return n})})}},deferEvaluation:!0});this.firstDraggableCourse=ko.computed({read:function(){if(u.firstTermWithCourse())return ko.utils.arrayFirstDeprecated(u.firstTermWithCourse().PlannedCourses(),function(n){if(n.IsPlanned()===!0&&n.HasSection()===!1&&n.IsProtected()===!1)return n})},deferEvaluation:!0});this.getDragCourseMarkTopPx=function(n){return-5+50*n};this.getDragCourseMarkLeftPx=function(n){var t=0,i=0;return ko.utils.arrayFirstDeprecated(u.DegreePlan().Terms(),function(n,t){if(n.Code()===u.currentTermCode())return i=t,!0}),ko.utils.arrayFirstDeprecated(u.DegreePlan().Terms().slice(i,u.DegreePlan().Terms().length),function(i,r){if(i.Code()===n)return t=r,!0}),41+293*t};this.hideCoachMark=ko.observable(!0);this.showCoachMarkOnce=!0;this.checkCoachMarkShown=function(){if(this.showCoachMarkOnce===!0)this.showCoachMarkOnce=!1;else return!0};this.dismissCoachMark=function(){u.hideCoachMark(!1);var n={preferencesJson:ko.toJSON({HasViewedTimelineDragCoachmark:!0})};return u.saveCoachMarkStatus(n),!0};this.getCoachMarkStatus=function(){$.ajax({url:getHasViewedCoachmark,type:"GET",contentType:jsonContentType,dataType:"json",success:function(n){u.processCoachMarkResponse(n)},error:function(){u.hideCoachMark(!0)},complete:function(){}})};this.saveCoachMarkStatus=function(n){$.ajax({url:saveHasViewedCoachmark,type:"POST",contentType:jsonContentType,dataType:"json",data:JSON.stringify(n),success:function(n){u.processCoachMarkResponse(n)},error:function(){u.hideCoachMark(!0)},complete:function(){}})};this.processCoachMarkResponse=function(n){n!==null&&n.HasViewedTimelineDragCoachmark!==null&&u.hideCoachMark(n.HasViewedTimelineDragCoachmark==="true")}};$.fn.HasScrollBar=function(){var n=$(this)[0],t;return n?(t=!1,(n.clientHeight<n.scrollHeight||n.clientWidth<n.scrollWidth)&&(t=!0),t):!1};BulkSectionsToDropOrAdd=function(n,t,i,r,u,f){typeof f=="undefined"&&(f=!1);var e=this;this.selected=ko.observable(n=="Drop"&&(i||r==t));this.plannedCourse=ko.observable(t);this.title=t.TitleDisplay();this.message=i?Ellucian.Course.SectionDetails.stringCoreqFormatString.format(r.DropTitleDisplay()):"";this.id=n+t.TitleDisplay();this.labelId="label"+t.TitleDisplay();this.selectedWaitlist=ko.observable(!1);n=="Drop"?(this.text=t.DropTitleDisplay(),this.creditsCeusText=Ellucian.Course.SectionDetails.stringCreditsCeusFormatString.format(t.AcademicHistory.CreditsCeusDisplay()),this.isAvailableForDrop=t.CanDropSection(),this.dropReasonDropdownId="drop-reason-"+this.id,this.dropReasonDropdownLabelId=this.dropReasonDropdownId+"-label",this.PromptForIntentToWithdrawWhenDropping=t.Section.PromptForIntentToWithdrawWhenDropping()):n=="Add"&&(this.text=t.TitleDisplay(),this.creditsCeusText=Ellucian.Course.SectionDetails.stringCreditsCeusFormatString.format(t.CreditsCeusDisplay()),this.requiresAuthorization=!!t.RequiresAddAuthorizationCode(),this.canBeSelected=!u||u&&!t.RequiresAddAuthorizationCode(),this.authorizationCode=ko.observable(),this.requiredAuthorizationMissing=ko.computed(function(){return e.selected()===!0&&e.requiresAuthorization&&isNullOrEmpty(e.authorizationCode())?!0:!1}),this.authorizationCodeId="dp-authorization-code-"+t.Section.Id(),this.authorizationCodeLabel="dp-authorization-code-label-"+t.Section.Id());this.dropReason=ko.observable(null);this.dropReasonToValidate=ko.computed(function(){return e.selected()===!0&&t.Section.RequireDropReason()&&isNullOrEmpty(e.dropReason())&&n=="Drop"?!0:!1});this.selected.subscribe(function(){e.selected()===!1&&e.dropReason(null)});this.sectionIsFull=ko.computed(function(){return t.Section.Available()!==null&&t.Section.Available()<=0&&ko.unwrap(t.Section.WaitlistAvailable)===!1?!0:!1});this.isWaitlisted=ko.computed(function(){return ko.unwrap(t.SectionWaitlistStatus)!==null&&ko.unwrap(t.SectionWaitlistStatus)!=="NotWaitlisted"?!0:!1});this.sectionWaitlistAvailable=ko.computed(function(){return t.Section.Available()!==null&&t.Section.Available()<=0&&ko.unwrap(t.Section.WaitlistAvailable)&&ko.unwrap(t.SectionWaitlistStatus)==="NotWaitlisted"?!0:!1});this.canBeWaitlisted=ko.computed(function(){return e.selected()===!0&&e.sectionWaitlistAvailable()?!0:(e.selectedWaitlist(!1),!1)});this.showAddToWaitlistOption=ko.computed(function(){return u&&f&&e.sectionWaitlistAvailable()?!0:!1});this.showSectionIsFullMessage=ko.computed(function(){return u&&f&&e.sectionIsFull()?!0:!1});this.showSectionHasWaitlistMessage=ko.computed(function(){return u&&f&&e.sectionWaitlistAvailable()?!0:!1});this.showStudentIsWaitlistedMessage=ko.computed(function(){return u&&f&&e.isWaitlisted()?!0:!1});this.showAuthorizationMessage=ko.computed(function(){return u&&f&&ko.unwrap(t.HasAuthorization)?!0:!1})};Ellucian.Student.PlanViewModel=function(n,t,i,r){return Ellucian.Student.HasStudentPlanning?new Ellucian.Student.PlanningPlanViewModel(n,t,i,r):new Ellucian.Student.BasePlanViewModel(!1,t,i,r)};Ellucian.Student.FullCalendarModel=function(){var n=this,t=[],r="preview-normal-cal-item",u="preview-warning-cal-item",f="preview-error-cal-item",i="pre_";this.queuedRepaints={};this.RepaintAvailableSections=function(t){typeof t!="undefined"&&(t.Id()in n.queuedRepaints&&clearTimeout(n.queuedRepaints[t.Id()]),n.queuedRepaints[t.Id()]=setTimeout(function(){n.RemoveAvailableSectionsOnCalendar(t);n.ShowAvailableSectionsOnCalendar(t);delete n.queuedRepaints[t.Id()]},50))};this.ResetToNoCoursesOpen=function(){if(n.currentTerm()!=null)for(var t=0;t<n.currentTerm().PlannedCourses().length;t++)n.currentTerm().PlannedCourses()[t].DisplayingAvailableSections()&&(n.currentTerm().PlannedCourses()[t].DisplayingAvailableSections(!1),n.RemoveAvailableSectionsOnCalendar(n.currentTerm().PlannedCourses()[t]));$(".availSections").hide();typeof prevTerm!="undefined"&&typeof prevTerm.PlannedCourses=="function"&&ko.utils.arrayForEach(prevTerm.PlannedCourses(),function(t){t.DisplayingAvailableSections&&(t.DisplayingAvailableSections(!1),n.RemoveAvailableSectionsOnCalendar(t))})};this.getAvailableSections=function(i,r){var u,o,s,e,f,h,c,l,a,v,y;if(n.currentTermCode()=="NonTermPlaceholder"){n.currentTerm().availableSectionsRetrieved(!0);return}for(u={},u.TermCode=n.currentTermCode(),o=[],s=n.currentTerm().PlannedCourses(),e=0;e<s.length;e++)f=s[e],o[e]=f.HasSection()||f.HasRegisteredSection()?{CourseId:f.Id(),SectionId:f.Section.Id()}:{CourseId:f.Id()};u.PlannedCourses=o;h=ko.utils.arrayFilter(n.currentTerm().locationFilters(),function(n){return n.Selected()==!0});u.Location=h?h.map(function(n){return n.Value()}).join(","):null;c=ko.utils.arrayFilter(n.currentTerm().facultyFilters(),function(n){return n.Selected()==!0});u.Faculty=c?c.map(function(n){return n.Value()}).join(","):null;l=ko.utils.arrayFirstDeprecated(n.currentTerm().availabilityFilters(),function(n){return n.Selected()==!0});u.AvailableOnly=l?l.Value():null;a=ko.utils.arrayFilter(n.currentTerm().dayOfWeekFilters(),function(n){return n.Selected()==!0});u.Day=a?a.map(function(n){return n.Value()}).join(","):null;v=ko.utils.arrayFirstDeprecated(n.currentTerm().timeOfDayFilters(),function(n){return n.Selected()==!0});u.TimeCategory=v?v.Value():null;y=ko.utils.arrayFirstDeprecated(n.currentTerm().topicFilters(),function(n){return n.Selected()==!0});u.Topic=y?y.Value():null;$.ajax({url:getAvailableSectionsActionUrl,data:JSON.stringify(u),type:"POST",contentType:jsonContentType,dataType:"json",beforeSend:function(){typeof Ellucian.Student.PlanViewModelMessages.getAvailableSections=="string"&&n.LoadingMessage(Ellucian.Student.PlanViewModelMessages.getAvailableSections);n.isLoading(!0)},success:function(u){var s,h,e,o,f;if(!account.handleInvalidSessionResponse(u)){for(f=0;f<u.AvailableSectionResults.length;f++)for(s=u.AvailableSectionResults[f],h=ko.utils.arrayFilter(n.currentTerm().PlannedCourses(),function(n){return n.Id()==s.CourseId}),e=0;e<h.length;e++)h[e].AvailableSections(s.AvailableSections);for(n.allSections=ko.observableArray(),f=0;f<u.AvailableSectionResults.length;f++)ko.utils.arrayPushAll(n.allSections(),u.AvailableSectionResults[f].AvailableSections);for(n.currentTerm().availabilityFilters.removeAll(),f=0;f<u.Availability.length;f++)n.currentTerm().availabilityFilters.push(new Filter(u.Availability[f]));for(n.currentTerm().locationFilters.removeAll(),f=0;f<u.Locations.length;f++)o=ko.utils.arrayFirstDeprecated(n.allSections(),function(n){return n.Location==u.Locations[f].Value}),o&&n.currentTerm().locationFilters.push(new Filter(u.Locations[f]));for(n.currentTerm().dayOfWeekFilters.removeAll(),f=0;f<u.DaysOfWeek.length;f++)n.currentTerm().dayOfWeekFilters.push(new Filter(u.DaysOfWeek[f]));for(n.currentTerm().timeOfDayFilters.removeAll(),f=0;f<u.TimeOfDay.length;f++)n.currentTerm().timeOfDayFilters.push(new Filter(u.TimeOfDay[f]));for(n.currentTerm().topicFilters.removeAll(),f=0;f<u.Topics.length;f++)o=ko.utils.arrayFirstDeprecated(n.allSections(),function(n){return n.TopicCode==u.Topics[f].Value}),o&&n.currentTerm().topicFilters.push(new Filter(u.Topics[f]));for(n.currentTerm().facultyFilters.removeAll(),f=0;f<u.Faculty.length;f++)n.currentTerm().facultyFilters.push(new Filter(u.Faculty[f]));if(n.currentTerm().availableSectionsRetrieved(!0),typeof i!="undefined")n.exposeAvailableSections(i,r);else for(f=0;f<t.length;f++)t[f]!=null&&n.exposeAvailableSections(t[f],r)}},error:function(t){t.status==409?updateFailedStaleData():$("#notificationHost").notificationCenter("addNotification",{message:Ellucian.Student.PlanViewModelMessages.unableToGetAvailableSections.format(n.currentTermCode()),type:"error"})},complete:function(){n.isLoading(!1)}})};this.calendarAvaialbleSectionsEvents=ko.observableArray([]);this.calendarEventToUpdate=ko.observable(null);this.currentTermEvents=function(){var y=[],e=n.currentTerm(),f,s,v,o,i,u,r,c,l,a;if(e!==null)for(f=0;f<e.PlannedCourses().length;f++)if(s=e.PlannedCourses()[f],ko.utils.unwrapObservable(s.IsDropped)!==!0){var p=e.PlannedCourses()[f],t=e.PlannedCourses()[f].Section,h=ko.utils.unwrapObservable(e.PlannedCourses()[f].AcademicHistory),w=!1;if(t!=null&&typeof t!="function"&&ko.utils.unwrapObservable(h.Section)==null)for((t.MeetingTimeConflict()||!t.IsActive()||t.Available()!=null&&t.Available()<=0)&&(w=!0),o=0;o<t.PlannedMeetings().length;o++)for(i=t.PlannedMeetings()[o],u=0;u<i.Days().length;u++)i.StartTimeHour()==0&&i.EndTimeHour()==0||(r=new Date,r.setDate(r.getDate()-(r.getDay()-i.Days()[u])),r.setHours(i.StartTimeHour(),i.StartTimeMinute()),c=new Date(r),c.setHours(i.EndTimeHour(),i.EndTimeMinute()),l=i.InstructionalMethod(),a={id:ko.utils.unwrapObservable(t.Id)+"_"+u,groupId:ko.utils.unwrapObservable(t.Id),title:t.FormattedDisplay(),allDay:!1,start:r,end:c,classNames:w?"planned-conflict-cal-item":"planned-cal-item",sectionId:t.Id(),allowRemove:n.canEdit()&&!(e.PlannedCourses()[f].SectionWaitlistStatus()=="Active"||e.PlannedCourses()[f].SectionWaitlistStatus()=="PermissionToRegister")?!0:!1,course:p,section:t,credits:s.Credits(),gradingType:s.GetGradingType(),allowAdding:!1,overlap:!1,interactive:!0,ariaLabel:Ellucian.DegreePlans.Resources.CalendarSectionLinkAriaLabel.format(t.FormattedDisplay()),showEventTitleAsLink:ko.utils.unwrapObservable(n.showEventTitleAsLinks),instrMethod:l},y.push(a));if(v=ko.utils.unwrapObservable(h.Section),v&&v.PlannedMeetings&&v.PlannedMeetings().length>0)for(t=h.Section,o=0;o<t.PlannedMeetings().length;o++)for(i=t.PlannedMeetings()[o],u=0;u<i.Days().length;u++)i.StartTimeHour()==0&&i.EndTimeHour()==0||(r=new Date,r.setDate(r.getDate()-(r.getDay()-i.Days()[u])),r.setHours(i.StartTimeHour(),i.StartTimeMinute()),c=new Date(r),c.setHours(i.EndTimeHour(),i.EndTimeMinute()),l=i.InstructionalMethod(),a={id:h.Section.Id()+"_"+u,groupId:h.Section.Id(),title:ko.unwrap(t.FormattedDisplay),allDay:!1,start:r,end:c,classNames:"registered-cal-item",sectionId:h.Section.Id(),allowRemove:!1,course:p,section:t,credits:ko.unwrap(s.Credits),gradingType:ko.unwrap(s.GetGradingType),allowAdding:!1,interactive:!0,overlap:!1,ariaLabel:Ellucian.DegreePlans.Resources.CalendarSectionLinkAriaLabel.format(ko.unwrap(t.FormattedDisplay)),showEventTitleAsLink:ko.utils.unwrapObservable(n.showEventTitleAsLinks),instrMethod:l},y.push(a))}return y};this.ShowAvailableSections=function(t,i){n.currentTerm().availableSectionsRetrieved()?n.exposeAvailableSections(t,i):(lastFocus=document.activeElement,n.getAvailableSections(t,i),lastFocus.focus())};this.exposeAvailableSections=function(i){var r=$(".availSections[data-course='"+i.Id()+"_"+i.TitleDisplay()+"']");i.DisplayingAvailableSections()?(r.slideUp(50),i.DisplayingAvailableSections(!1),t[i.Id()]=null,setTimeout(function(){n.RemoveAvailableSectionsOnCalendar(i)},65)):(r.slideDown(50),i.DisplayingAvailableSections(!0),t[i.Id()]=i,setTimeout(function(){n.ShowAvailableSectionsOnCalendar(i)},130))};this.MouseOverAvailableSection=function(t,i,r){var u;r.target?u=r.target:r.srcElement&&(u=r.srcElement);t?n.HighlightAvailableSectionsOnCalendar(i.Id,!0):n.HighlightAvailableSectionsOnCalendar(i.Id,!1)};this.HighlightAvailableSectionsOnCalendar=function(t,r){var u=i+t;r?n.calendarEventToUpdate({eventId:u,classNames:["preview-fullopacity-cal-item","preview-normal-cal-item"]}):n.calendarEventToUpdate({eventId:u,classNames:["preview-normal-cal-item"]})};this.ShowAvailableSectionsOnCalendar=function(t){var a=[],k=t,v=t.PagedAvailableSections(),l,h,o,c,s,p,w,b;if(v.length>0)for(l=0;l<v.length;l++){var y=r,e=v[l];if(e!=null&&typeof e!="function")for(e.WaitlistAvailable===!0&&(e.Waitlisted>0||e.Available!==null&&e.Available===0&&e.Capacity!==null)?y=u:e.Available!=null&&e.Available<=0&&(y=f),h=0;h<e.PlannedMeetings.length;h++)if(o=e.PlannedMeetings[h],o.StartTime!=null&&o.EndTime!=null)for(c=0;c<o.Days.length;c++)s=new Date,s.setDate(s.getDate()-(s.getDay()-o.Days[c])),s.setHours(o.StartTimeHour,o.StartTimeMinute),p=new Date(s),p.setHours(o.EndTimeHour,o.EndTimeMinute),w="",o.InstructionalMethod&&(w=typeof o.InstructionalMethod=="function"?o.InstructionalMethod():o.InstructionalMethod),b={id:i+e.Id,groupId:i+e.Id,title:e.FormattedDisplay,allDay:!1,start:s,end:p,classNames:y,sectionId:e.Id,allowRemove:!1,course:t,section:e,allowAdding:!0,overlap:!1,editable:!0,interactive:!0,ariaLabel:Ellucian.DegreePlans.Resources.CalendarSectionLinkAriaLabel.format(ko.unwrap(e.FormattedDisplay)),idAttribute:i+e.Id+"_"+h+"_"+c,showEventTitleAsLink:ko.utils.unwrapObservable(n.showEventTitleAsLinks),instrMethod:w},a.push(b)}a.length>0&&n.calendarAvaialbleSectionsEvents.pushAll(a)};this.RemoveAvailableSectionsOnCalendar=function(t){var e=[],f=ko.observableArray([]),o,r,u;for(f.pushAll(n.calendarAvaialbleSectionsEvents()),o=t.Course,r=0;r<t.AvailableSections().length;r++)u=t.AvailableSections()[r],u!=null&&typeof u!="function"&&e.push(i+u.Id);ko.utils.arrayForEach(e,function(n){f.remove(function(t){return t.groupId===n})});n.calendarAvaialbleSectionsEvents(f())};this.RemoveSectionClickHandler=function(t){n.LoadingMessage(Ellucian.Student.PlanViewModelMessages.updatingMessage);n.ajaxBeforeSendHandler();planRepository.removeSection(n.DegreePlan().PersonId(),t.event.extendedProps.sectionId,ko.mapping.toJSON(n.DegreePlan().DegreePlanDto)).then(function(t){n.degreePlanChanged(!0);n.repositorySuccessHandler(t)}).catch(function(t){n.repositoryErrorHandler(t)}).then(n.updateCompleted,n.updateCompleted)};this.SectionDetailsClickHandler=function(t){t!==null&&(t.event.extendedProps.allowAdding?n.AddSectionToPlan(t.event.extendedProps.course,t.event.extendedProps.section):showSectionDetails({course:t.event.extendedProps.course,section:t.event.extendedProps.section,allowAdding:t.event.extendedProps.allowAdding,creditsOverride:t.event.extendedProps.credits,gradingTypeOverride:t.event.extendedProps.gradingType,addCallback:null,addTerms:null,studentId:n.DegreePlan().PersonId(),canSkipWaitlist:n.canSkipWaitlist()}))};this.eventCalendarAfterRender=function(){n.calendarHeightFix()};this.calendarHeightFix=function(){var n=$("*[id*=plan-calendar]:visible").height();$(".schedule-list").height(n)};this.changeToDesktop=function(){n.calendarHeightFix()}};Ellucian=Ellucian||{};Ellucian.Planning=Ellucian.Planning||{};Ellucian.Planning.programRequirementsSubscriberModel=function(){var n=this;this.requirementsRepository=Ellucian.Planning.requirementsRepository;this.degreePlanChanged=ko.observable(!1).subscribeTo("degreePlanChanged");this.degreePlanChanged.subscribe(function(t){t===!0&&n.updateSession(currentUserId)});this.updateSession=function(t){n.requirementsRepository.removeSessionKeys(t)}};var planRepository=Ellucian.Student.planRepository,authorizationCodeRepository=Ellucian.Student.authorizationCodeRepository,planViewModelInstance=new Ellucian.Student.PlanViewModel(!1,Ellucian.Course.ActionUrls.searchCourseCatalogActionUrl,planRepository,authorizationCodeRepository),officeHoursViewModelInstance=new Ellucian.Student.Faculty.OfficeHoursViewModel;Ellucian.Student.HasStudentPlanning&&(loadSamplePlanInstance=new loadSamplePlanViewModel,programRequirementsSubscriberModelInstance=new Ellucian.Planning.programRequirementsSubscriberModel);ko.postbox.serializer=ko.mapping.toJSON;this.showOfficeHours=function(n){officeHoursViewModelInstance.showOfficeHours(n)};$(document).ready(function(){var i=document.getElementById("spinner"),t,n,u;if(i)try{ko.applyBindings(planViewModelInstance,i)}catch(r){console.log(r)}if(t=document.getElementById("officeHours-dialogcontainer"),t)try{ko.applyBindings(officeHoursViewModelInstance,t)}catch(r){console.log(r)}n=getUrlVars();notification&&($("#notificationHost").notificationCenter("addNotification",notification),planViewModelInstance.Notification(notification));u=planRepository.get(currentUserId).then(function(t){var i=t[0],h=t[1],r,f,e,o,u,s;if(planViewModelInstance.DegreePlan(ko.mapping.fromJS(i,planMapping)),n&&n.currentTerm&&(i.TermToShow=decodeURIComponent(n.currentTerm)),!isNullOrEmpty(i.TermToShow))for(r=0;r<planViewModelInstance.DegreePlan().Terms().length;r++)if(planViewModelInstance.DegreePlan().Terms()[r]!==null&&planViewModelInstance.DegreePlan().Terms()[r].Code()===i.TermToShow){planViewModelInstance.currentTermCode(planViewModelInstance.DegreePlan().Terms()[r].Code());break}if(f=document.getElementById("schedplan-outer"),f)try{ko.applyBindings(planViewModelInstance,f)}catch(c){console.log(c)}n&&n.currentView&&(e=decodeURIComponent(n.currentView).toLowerCase(),e==="timeline"?(planViewModelInstance.selectedTab("timeline"),planViewModelInstance.activeTabId("schedplan-dp")):e==="calendar"?(planViewModelInstance.selectedTab("calendar"),planViewModelInstance.activeTabId("schedplan-schedule")):(planViewModelInstance.selectedTab("list"),planViewModelInstance.activeTabId("schedplan-schedule")));planViewModelInstance.checkForMobile(window,document);Ellucian.Student.HasStudentPlanning&&(o=document.getElementById("load-sample-plan-dialog"),o&&ko.applyBindings(loadSamplePlanInstance,document.getElementById("load-sample-plan-dialog")),planViewModelInstance.updatePlanningTerms(i.AvailableSamplePlanTerms),planViewModelInstance.updateAvailablePlanningTerms(i.AvailablePlanningTerms),loadSamplePlanInstance.StudentId(i.PersonId),loadSamplePlanInstance.DefaultCurriculumTrack(i.DefaultCurriculumTrack),loadSamplePlanInstance.DegreePlanId(planViewModelInstance.DegreePlan().DegreePlanDto.Id),ko.mapping.fromJS(h,{},loadSamplePlanInstance.StudentPrograms),$.ajax({url:getActiveProgramsUrl,type:"GET",contentType:jsonContentType,dataType:"json",success:function(n){account.handleInvalidSessionResponse(n)||(ko.mapping.fromJS(n,requirementMapping,loadSamplePlanInstance.AllPrograms),loadSamplePlanInstance.setupSamplePlansFilter())},error:function(n){n.status!=0&&$("#notificationHost").notificationCenter("addNotification",{message:"Unable to retrieve programs",type:"error"})},complete:function(){}}),planViewModelInstance.getCoachMarkStatus());planViewModelInstance.RefreshRegistrationEligibility();planViewModelInstance.isPageLoading(!1);$("#other-dialogs").show();!isNullOrEmpty(i.LastAdvisedOnByStatement)&&i.ShowAdvisementCompleteWorkflow&&isNullOrEmpty(i.DegreePlanDto.ArchiveNotificationDate)&&(u={message:escapeHtml(i.LastAdvisedOnByStatement),type:"info",flash:!1},s=[{label:stringAdvisementCompleteNotificationButton,action:function(){$("#notificationHost").notificationCenter("removeNotification",u);planRepository.archiveNotification(i.PersonId,ko.mapping.toJSON(i.DegreePlanDto)).then(function(){}).catch(function(n){self.repositoryErrorHandler(n)})}}],u.prompts=s,$("#notificationHost").notificationCenter("addNotification",u))}).catch(function(n){$("#notificationHost").notificationCenter("addNotification",{message:n,type:"error"});planViewModelInstance.isPageLoading(!1)});$(".esg-tab__link").on("click",function(n){planViewModelInstance.isShowingSchedule=n.target.id==="schedplan-schedule-tablink";var t=-1;planViewModelInstance.isShowingSchedule&&(t=$("#dp-plans").scrollLeft());planViewModelInstance.isShowingSchedule?!planViewModelInstance.isShowingSchedule&&t>=0&&setTimeout(function(){$("#dp-plans").scrollLeft(t)},50):setTimeout(function(){planViewModelInstance.ScrollToTerm(!1)},200);n.target.id==="schedplan-petitions-waivers-tablink"&&(planViewModelInstance.studentPetitionsWaiversInstance.isLoaded()||retrievePetitionsWaivers());n.target.id==="schedplan-grading-ids-tablink"&&(planViewModelInstance.studentGradeIdsInstance.isLoaded()||retrieveStudentGradingIds())})});requirementMapping={Programs:{create:function(n){return new programModel(n.data)}},Requirements:{create:function(n){return new requirementModel(n.data)}},Subrequirements:{create:function(n){return new subrequirementModel(n.data,n.parent)}},Groups:{create:function(n){return new groupModel(n.data,n.parent)}},CoursesThatNeedPlanned:{create:function(n){return new courseModel(n.data)}},AppliedAcademicCredits:{create:function(n){return new creditModel(n.data)}},AppliedPlannedCourses:{create:function(n){return new courseModel(n.data)}},NotAppliedAcademicCredits:{create:function(n){return new creditModel(n.data)}},NotAppliedPlannedCredits:{create:function(n){return new courseModel(n.data)}},AcademicCreditsIncludedInGPA:{create:function(n){return new creditModel(n.data)}},RelatedAcademicCredits:{create:function(n){return new creditModel(n.data)}},RelatedPlannedCredits:{create:function(n){return new courseModel(n.data)}}};Ellucian=Ellucian||{};Ellucian.Course=Ellucian.Course||{};var addSectionCallback=null,addCourseCallback=null,updateCourseCallback=null,currentSection=null,currentCourse=null,currentCourseOriginalTerm=null,lastFocus=null,defaultDetailsOptions={course:null,allowAdding:!1,allowUpdating:!1,addTerms:null,addCallback:null,creditsOverride:null,gradingTypeOverride:null,instantEnrollment:!1},xhr=null;this.showCourseOrSectionDetails=function(n){n=$.extend({},defaultDetailsOptions,n);var t=ko.utils.unwrapObservable(n.course.Section);t!==null?(n.section=n.course.Section,showSectionDetails(n)):isNullOrEmpty(n.course.CoursePlaceholderDescription())?isNullOrEmpty(n.course)||showCourseDetails(n):showCoursePlaceholderDetails(n)};this.showCourseDetails=function(n){var t,r,c,u,o,s,i,l;if(n=$.extend({},defaultDetailsOptions,n),lastFocus=document.activeElement,!isNullOrEmpty(n.course)&&typeof n.course!="function"){if(n.allowAdding?(addCourseCallback=n.addCallback,addSectionCallback=null):(addCourseCallback=null,addSectionCallback=null),updateCourseCallback=n.allowUpdating?n.updateCallback:null,currentCourse=n.course,cvm.dialogTitle(Ellucian.Course.SectionCourseCommonDetails.CourseDialogTitle),cvm.FullTitle(n.course.FullTitleDisplay()),isNullOrEmpty(n.course.Description())?cvm.Description(Ellucian.Course.SectionDetails.courseDescriptionUnavailable):cvm.Description(n.course.Description()),isNullOrEmpty(n.course.TermsOffered())?cvm.TermsOffered(null):cvm.TermsOffered(Ellucian.Course.SectionCourseCommonDetails.CourseTypicallyOffered.format(n.course.TermsOffered())),isNullOrEmpty(n.course.YearsOffered())?cvm.YearsOffered(null):cvm.YearsOffered(Ellucian.Course.SectionCourseCommonDetails.CourseTypicallyOffered.format(n.course.YearsOffered())),n.creditsOverride)cvm.IsStaticCredits(!0),cvm.CreditsStatic(n.creditsOverride),cvm.IsDropDownCredits(!1),cvm.IsFreeFormCredits(!1),cvm.CreditsLabel("");else if(n.allowAdding)if(isCourseOrSectionVariableCredit(ko.mapping.toJS(n.course))){var h=n.course.VariableCreditIncrement(),f=n.course.MinimumCredits(),e=n.course.MaximumCredits();if(h!==null){for(t=[],r=f;r<e;r+=h)c=Math.round(r*1e5)/1e5,t.push(c);for(t.push(e),u=0;u<t.length;u++)cvm.CreditsVariableIncrements.push(t[u]);cvm.CreditsVariableIncrements();cvm.IsDropDownCredits(!0);cvm.IsFreeFormCredits(!1);cvm.IsStaticCredits(!1)}else cvm.IsDropDownCredits(!1),cvm.IsFreeFormCredits(!0),cvm.FreeFormCreditsValue(f),cvm.IsStaticCredits(!1),setTimeout(function(){$("#coursedetails-freeformcredits").select()},100);cvm.CreditsLabel(Ellucian.Course.SectionCourseCommonDetails.MinimumToMaximumCreditsFormatString.format(f,e))}else o=courseOrSectionCreditsCeusDisplay(ko.mapping.toJS(n.course)),s="",s=isNullOrEmpty(o)?Ellucian.Course.SectionCourseCommonDetails.ToBeDeterminedAbbreviation:o,cvm.IsDropDownCredits(!1),cvm.CreditsLabel(""),cvm.IsFreeFormCredits(!1),cvm.IsStaticCredits(!0),cvm.CreditsStatic(s);else cvm.IsDropDownCredits(!1),cvm.IsFreeFormCredits(!1),cvm.CreditsLabel(""),cvm.IsStaticCredits(!0),cvm.CreditsStatic(n.course.CreditsCeusDisplay());if((n.allowAdding||n.allowUpdating)&&n.addTerms!==null){for(cvm.AddTerms.removeAll(),currentCourseOriginalTerm=n.selectedTerm,i=0;i<n.addTerms.length;i++)cvm.AddTerms.push({code:n.addTerms[i].Code,description:n.addTerms[i].Description});if(!isNullOrEmpty(n.selectedTerm))try{cvm.SelectedTerm(n.selectedTerm)}catch(a){}}cvm.AllowAdding(n.allowAdding);cvm.AllowUpdating(n.allowUpdating);cvm.Requisites.removeAll();cvm.Locations.removeAll();cvm.isLoading(!0);cvm.courseIsVisible(!0);l={courseId:n.course.Id()};xhr&&xhr.readyState!==4&&xhr.abort();xhr=$.ajax({url:courseDetailsActionUrl,data:JSON.stringify(l),type:"POST",contentType:jsonContentType,dataType:"json",success:function(n){if(!account.handleInvalidSessionResponse(n)){if(cvm.Requisites.removeAll(),n.RequisiteItems)for(var t=0;t<n.RequisiteItems.length;t++)cvm.Requisites.push(n.RequisiteItems[t]);if(cvm.Locations.removeAll(),n.LocationItems&&n.LocationItems.length>0)for(t=0;t<n.LocationItems.length;t++)cvm.Locations.push(n.LocationItems[t]);if(cvm.LocationCycleRestrictionDescriptions.removeAll(),n.LocationCycleRestrictionDescriptions&&n.LocationCycleRestrictionDescriptions.length>0){for(t=0;t<n.LocationCycleRestrictionDescriptions.length;t++)cvm.LocationCycleRestrictionDescriptions.push(n.LocationCycleRestrictionDescriptions[t]);cvm.showLocationCycleRestrictionDescriptions(!0)}}},error:function(){cvm.Requisites.removeAll();cvm.Locations.removeAll()},complete:function(){cvm.isLoading(!1)}})}};this.showSectionDetails=function(n){var r,t,l,u,s,h,f,i,a;if(n=$.extend({},defaultDetailsOptions,n),lastFocus=document.activeElement,!isNullOrEmpty(n.course)&&typeof n.course!="function"&&!isNullOrEmpty(n.section)&&typeof n.section!="function"){if(currentSection=ko.mapping.toJS(n.section),n.allowAdding?(addSectionCallback=n.addCallback,addCourseCallback=null):(addSectionCallback=null,addCourseCallback=null),svm.AllowAdding(n.allowAdding),svm.InstantEnrollment(n.instantEnrollment),svm.canSkipWaitlist(n.canSkipWaitlist),svm.FullTitle(currentSection.FullTitleDisplay),isNullOrEmpty(n.course.Description())?svm.Description(Ellucian.Course.SectionDetails.courseDescriptionUnavailable):svm.Description(n.course.Description()),svm.SectionDetailShowSpecialIcon(ko.unwrap(n.section.ShowSpecialIcon)),svm.SectionDetailShowSpecialIcon2(ko.unwrap(n.section.ShowSpecialIcon2)),svm.SectionDetailShowSpecialIcon3(ko.unwrap(n.section.ShowSpecialIcon3)),svm.SectionDetailShowSpecialIcon4(ko.unwrap(n.section.ShowSpecialIcon4)),svm.SectionDetailShowSpecialIcon5(ko.unwrap(n.section.ShowSpecialIcon5)),n.creditsOverride&&!n.allowAdding)svm.IsStaticCredits(!0),svm.CreditsStatic(n.creditsOverride),svm.IsDropDownCredits(!1),svm.IsFreeFormCredits(!1),svm.CreditsLabel("");else if(n.allowAdding)if(isCourseOrSectionVariableCredit(ko.toJS(currentSection))){var c=currentSection.VariableCreditIncrement,e=currentSection.MinimumCredits,o=currentSection.MaximumCredits;if(c!==null){for(r=[],t=e;t<o;t+=c)l=Math.round(t*1e5)/1e5,r.push(l);for(r.push(o),svm.CreditsVariableIncrements.removeAll(),u=0;u<r.length;u++)svm.CreditsVariableIncrements.push(r[u]);svm.IsDropDownCredits(!0);svm.IsFreeFormCredits(!1);svm.IsStaticCredits(!1)}else svm.IsDropDownCredits(!1),svm.IsFreeFormCredits(!0),svm.FreeFormCreditsValue(e),svm.IsStaticCredits(!1),setTimeout(function(){$("#sectiondetails-freeformcredits").select()},100);svm.CreditsLabel(Ellucian.Course.SectionCourseCommonDetails.MinimumToMaximumCreditsFormatString.format(e,o))}else s=courseOrSectionCreditsCeusDisplay(ko.mapping.toJS(currentSection)),h="",h=isNullOrEmpty(s)?Ellucian.Course.SectionCourseCommonDetails.ToBeDeterminedAbbreviation:s,svm.IsDropDownCredits(!1),svm.CreditsLabel(""),svm.IsFreeFormCredits(!1),svm.IsStaticCredits(!0),svm.CreditsStatic(h);else svm.IsDropDownCredits(!1),svm.IsFreeFormCredits(!1),svm.CreditsLabel(""),svm.IsStaticCredits(!0),svm.CreditsStatic(courseOrSectionCreditsCeusDisplay(ko.mapping.toJS(currentSection)));svm.AllowAdding()&&!svm.InstantEnrollment()?(svm.IsStaticGrading(!1),svm.GradingOptions.removeAll(),currentSection.OnlyPassNoPass?svm.GradingOptions.push({Description:Ellucian.Course.SectionDetails.stringPassFailGrading,Code:Ellucian.Course.SectionDetails.stringPassFailGradingCode}):(svm.GradingOptions.push({Description:Ellucian.Course.SectionDetails.stringGradedGrading,Code:Ellucian.Course.SectionDetails.stringGradedGradingCode}),currentSection.AllowPassNoPass&&svm.GradingOptions.push({Description:Ellucian.Course.SectionDetails.stringPassFailGrading,Code:Ellucian.Course.SectionDetails.stringPassFailGradingCode}),currentSection.AllowAudit&&svm.GradingOptions.push({Description:Ellucian.Course.SectionDetails.stringAuditGrading,Code:Ellucian.Course.SectionDetails.stringAuditGradingCode})),n.gradingTypeOverride!==null&&svm.gradingSelected(n.gradingTypeOverride)):(svm.IsStaticGrading(!0),n.gradingTypeOverride!==null?(f=Ellucian.Course.SectionDetails.stringGradedGrading,n.gradingTypeOverride.toString()===Ellucian.Course.SectionDetails.stringAuditGradingCode?(f=Ellucian.Course.SectionDetails.stringAuditGrading,svm.IsStaticCredits(!0)):n.gradingTypeOverride.toString()===Ellucian.Course.SectionDetails.stringPassFailGradingCode&&(f=Ellucian.Course.SectionDetails.stringPassFailGrading),svm.GradingStatic(f)):(i=[],currentSection.OnlyPassNoPass?i.push(Ellucian.Course.SectionDetails.stringPassFailGrading):(i.push(Ellucian.Course.SectionDetails.stringGradedGrading),currentSection.AllowPassNoPass&&i.push(Ellucian.Course.SectionDetails.stringPassFailGrading),currentSection.AllowAudit&&i.push(Ellucian.Course.SectionDetails.stringAuditGrading)),svm.GradingStatic(i.join(", "))));svm.Capacity(currentSection.Capacity);svm.Available(currentSection.Available);svm.SeatlistAvailable(currentSection.SeatlistAvailable);svm.WaitlistAvailable(currentSection.WaitlistAvailable);svm.AvailabilityTooltip(currentSection.AvailabilityTooltip);svm.AvailabilityDisplay(currentSection.AvailabilityDisplay);svm.Waitlisted(currentSection.Waitlisted);svm.Corequisites.removeAll();svm.Requisites.removeAll();svm.TimeLocations.removeAll();svm.Dates(Ellucian.Course.SectionCourseCommonDetails.ToBeDeterminedAbbreviation);svm.Instructors.removeAll();svm.InstructorOfficeHours.removeAll();svm.BooksTotal("");svm.BookstoreUrl(null);svm.TermDisplay("");svm.TopicCodeDescription("");svm.Charges.removeAll();svm.HasRuleBasedCharges(!1);svm.isLoading(!0);svm.sectionIsVisible(!0);a={sectionId:currentSection.Id,studentId:n.studentId};xhr&&xhr.readyState!==4&&xhr.abort();xhr=$.ajax({url:Ellucian.Course.ActionUrls.sectionDetailsActionUrl,data:JSON.stringify(a),type:"POST",contentType:jsonContentType,dataType:"json",success:function(n){if(!account.handleInvalidSessionResponse(n)){if(svm.Corequisites.removeAll(),n.CorequisiteItems)for(t=0;t<n.CorequisiteItems.length;t++)svm.Corequisites.push(n.CorequisiteItems[t]);if(svm.Requisites.removeAll(),n.RequisiteItems)for(t=0;t<n.RequisiteItems.length;t++)svm.Requisites.push(new Ellucian.Course.RequisiteModel(n.RequisiteItems[t],t));if(n.TimeLocationItems)for(t=0;t<n.TimeLocationItems.length;t++)svm.TimeLocations.push({Time:n.TimeLocationItems[t].Time,Location:n.TimeLocationItems[t].Location,Dates:n.TimeLocationItems[t].Dates,Counter:t+1});if(svm.Dates(n.DatesDisplay),svm.TermDisplay(n.TermDisplay),svm.Instructors.removeAll(),n.InstructorItems&&n.InstructorItems.length>0)for(t=0;t<n.InstructorItems.length;t++){var u=n.InstructorItems[t].Name,i="",r="";n.InstructorItems[t].EmailAddresses&&n.InstructorItems[t].EmailAddresses.length>0&&(i=n.InstructorItems[t].EmailAddresses[0]);n.InstructorItems[t].PhoneNumbers&&n.InstructorItems[t].PhoneNumbers.length>0&&(r=n.InstructorItems[t].PhoneNumbers[0]);svm.Instructors.push({Name:u,Email:i,Phone:r})}if(svm.InstructorOfficeHours.removeAll(),n.InstructorOfficeHours&&n.InstructorOfficeHours.length>0)for(t=0;t<n.InstructorOfficeHours.length;t++)svm.InstructorOfficeHours.push(n.InstructorOfficeHours[t]);svm.BookList(n.BookList);svm.ShowBookList(n.ShowBookList);svm.BooksTotal(n.BooksTotal);svm.BookstoreUrl(n.BookstoreUrl);svm.ShowInstantEnrollmentBookstoreLink(n.ShowInstantEnrollmentBookstoreLink);svm.Capacity(n.Capacity);svm.Available(n.Available);svm.SeatlistAvailable(n.SeatlistAvailable);svm.WaitlistAvailable(n.WaitlistAvailable);svm.AvailabilityTooltip(n.AvailabilityTooltip);svm.AvailabilityDisplay(n.AvailabilityDisplay);svm.Waitlisted(n.Waitlisted);svm.TopicCodeDescription(n.TopicCodeDescription);svm.GradingOptions.removeAll();n.OnlyPassNoPass?n.PassNoPassIsRestricted===!1?svm.GradingOptions.push({Description:Ellucian.Course.SectionDetails.stringPassFailGrading,Code:Ellucian.Course.SectionDetails.stringPassFailGradingCode}):svm.AllowAdding(!1):(svm.GradingOptions.push({Description:Ellucian.Course.SectionDetails.stringGradedGrading,Code:Ellucian.Course.SectionDetails.stringGradedGradingCode}),n.AllowPassNoPass&&n.PassNoPassIsRestricted===!1&&svm.GradingOptions.push({Description:Ellucian.Course.SectionDetails.stringPassFailGrading,Code:Ellucian.Course.SectionDetails.stringPassFailGradingCode}),n.AllowAudit&&n.AuditIsRestricted===!1&&svm.GradingOptions.push({Description:Ellucian.Course.SectionDetails.stringAuditGrading,Code:Ellucian.Course.SectionDetails.stringAuditGradingCode}));svm.GradingOptionsMatch(n.GradingOptionsMatch);svm.Comments(n.Comments);svm.TransferStatusDescription(n.TransferStatusDescription);svm.Charges.removeAll();ko.mapping.fromJS(n.Charges,{},svm.Charges);svm.HasRuleBasedCharges(n.HasRuleBasedCharges)}},error:function(){svm.Corequisites.removeAll();svm.Requisites.removeAll();svm.TimeLocations.removeAll();svm.Dates(Ellucian.Course.SectionCourseCommonDetails.ToBeDeterminedAbbreviation);svm.Instructors.removeAll();svm.InstructorOfficeHours.removeAll();svm.BooksTotal("");svm.BookstoreUrl(null);svm.ShowInstantEnrollmentBookstoreLink(!1);svm.Charges.removeAll()},complete:function(){svm.isLoading(!1)}})}};this.showCoursePlaceholderDetails=function(n){if(n=$.extend({},defaultDetailsOptions,n),lastFocus=document.activeElement,!isNullOrEmpty(n.course)&&typeof n.course!="function"){if(n.allowAdding?(addCourseCallback=n.addCallback,addSectionCallback=null):(addCourseCallback=null,addSectionCallback=null),updateCourseCallback=n.allowUpdating?n.updateCallback:null,currentCourse=n.course,cvm.isCoursePlaceholder(!0),cvm.dialogTitle(Ellucian.Course.SectionCourseCommonDetails.CoursePlaceholderDialogTitle),cvm.FullTitle(n.course.FullTitleDisplay()),cvm.searchCatalogForPlaceholder=n.courseSearchCallback,cvm.showCatalogSearchButton=!!(n.course.CoursePlaceholderAcademicRequirement&&(n.course.CoursePlaceholderAcademicRequirement.AcademicRequirementCode||n.course.CoursePlaceholderAcademicRequirement.SubrequirementId||n.course.CoursePlaceholderAcademicRequirement.GroupId)),isNullOrEmpty(n.course.CoursePlaceholderDescription())?cvm.Description(Ellucian.Course.SectionDetails.courseDescriptionUnavailable):cvm.Description(n.course.CoursePlaceholderDescription()),cvm.TermsOffered(null),cvm.YearsOffered(null),cvm.IsStaticCredits(!0),cvm.CreditsStatic(n.course.CreditsCeusDisplay()),cvm.IsDropDownCredits(!1),cvm.IsFreeFormCredits(!1),cvm.CreditsLabel(""),(n.allowAdding||n.allowUpdating)&&n.addTerms!==null){cvm.AddTerms.removeAll();currentCourseOriginalTerm=n.selectedTerm;for(var t=0;t<n.addTerms.length;t++)cvm.AddTerms.push({code:n.addTerms[t].Code,description:n.addTerms[t].Description});if(!isNullOrEmpty(n.selectedTerm))try{cvm.SelectedTerm(n.selectedTerm)}catch(i){}}cvm.AllowAdding(n.allowAdding);cvm.AllowUpdating(n.allowUpdating);cvm.Requisites.removeAll();cvm.Locations.removeAll();cvm.courseIsVisible(!0);cvm.isLoading(!1)}};this.addSectionDetails=function(){if(typeof addSectionCallback==typeof Function){var n=computeChosenSectionCredits(),t=computeChosenSectionGrading();addSectionCallback({chosenCredits:n,chosenGradingType:t,chosenTerm:currentSection.TermId})}};this.computeChosenSectionCredits=function(){return $("#sectiondetails-selectvarcredit").is(":visible")?$("#sectiondetails-selectvarcredit").val():$("#sectiondetails-freeformcredits").is(":visible")?$("#sectiondetails-freeformcredits").val():$("#sectiondetails-creditsstatic").text()};this.computeChosenSectionGrading=function(){return svm.GradingOptions()&&svm.GradingOptions().length===1?svm.GradingOptions()[0].Code:svm.gradingSelected()};this.addCourseDetails=function(){var n,t;typeof addCourseCallback==typeof Function&&(n=null,n=$("#coursedetails-selectvarcredit").is(":visible")?$("#coursedetails-selectvarcredit").val():$("#coursedetails-freeformcredits").is(":visible")?$("#coursedetails-freeformcredits").val():$("#coursedetails-creditsstatic").text(),t=$("#coursedetails-selectterm").val(),addCourseCallback({chosenCredits:n,chosenTerm:t}),cvm.SelectedTerm(null))};this.updateCourseDetails=function(){if(typeof updateCourseCallback=="function"){var n=$("#coursedetails-selectterm").val();updateCourseCallback({courseId:currentCourse.Id(),oldTerm:currentCourseOriginalTerm,newTerm:n})}};this.focusAddingCourse=function(){$("#coursedetails-freeformcredits").is(":visible")?$("#coursedetails-freeformcredits").trigger("focus"):$("#coursedetails-selectvarcredit").is(":visible")&&$("#coursedetails-selectvarcredit").trigger("focus")};this.focusAddingSection=function(){$("#sectiondetails-freeformcredits").is(":visible")?$("#sectiondetails-freeformcredits").trigger("focus"):$("#sectiondetails-selectvarcredit").is(":visible")?$("#sectiondetails-selectvarcredit").trigger("focus"):$("#sectiondetails-selectgrading").is(":visible")&&$("#sectiondetails-selectgrading").trigger("focus")};this.closeCourseDetails=function(){cvm.courseIsVisible(!1);cvm.showLocationCycleRestrictionDescriptions(!1);cvm.SelectedTerm(null)};this.closeSectionDetails=function(){svm.sectionIsVisible(!1)};this.checkForCourseAddEnter=function(n){if(n.keyCode===13)return addCourseDetails(),!1};this.checkForSectionAddEnter=function(n){if(n.keyCode===13)return addSectionDetails(),!1};cvm=new courseDetailsViewModel;svm=new sectionDetailsViewModel;Ellucian.Course.RequisiteModel=function(n,t){if(n!==null&&typeof n!="undefined"){var i=this;ko.mapping.fromJS(n,{},i);this.itemIndex=t;this.displayText=ko.pureComputed(function(){var n=Ellucian.Course.SectionDetails.UnableToDetermineRequisiteSectionText;return i.DisplayText()!==null&&typeof i.DisplayText()!="undefined"&&(n=i.DisplayText(),i.DisplayTextExtension()!==null&&typeof i.DisplayTextExtension()!="undefined"&&(n+=" "+i.DisplayTextExtension())),n});this.id=ko.pureComputed(function(){var n="requisite-";return n+=i.itemIndex!==null&&typeof i.itemIndex!="undefined"?ko.unwrap(i.itemIndex):window.Ellucian.indexCounter.next(),i.IsRequired()===!0?"required-"+n:"optional-"+n});this.messageType=ko.pureComputed(function(){var n="warning";return i.IsRequired()===!1&&(n="info"),n})}};$(document).ready(function(){cvm&&ko.applyBindings(cvm,document.getElementById("coursedetails-dialogcontainer"))});$(document).ready(function(){svm&&ko.applyBindings(svm,document.getElementById("sectiondetails-dialogcontainer"))})